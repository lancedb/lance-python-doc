

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>All Modules &mdash; pylance  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Indexing and Searching" href="index-and-search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            pylance
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dataset.html">Lance Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic-io.html">Basic IOs</a></li>
<li class="toctree-l1"><a class="reference internal" href="random-access.html">Random Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-evolution.html">Data Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="index-and-search.html">Indexing and Searching</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">All Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lance.BlobColumn"><code class="docutils literal notranslate"><span class="pre">BlobColumn</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.BlobFile"><code class="docutils literal notranslate"><span class="pre">BlobFile</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.BlobFile.close"><code class="docutils literal notranslate"><span class="pre">BlobFile.close()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.BlobFile.closed"><code class="docutils literal notranslate"><span class="pre">BlobFile.closed</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.BlobFile.readable"><code class="docutils literal notranslate"><span class="pre">BlobFile.readable()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.BlobFile.readall"><code class="docutils literal notranslate"><span class="pre">BlobFile.readall()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.BlobFile.readinto"><code class="docutils literal notranslate"><span class="pre">BlobFile.readinto()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.BlobFile.seek"><code class="docutils literal notranslate"><span class="pre">BlobFile.seek()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.BlobFile.seekable"><code class="docutils literal notranslate"><span class="pre">BlobFile.seekable()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.BlobFile.size"><code class="docutils literal notranslate"><span class="pre">BlobFile.size()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.BlobFile.tell"><code class="docutils literal notranslate"><span class="pre">BlobFile.tell()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.DataStatistics"><code class="docutils literal notranslate"><span class="pre">DataStatistics</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.DataStatistics.fields"><code class="docutils literal notranslate"><span class="pre">DataStatistics.fields</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.FFILanceTableProvider"><code class="docutils literal notranslate"><span class="pre">FFILanceTableProvider</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.FieldStatistics"><code class="docutils literal notranslate"><span class="pre">FieldStatistics</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.FieldStatistics.bytes_on_disk"><code class="docutils literal notranslate"><span class="pre">FieldStatistics.bytes_on_disk</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FieldStatistics.id"><code class="docutils literal notranslate"><span class="pre">FieldStatistics.id</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.FragmentMetadata"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.id"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.files"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.files</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.physical_rows"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.physical_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.deletion_file"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.deletion_file</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.row_id_meta"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.row_id_meta</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.data_files"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.data_files()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id0"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.deletion_file</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.files</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.from_json"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.from_json()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.num_deletions"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.num_deletions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.num_rows"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.num_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.physical_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.row_id_meta</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.FragmentMetadata.to_json"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.to_json()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.LanceDataset"><code class="docutils literal notranslate"><span class="pre">LanceDataset</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.add_columns"><code class="docutils literal notranslate"><span class="pre">LanceDataset.add_columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.alter_columns"><code class="docutils literal notranslate"><span class="pre">LanceDataset.alter_columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.checkout_version"><code class="docutils literal notranslate"><span class="pre">LanceDataset.checkout_version()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.cleanup_old_versions"><code class="docutils literal notranslate"><span class="pre">LanceDataset.cleanup_old_versions()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.commit"><code class="docutils literal notranslate"><span class="pre">LanceDataset.commit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.commit_batch"><code class="docutils literal notranslate"><span class="pre">LanceDataset.commit_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.config"><code class="docutils literal notranslate"><span class="pre">LanceDataset.config()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.count_rows"><code class="docutils literal notranslate"><span class="pre">LanceDataset.count_rows()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.create_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.create_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.create_scalar_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.create_scalar_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.data_storage_version"><code class="docutils literal notranslate"><span class="pre">LanceDataset.data_storage_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.delete"><code class="docutils literal notranslate"><span class="pre">LanceDataset.delete()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.delete_config_keys"><code class="docutils literal notranslate"><span class="pre">LanceDataset.delete_config_keys()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.drop"><code class="docutils literal notranslate"><span class="pre">LanceDataset.drop()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.drop_columns"><code class="docutils literal notranslate"><span class="pre">LanceDataset.drop_columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.drop_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.drop_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.get_fragment"><code class="docutils literal notranslate"><span class="pre">LanceDataset.get_fragment()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.get_fragments"><code class="docutils literal notranslate"><span class="pre">LanceDataset.get_fragments()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.has_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.has_index</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.head"><code class="docutils literal notranslate"><span class="pre">LanceDataset.head()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.index_statistics"><code class="docutils literal notranslate"><span class="pre">LanceDataset.index_statistics()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.insert"><code class="docutils literal notranslate"><span class="pre">LanceDataset.insert()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.join"><code class="docutils literal notranslate"><span class="pre">LanceDataset.join()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.lance_schema"><code class="docutils literal notranslate"><span class="pre">LanceDataset.lance_schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.latest_version"><code class="docutils literal notranslate"><span class="pre">LanceDataset.latest_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.list_indices"><code class="docutils literal notranslate"><span class="pre">LanceDataset.list_indices()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.max_field_id"><code class="docutils literal notranslate"><span class="pre">LanceDataset.max_field_id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.merge"><code class="docutils literal notranslate"><span class="pre">LanceDataset.merge()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.merge_insert"><code class="docutils literal notranslate"><span class="pre">LanceDataset.merge_insert()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.migrate_manifest_paths_v2"><code class="docutils literal notranslate"><span class="pre">LanceDataset.migrate_manifest_paths_v2()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.optimize"><code class="docutils literal notranslate"><span class="pre">LanceDataset.optimize</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.partition_expression"><code class="docutils literal notranslate"><span class="pre">LanceDataset.partition_expression</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.prewarm_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.prewarm_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.replace_field_metadata"><code class="docutils literal notranslate"><span class="pre">LanceDataset.replace_field_metadata()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.replace_schema"><code class="docutils literal notranslate"><span class="pre">LanceDataset.replace_schema()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.replace_schema_metadata"><code class="docutils literal notranslate"><span class="pre">LanceDataset.replace_schema_metadata()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.restore"><code class="docutils literal notranslate"><span class="pre">LanceDataset.restore()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.sample"><code class="docutils literal notranslate"><span class="pre">LanceDataset.sample()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.scanner"><code class="docutils literal notranslate"><span class="pre">LanceDataset.scanner()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.schema"><code class="docutils literal notranslate"><span class="pre">LanceDataset.schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.session"><code class="docutils literal notranslate"><span class="pre">LanceDataset.session()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.stats"><code class="docutils literal notranslate"><span class="pre">LanceDataset.stats</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.tags"><code class="docutils literal notranslate"><span class="pre">LanceDataset.tags</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.take"><code class="docutils literal notranslate"><span class="pre">LanceDataset.take()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.take_blobs"><code class="docutils literal notranslate"><span class="pre">LanceDataset.take_blobs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.to_batches"><code class="docutils literal notranslate"><span class="pre">LanceDataset.to_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.to_table"><code class="docutils literal notranslate"><span class="pre">LanceDataset.to_table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.update"><code class="docutils literal notranslate"><span class="pre">LanceDataset.update()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.update_config"><code class="docutils literal notranslate"><span class="pre">LanceDataset.update_config()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.uri"><code class="docutils literal notranslate"><span class="pre">LanceDataset.uri</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.validate"><code class="docutils literal notranslate"><span class="pre">LanceDataset.validate()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.version"><code class="docutils literal notranslate"><span class="pre">LanceDataset.version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceDataset.versions"><code class="docutils literal notranslate"><span class="pre">LanceDataset.versions()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.LanceFragment"><code class="docutils literal notranslate"><span class="pre">LanceFragment</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.count_rows"><code class="docutils literal notranslate"><span class="pre">LanceFragment.count_rows()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.create"><code class="docutils literal notranslate"><span class="pre">LanceFragment.create()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.create_from_file"><code class="docutils literal notranslate"><span class="pre">LanceFragment.create_from_file()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.data_files"><code class="docutils literal notranslate"><span class="pre">LanceFragment.data_files()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.delete"><code class="docutils literal notranslate"><span class="pre">LanceFragment.delete()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.deletion_file"><code class="docutils literal notranslate"><span class="pre">LanceFragment.deletion_file()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.fragment_id"><code class="docutils literal notranslate"><span class="pre">LanceFragment.fragment_id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.head"><code class="docutils literal notranslate"><span class="pre">LanceFragment.head()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.merge"><code class="docutils literal notranslate"><span class="pre">LanceFragment.merge()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.merge_columns"><code class="docutils literal notranslate"><span class="pre">LanceFragment.merge_columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.metadata"><code class="docutils literal notranslate"><span class="pre">LanceFragment.metadata</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.num_deletions"><code class="docutils literal notranslate"><span class="pre">LanceFragment.num_deletions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.partition_expression"><code class="docutils literal notranslate"><span class="pre">LanceFragment.partition_expression</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.physical_rows"><code class="docutils literal notranslate"><span class="pre">LanceFragment.physical_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.physical_schema"><code class="docutils literal notranslate"><span class="pre">LanceFragment.physical_schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.scanner"><code class="docutils literal notranslate"><span class="pre">LanceFragment.scanner()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.schema"><code class="docutils literal notranslate"><span class="pre">LanceFragment.schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.take"><code class="docutils literal notranslate"><span class="pre">LanceFragment.take()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.to_batches"><code class="docutils literal notranslate"><span class="pre">LanceFragment.to_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceFragment.to_table"><code class="docutils literal notranslate"><span class="pre">LanceFragment.to_table()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.LanceOperation"><code class="docutils literal notranslate"><span class="pre">LanceOperation</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.Append"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Append</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Append.fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Append.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Append.fragments</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.BaseOperation"><code class="docutils literal notranslate"><span class="pre">LanceOperation.BaseOperation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.CreateIndex"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.CreateIndex.created_at"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.created_at</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.CreateIndex.dataset_version"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.dataset_version</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.CreateIndex.fields"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.fields</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.CreateIndex.fragment_ids"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.CreateIndex.index_version"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.index_version</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.CreateIndex.name"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.name</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.CreateIndex.uuid"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.uuid</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.DataReplacement"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacement</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.DataReplacement.replacements"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacement.replacements</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.DataReplacementGroup"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacementGroup</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.DataReplacementGroup.fragment_id"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacementGroup.fragment_id</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.DataReplacementGroup.new_file"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacementGroup.new_file</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.Delete"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Delete.updated_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.updated_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Delete.deleted_fragment_ids"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.deleted_fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Delete.predicate"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.predicate</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.deleted_fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.predicate</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.updated_fragments</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.Merge"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Merge.fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Merge.schema"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge.schema</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge.schema</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.Overwrite"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Overwrite.new_schema"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite.new_schema</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Overwrite.fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite.new_schema</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.Project"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Project</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Project.schema"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Project.schema</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Project.schema</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.Restore"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Restore</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Restore.version"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Restore.version</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.Rewrite"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Rewrite.groups"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite.groups</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Rewrite.rewritten_indices"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite.rewritten_indices</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite.groups</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite.rewritten_indices</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.RewriteGroup"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewriteGroup</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.RewriteGroup.new_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewriteGroup.new_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.RewriteGroup.old_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewriteGroup.old_fragments</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.RewrittenIndex"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewrittenIndex</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.RewrittenIndex.new_id"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewrittenIndex.new_id</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.RewrittenIndex.old_id"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewrittenIndex.old_id</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceOperation.Update"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Update.removed_fragment_ids"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.removed_fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Update.updated_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.updated_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Update.new_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.new_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.LanceOperation.Update.fields_modified"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.fields_modified</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.fields_modified</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.new_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.removed_fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.updated_fragments</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.LanceScanner"><code class="docutils literal notranslate"><span class="pre">LanceScanner</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.analyze_plan"><code class="docutils literal notranslate"><span class="pre">LanceScanner.analyze_plan()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.count_rows"><code class="docutils literal notranslate"><span class="pre">LanceScanner.count_rows()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.dataset_schema"><code class="docutils literal notranslate"><span class="pre">LanceScanner.dataset_schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.explain_plan"><code class="docutils literal notranslate"><span class="pre">LanceScanner.explain_plan()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.from_batches"><code class="docutils literal notranslate"><span class="pre">LanceScanner.from_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.from_dataset"><code class="docutils literal notranslate"><span class="pre">LanceScanner.from_dataset()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.from_fragment"><code class="docutils literal notranslate"><span class="pre">LanceScanner.from_fragment()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.head"><code class="docutils literal notranslate"><span class="pre">LanceScanner.head()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.projected_schema"><code class="docutils literal notranslate"><span class="pre">LanceScanner.projected_schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.scan_batches"><code class="docutils literal notranslate"><span class="pre">LanceScanner.scan_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.take"><code class="docutils literal notranslate"><span class="pre">LanceScanner.take()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.to_batches"><code class="docutils literal notranslate"><span class="pre">LanceScanner.to_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.to_reader"><code class="docutils literal notranslate"><span class="pre">LanceScanner.to_reader()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.LanceScanner.to_table"><code class="docutils literal notranslate"><span class="pre">LanceScanner.to_table()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.MergeInsertBuilder"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.MergeInsertBuilder.conflict_retries"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.conflict_retries()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.MergeInsertBuilder.execute"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.execute()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.MergeInsertBuilder.execute_uncommitted"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.execute_uncommitted()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.MergeInsertBuilder.retry_timeout"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.retry_timeout()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.MergeInsertBuilder.when_matched_update_all"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.when_matched_update_all()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.MergeInsertBuilder.when_not_matched_by_source_delete"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.when_not_matched_by_source_delete()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.MergeInsertBuilder.when_not_matched_insert_all"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.when_not_matched_insert_all()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.ScanStatistics"><code class="docutils literal notranslate"><span class="pre">ScanStatistics</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.ScanStatistics.bytes_read"><code class="docutils literal notranslate"><span class="pre">ScanStatistics.bytes_read</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.ScanStatistics.indices_loaded"><code class="docutils literal notranslate"><span class="pre">ScanStatistics.indices_loaded</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.ScanStatistics.iops"><code class="docutils literal notranslate"><span class="pre">ScanStatistics.iops</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.ScanStatistics.parts_loaded"><code class="docutils literal notranslate"><span class="pre">ScanStatistics.parts_loaded</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.Transaction"><code class="docutils literal notranslate"><span class="pre">Transaction</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.Transaction.blobs_op"><code class="docutils literal notranslate"><span class="pre">Transaction.blobs_op</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.Transaction.operation"><code class="docutils literal notranslate"><span class="pre">Transaction.operation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.Transaction.read_version"><code class="docutils literal notranslate"><span class="pre">Transaction.read_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.Transaction.uuid"><code class="docutils literal notranslate"><span class="pre">Transaction.uuid</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.batch_udf"><code class="docutils literal notranslate"><span class="pre">batch_udf()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.bytes_read_counter"><code class="docutils literal notranslate"><span class="pre">bytes_read_counter()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset"><code class="docutils literal notranslate"><span class="pre">dataset()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.iops_counter"><code class="docutils literal notranslate"><span class="pre">iops_counter()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.json_to_schema"><code class="docutils literal notranslate"><span class="pre">json_to_schema()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.schema_to_json"><code class="docutils literal notranslate"><span class="pre">schema_to_json()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.set_logger"><code class="docutils literal notranslate"><span class="pre">set_logger()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.write_dataset"><code class="docutils literal notranslate"><span class="pre">write_dataset()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.AlterColumn"><code class="docutils literal notranslate"><span class="pre">AlterColumn</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.AlterColumn.data_type"><code class="docutils literal notranslate"><span class="pre">AlterColumn.data_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.AlterColumn.name"><code class="docutils literal notranslate"><span class="pre">AlterColumn.name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.AlterColumn.nullable"><code class="docutils literal notranslate"><span class="pre">AlterColumn.nullable</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.AlterColumn.path"><code class="docutils literal notranslate"><span class="pre">AlterColumn.path</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.AutoCleanupConfig"><code class="docutils literal notranslate"><span class="pre">AutoCleanupConfig</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.AutoCleanupConfig.interval"><code class="docutils literal notranslate"><span class="pre">AutoCleanupConfig.interval</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.AutoCleanupConfig.older_than_seconds"><code class="docutils literal notranslate"><span class="pre">AutoCleanupConfig.older_than_seconds</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.BulkCommitResult"><code class="docutils literal notranslate"><span class="pre">BulkCommitResult</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.BulkCommitResult.dataset"><code class="docutils literal notranslate"><span class="pre">BulkCommitResult.dataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.BulkCommitResult.merged"><code class="docutils literal notranslate"><span class="pre">BulkCommitResult.merged</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.DataStatistics"><code class="docutils literal notranslate"><span class="pre">DataStatistics</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.DataStatistics.fields"><code class="docutils literal notranslate"><span class="pre">DataStatistics.fields</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.DatasetOptimizer"><code class="docutils literal notranslate"><span class="pre">DatasetOptimizer</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.DatasetOptimizer.compact_files"><code class="docutils literal notranslate"><span class="pre">DatasetOptimizer.compact_files()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.DatasetOptimizer.disable_auto_cleanup"><code class="docutils literal notranslate"><span class="pre">DatasetOptimizer.disable_auto_cleanup()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.DatasetOptimizer.enable_auto_cleanup"><code class="docutils literal notranslate"><span class="pre">DatasetOptimizer.enable_auto_cleanup()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.DatasetOptimizer.optimize_indices"><code class="docutils literal notranslate"><span class="pre">DatasetOptimizer.optimize_indices()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.DatasetStats"><code class="docutils literal notranslate"><span class="pre">DatasetStats</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.DatasetStats.num_deleted_rows"><code class="docutils literal notranslate"><span class="pre">DatasetStats.num_deleted_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.DatasetStats.num_fragments"><code class="docutils literal notranslate"><span class="pre">DatasetStats.num_fragments</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.DatasetStats.num_small_files"><code class="docutils literal notranslate"><span class="pre">DatasetStats.num_small_files</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.ExecuteResult"><code class="docutils literal notranslate"><span class="pre">ExecuteResult</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ExecuteResult.num_deleted_rows"><code class="docutils literal notranslate"><span class="pre">ExecuteResult.num_deleted_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ExecuteResult.num_inserted_rows"><code class="docutils literal notranslate"><span class="pre">ExecuteResult.num_inserted_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ExecuteResult.num_updated_rows"><code class="docutils literal notranslate"><span class="pre">ExecuteResult.num_updated_rows</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.FieldStatistics"><code class="docutils literal notranslate"><span class="pre">FieldStatistics</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.FieldStatistics.bytes_on_disk"><code class="docutils literal notranslate"><span class="pre">FieldStatistics.bytes_on_disk</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.FieldStatistics.id"><code class="docutils literal notranslate"><span class="pre">FieldStatistics.id</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.Index"><code class="docutils literal notranslate"><span class="pre">Index</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Index.fields"><code class="docutils literal notranslate"><span class="pre">Index.fields</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Index.fragment_ids"><code class="docutils literal notranslate"><span class="pre">Index.fragment_ids</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Index.name"><code class="docutils literal notranslate"><span class="pre">Index.name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Index.type"><code class="docutils literal notranslate"><span class="pre">Index.type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Index.uuid"><code class="docutils literal notranslate"><span class="pre">Index.uuid</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Index.version"><code class="docutils literal notranslate"><span class="pre">Index.version</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.LanceDataset"><code class="docutils literal notranslate"><span class="pre">LanceDataset</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.add_columns"><code class="docutils literal notranslate"><span class="pre">LanceDataset.add_columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.alter_columns"><code class="docutils literal notranslate"><span class="pre">LanceDataset.alter_columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.checkout_version"><code class="docutils literal notranslate"><span class="pre">LanceDataset.checkout_version()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.cleanup_old_versions"><code class="docutils literal notranslate"><span class="pre">LanceDataset.cleanup_old_versions()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.commit"><code class="docutils literal notranslate"><span class="pre">LanceDataset.commit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.commit_batch"><code class="docutils literal notranslate"><span class="pre">LanceDataset.commit_batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.config"><code class="docutils literal notranslate"><span class="pre">LanceDataset.config()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.count_rows"><code class="docutils literal notranslate"><span class="pre">LanceDataset.count_rows()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.create_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.create_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.create_scalar_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.create_scalar_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.data_storage_version"><code class="docutils literal notranslate"><span class="pre">LanceDataset.data_storage_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.delete"><code class="docutils literal notranslate"><span class="pre">LanceDataset.delete()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.delete_config_keys"><code class="docutils literal notranslate"><span class="pre">LanceDataset.delete_config_keys()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.drop"><code class="docutils literal notranslate"><span class="pre">LanceDataset.drop()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.drop_columns"><code class="docutils literal notranslate"><span class="pre">LanceDataset.drop_columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.drop_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.drop_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.get_fragment"><code class="docutils literal notranslate"><span class="pre">LanceDataset.get_fragment()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.get_fragments"><code class="docutils literal notranslate"><span class="pre">LanceDataset.get_fragments()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.has_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.has_index</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.head"><code class="docutils literal notranslate"><span class="pre">LanceDataset.head()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.index_statistics"><code class="docutils literal notranslate"><span class="pre">LanceDataset.index_statistics()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.insert"><code class="docutils literal notranslate"><span class="pre">LanceDataset.insert()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.join"><code class="docutils literal notranslate"><span class="pre">LanceDataset.join()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.lance_schema"><code class="docutils literal notranslate"><span class="pre">LanceDataset.lance_schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.latest_version"><code class="docutils literal notranslate"><span class="pre">LanceDataset.latest_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.list_indices"><code class="docutils literal notranslate"><span class="pre">LanceDataset.list_indices()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.max_field_id"><code class="docutils literal notranslate"><span class="pre">LanceDataset.max_field_id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.merge"><code class="docutils literal notranslate"><span class="pre">LanceDataset.merge()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.merge_insert"><code class="docutils literal notranslate"><span class="pre">LanceDataset.merge_insert()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.migrate_manifest_paths_v2"><code class="docutils literal notranslate"><span class="pre">LanceDataset.migrate_manifest_paths_v2()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.optimize"><code class="docutils literal notranslate"><span class="pre">LanceDataset.optimize</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.partition_expression"><code class="docutils literal notranslate"><span class="pre">LanceDataset.partition_expression</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.prewarm_index"><code class="docutils literal notranslate"><span class="pre">LanceDataset.prewarm_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.replace_field_metadata"><code class="docutils literal notranslate"><span class="pre">LanceDataset.replace_field_metadata()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.replace_schema"><code class="docutils literal notranslate"><span class="pre">LanceDataset.replace_schema()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.replace_schema_metadata"><code class="docutils literal notranslate"><span class="pre">LanceDataset.replace_schema_metadata()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.restore"><code class="docutils literal notranslate"><span class="pre">LanceDataset.restore()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.sample"><code class="docutils literal notranslate"><span class="pre">LanceDataset.sample()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.scanner"><code class="docutils literal notranslate"><span class="pre">LanceDataset.scanner()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.schema"><code class="docutils literal notranslate"><span class="pre">LanceDataset.schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.session"><code class="docutils literal notranslate"><span class="pre">LanceDataset.session()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.stats"><code class="docutils literal notranslate"><span class="pre">LanceDataset.stats</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.tags"><code class="docutils literal notranslate"><span class="pre">LanceDataset.tags</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.take"><code class="docutils literal notranslate"><span class="pre">LanceDataset.take()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.take_blobs"><code class="docutils literal notranslate"><span class="pre">LanceDataset.take_blobs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.to_batches"><code class="docutils literal notranslate"><span class="pre">LanceDataset.to_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.to_table"><code class="docutils literal notranslate"><span class="pre">LanceDataset.to_table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.update"><code class="docutils literal notranslate"><span class="pre">LanceDataset.update()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.update_config"><code class="docutils literal notranslate"><span class="pre">LanceDataset.update_config()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.uri"><code class="docutils literal notranslate"><span class="pre">LanceDataset.uri</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.validate"><code class="docutils literal notranslate"><span class="pre">LanceDataset.validate()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.version"><code class="docutils literal notranslate"><span class="pre">LanceDataset.version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceDataset.versions"><code class="docutils literal notranslate"><span class="pre">LanceDataset.versions()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.LanceOperation"><code class="docutils literal notranslate"><span class="pre">LanceOperation</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.Append"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Append</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Append.fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Append.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id34"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Append.fragments</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.BaseOperation"><code class="docutils literal notranslate"><span class="pre">LanceOperation.BaseOperation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.CreateIndex"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.CreateIndex.created_at"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.created_at</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.CreateIndex.dataset_version"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.dataset_version</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.CreateIndex.fields"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.fields</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.CreateIndex.fragment_ids"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.CreateIndex.index_version"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.index_version</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.CreateIndex.name"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.name</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.CreateIndex.uuid"><code class="docutils literal notranslate"><span class="pre">LanceOperation.CreateIndex.uuid</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.DataReplacement"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacement</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.DataReplacement.replacements"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacement.replacements</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.DataReplacementGroup"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacementGroup</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.DataReplacementGroup.fragment_id"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacementGroup.fragment_id</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.DataReplacementGroup.new_file"><code class="docutils literal notranslate"><span class="pre">LanceOperation.DataReplacementGroup.new_file</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.Delete"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Delete.updated_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.updated_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Delete.deleted_fragment_ids"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.deleted_fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Delete.predicate"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.predicate</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id35"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.deleted_fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id36"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.predicate</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id37"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Delete.updated_fragments</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.Merge"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Merge.fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Merge.schema"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge.schema</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id38"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id39"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Merge.schema</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.Overwrite"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Overwrite.new_schema"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite.new_schema</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Overwrite.fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id40"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite.fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id41"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Overwrite.new_schema</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.Project"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Project</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Project.schema"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Project.schema</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id42"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Project.schema</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.Restore"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Restore</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Restore.version"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Restore.version</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.Rewrite"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Rewrite.groups"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite.groups</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Rewrite.rewritten_indices"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite.rewritten_indices</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id43"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite.groups</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id44"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Rewrite.rewritten_indices</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.RewriteGroup"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewriteGroup</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.RewriteGroup.new_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewriteGroup.new_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.RewriteGroup.old_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewriteGroup.old_fragments</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.RewrittenIndex"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewrittenIndex</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.RewrittenIndex.new_id"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewrittenIndex.new_id</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.RewrittenIndex.old_id"><code class="docutils literal notranslate"><span class="pre">LanceOperation.RewrittenIndex.old_id</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceOperation.Update"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Update.removed_fragment_ids"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.removed_fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Update.updated_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.updated_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Update.new_fragments"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.new_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lance.dataset.LanceOperation.Update.fields_modified"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.fields_modified</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id45"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.fields_modified</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id46"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.new_fragments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id47"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.removed_fragment_ids</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id48"><code class="docutils literal notranslate"><span class="pre">LanceOperation.Update.updated_fragments</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.LanceScanner"><code class="docutils literal notranslate"><span class="pre">LanceScanner</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.analyze_plan"><code class="docutils literal notranslate"><span class="pre">LanceScanner.analyze_plan()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.count_rows"><code class="docutils literal notranslate"><span class="pre">LanceScanner.count_rows()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.dataset_schema"><code class="docutils literal notranslate"><span class="pre">LanceScanner.dataset_schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.explain_plan"><code class="docutils literal notranslate"><span class="pre">LanceScanner.explain_plan()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.from_batches"><code class="docutils literal notranslate"><span class="pre">LanceScanner.from_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.from_dataset"><code class="docutils literal notranslate"><span class="pre">LanceScanner.from_dataset()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.from_fragment"><code class="docutils literal notranslate"><span class="pre">LanceScanner.from_fragment()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.head"><code class="docutils literal notranslate"><span class="pre">LanceScanner.head()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.projected_schema"><code class="docutils literal notranslate"><span class="pre">LanceScanner.projected_schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.scan_batches"><code class="docutils literal notranslate"><span class="pre">LanceScanner.scan_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.take"><code class="docutils literal notranslate"><span class="pre">LanceScanner.take()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.to_batches"><code class="docutils literal notranslate"><span class="pre">LanceScanner.to_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.to_reader"><code class="docutils literal notranslate"><span class="pre">LanceScanner.to_reader()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceScanner.to_table"><code class="docutils literal notranslate"><span class="pre">LanceScanner.to_table()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.LanceStats"><code class="docutils literal notranslate"><span class="pre">LanceStats</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceStats.data_stats"><code class="docutils literal notranslate"><span class="pre">LanceStats.data_stats()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceStats.dataset_stats"><code class="docutils literal notranslate"><span class="pre">LanceStats.dataset_stats()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.LanceStats.index_stats"><code class="docutils literal notranslate"><span class="pre">LanceStats.index_stats()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder.conflict_retries"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.conflict_retries()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder.execute"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.execute()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder.execute_uncommitted"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.execute_uncommitted()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder.retry_timeout"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.retry_timeout()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder.when_matched_update_all"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.when_matched_update_all()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder.when_not_matched_by_source_delete"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.when_not_matched_by_source_delete()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder.when_not_matched_insert_all"><code class="docutils literal notranslate"><span class="pre">MergeInsertBuilder.when_not_matched_insert_all()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.ScannerBuilder"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.apply_defaults"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.apply_defaults()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.batch_readahead"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.batch_readahead()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.batch_size"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.batch_size()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.columns"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.fast_search"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.fast_search()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.filter"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.filter()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.fragment_readahead"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.fragment_readahead()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.full_text_search"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.full_text_search()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.include_deleted_rows"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.include_deleted_rows()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.io_buffer_size"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.io_buffer_size()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.late_materialization"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.late_materialization()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.limit"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.limit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.nearest"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.nearest()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.offset"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.offset()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.prefilter"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.prefilter()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.scan_in_order"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.scan_in_order()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.scan_stats_callback"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.scan_stats_callback()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.strict_batch_size"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.strict_batch_size()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.to_scanner"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.to_scanner()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.use_scalar_index"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.use_scalar_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.use_stats"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.use_stats()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.with_fragments"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.with_fragments()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.with_row_address"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.with_row_address()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.ScannerBuilder.with_row_id"><code class="docutils literal notranslate"><span class="pre">ScannerBuilder.with_row_id()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.Tag"><code class="docutils literal notranslate"><span class="pre">Tag</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Tag.manifest_size"><code class="docutils literal notranslate"><span class="pre">Tag.manifest_size</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Tag.version"><code class="docutils literal notranslate"><span class="pre">Tag.version</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.Tags"><code class="docutils literal notranslate"><span class="pre">Tags</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Tags.create"><code class="docutils literal notranslate"><span class="pre">Tags.create()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Tags.delete"><code class="docutils literal notranslate"><span class="pre">Tags.delete()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Tags.get_version"><code class="docutils literal notranslate"><span class="pre">Tags.get_version()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Tags.list"><code class="docutils literal notranslate"><span class="pre">Tags.list()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Tags.list_ordered"><code class="docutils literal notranslate"><span class="pre">Tags.list_ordered()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Tags.update"><code class="docutils literal notranslate"><span class="pre">Tags.update()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.Transaction"><code class="docutils literal notranslate"><span class="pre">Transaction</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Transaction.blobs_op"><code class="docutils literal notranslate"><span class="pre">Transaction.blobs_op</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Transaction.operation"><code class="docutils literal notranslate"><span class="pre">Transaction.operation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Transaction.read_version"><code class="docutils literal notranslate"><span class="pre">Transaction.read_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Transaction.uuid"><code class="docutils literal notranslate"><span class="pre">Transaction.uuid</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.UpdateResult"><code class="docutils literal notranslate"><span class="pre">UpdateResult</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.UpdateResult.num_rows_updated"><code class="docutils literal notranslate"><span class="pre">UpdateResult.num_rows_updated</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.VectorIndexReader"><code class="docutils literal notranslate"><span class="pre">VectorIndexReader</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.VectorIndexReader.centroids"><code class="docutils literal notranslate"><span class="pre">VectorIndexReader.centroids()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.VectorIndexReader.num_partitions"><code class="docutils literal notranslate"><span class="pre">VectorIndexReader.num_partitions()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.VectorIndexReader.read_partition"><code class="docutils literal notranslate"><span class="pre">VectorIndexReader.read_partition()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.Version"><code class="docutils literal notranslate"><span class="pre">Version</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Version.metadata"><code class="docutils literal notranslate"><span class="pre">Version.metadata</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Version.timestamp"><code class="docutils literal notranslate"><span class="pre">Version.timestamp</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.dataset.Version.version"><code class="docutils literal notranslate"><span class="pre">Version.version</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.dataset.write_dataset"><code class="docutils literal notranslate"><span class="pre">write_dataset()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lance.fragment.DataFile"><code class="docutils literal notranslate"><span class="pre">DataFile</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DataFile.path"><code class="docutils literal notranslate"><span class="pre">DataFile.path</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DataFile.fields"><code class="docutils literal notranslate"><span class="pre">DataFile.fields</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DataFile.column_indices"><code class="docutils literal notranslate"><span class="pre">DataFile.column_indices</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DataFile.file_major_version"><code class="docutils literal notranslate"><span class="pre">DataFile.file_major_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DataFile.file_minor_version"><code class="docutils literal notranslate"><span class="pre">DataFile.file_minor_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DataFile.file_size_bytes"><code class="docutils literal notranslate"><span class="pre">DataFile.file_size_bytes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id49"><code class="docutils literal notranslate"><span class="pre">DataFile.column_indices</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DataFile.field_ids"><code class="docutils literal notranslate"><span class="pre">DataFile.field_ids()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id50"><code class="docutils literal notranslate"><span class="pre">DataFile.fields</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id51"><code class="docutils literal notranslate"><span class="pre">DataFile.file_major_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id52"><code class="docutils literal notranslate"><span class="pre">DataFile.file_minor_version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id53"><code class="docutils literal notranslate"><span class="pre">DataFile.file_size_bytes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id54"><code class="docutils literal notranslate"><span class="pre">DataFile.path</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.fragment.DeletionFile"><code class="docutils literal notranslate"><span class="pre">DeletionFile</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DeletionFile.asdict"><code class="docutils literal notranslate"><span class="pre">DeletionFile.asdict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DeletionFile.file_type"><code class="docutils literal notranslate"><span class="pre">DeletionFile.file_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DeletionFile.from_json"><code class="docutils literal notranslate"><span class="pre">DeletionFile.from_json()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DeletionFile.id"><code class="docutils literal notranslate"><span class="pre">DeletionFile.id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DeletionFile.json"><code class="docutils literal notranslate"><span class="pre">DeletionFile.json()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DeletionFile.num_deleted_rows"><code class="docutils literal notranslate"><span class="pre">DeletionFile.num_deleted_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DeletionFile.path"><code class="docutils literal notranslate"><span class="pre">DeletionFile.path()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.DeletionFile.read_version"><code class="docutils literal notranslate"><span class="pre">DeletionFile.read_version</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.fragment.FragmentMetadata"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.id"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.files"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.files</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.physical_rows"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.physical_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.deletion_file"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.deletion_file</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.row_id_meta"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.row_id_meta</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.data_files"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.data_files()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id55"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.deletion_file</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id56"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.files</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.from_json"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.from_json()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id57"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.num_deletions"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.num_deletions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.num_rows"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.num_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id58"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.physical_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id59"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.row_id_meta</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.FragmentMetadata.to_json"><code class="docutils literal notranslate"><span class="pre">FragmentMetadata.to_json()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.fragment.LanceFragment"><code class="docutils literal notranslate"><span class="pre">LanceFragment</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.count_rows"><code class="docutils literal notranslate"><span class="pre">LanceFragment.count_rows()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.create"><code class="docutils literal notranslate"><span class="pre">LanceFragment.create()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.create_from_file"><code class="docutils literal notranslate"><span class="pre">LanceFragment.create_from_file()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.data_files"><code class="docutils literal notranslate"><span class="pre">LanceFragment.data_files()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.delete"><code class="docutils literal notranslate"><span class="pre">LanceFragment.delete()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.deletion_file"><code class="docutils literal notranslate"><span class="pre">LanceFragment.deletion_file()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.fragment_id"><code class="docutils literal notranslate"><span class="pre">LanceFragment.fragment_id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.head"><code class="docutils literal notranslate"><span class="pre">LanceFragment.head()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.merge"><code class="docutils literal notranslate"><span class="pre">LanceFragment.merge()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.merge_columns"><code class="docutils literal notranslate"><span class="pre">LanceFragment.merge_columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.metadata"><code class="docutils literal notranslate"><span class="pre">LanceFragment.metadata</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.num_deletions"><code class="docutils literal notranslate"><span class="pre">LanceFragment.num_deletions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.partition_expression"><code class="docutils literal notranslate"><span class="pre">LanceFragment.partition_expression</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.physical_rows"><code class="docutils literal notranslate"><span class="pre">LanceFragment.physical_rows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.physical_schema"><code class="docutils literal notranslate"><span class="pre">LanceFragment.physical_schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.scanner"><code class="docutils literal notranslate"><span class="pre">LanceFragment.scanner()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.schema"><code class="docutils literal notranslate"><span class="pre">LanceFragment.schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.take"><code class="docutils literal notranslate"><span class="pre">LanceFragment.take()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.to_batches"><code class="docutils literal notranslate"><span class="pre">LanceFragment.to_batches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.LanceFragment.to_table"><code class="docutils literal notranslate"><span class="pre">LanceFragment.to_table()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.fragment.RowIdMeta"><code class="docutils literal notranslate"><span class="pre">RowIdMeta</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.RowIdMeta.asdict"><code class="docutils literal notranslate"><span class="pre">RowIdMeta.asdict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.RowIdMeta.from_json"><code class="docutils literal notranslate"><span class="pre">RowIdMeta.from_json()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lance.fragment.RowIdMeta.json"><code class="docutils literal notranslate"><span class="pre">RowIdMeta.json()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lance.fragment.write_fragments"><code class="docutils literal notranslate"><span class="pre">write_fragments()</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pylance</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">All Modules</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/all-modules.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-lance">
<span id="all-modules"></span><h1>All Modules<a class="headerlink" href="#module-lance" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="lance.BlobColumn">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">BlobColumn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blob_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Array.html#pyarrow.Array" title="(in Apache Arrow v20.0.0)"><span class="pre">Array</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.ChunkedArray.html#pyarrow.ChunkedArray" title="(in Apache Arrow v20.0.0)"><span class="pre">ChunkedArray</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.BlobColumn" title="Link to this definition"></a></dt>
<dd><p>A utility to wrap a Pyarrow binary column and iterate over the rows as
file-like objects.</p>
<p>This can be useful for working with medium-to-small binary objects that need
to interface with APIs that expect file-like objects.  For very large binary
objects (4-8MB or more per value) you might be better off creating a blob column
and using <code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.Dataset.take_blobs()</span></code> to access the blob data.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.BlobFile">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">BlobFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LanceBlobFile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.BlobFile" title="Link to this definition"></a></dt>
<dd><p>Represents a blob in a Lance dataset as a file-like object.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lance.BlobFile.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.BlobFile.close" title="Link to this definition"></a></dt>
<dd><p>Flush and close the IO object.</p>
<p>This method has no effect if the file is already closed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.BlobFile.closed">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">closed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#lance.BlobFile.closed" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.BlobFile.readable">
<span class="sig-name descname"><span class="pre">readable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#lance.BlobFile.readable" title="Link to this definition"></a></dt>
<dd><p>Return whether object was opened for reading.</p>
<p>If False, read() will raise OSError.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.BlobFile.readall">
<span class="sig-name descname"><span class="pre">readall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></span><a class="headerlink" href="#lance.BlobFile.readall" title="Link to this definition"></a></dt>
<dd><p>Read until EOF, using multiple read() call.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.BlobFile.readinto">
<span class="sig-name descname"><span class="pre">readinto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.13)"><span class="pre">bytearray</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#lance.BlobFile.readinto" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.BlobFile.seek">
<span class="sig-name descname"><span class="pre">seek</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">whence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#lance.BlobFile.seek" title="Link to this definition"></a></dt>
<dd><p>Change the stream position to the given byte offset.</p>
<blockquote>
<div><dl class="simple">
<dt>offset</dt><dd><p>The stream position, relative to whence.</p>
</dd>
<dt>whence</dt><dd><p>The relative position to seek from.</p>
</dd>
</dl>
</div></blockquote>
<p>The offset is interpreted relative to the position indicated by whence.
Values for whence are:</p>
<ul class="simple">
<li><p>os.SEEK_SET or 0  start of stream (the default); offset should be zero or positive</p></li>
<li><p>os.SEEK_CUR or 1  current stream position; offset may be negative</p></li>
<li><p>os.SEEK_END or 2  end of stream; offset is usually negative</p></li>
</ul>
<p>Return the new absolute position.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.BlobFile.seekable">
<span class="sig-name descname"><span class="pre">seekable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#lance.BlobFile.seekable" title="Link to this definition"></a></dt>
<dd><p>Return whether object supports random access.</p>
<p>If False, seek(), tell() and truncate() will raise OSError.
This method may need to do a test seek().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.BlobFile.size">
<span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#lance.BlobFile.size" title="Link to this definition"></a></dt>
<dd><p>Returns the size of the blob in bytes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.BlobFile.tell">
<span class="sig-name descname"><span class="pre">tell</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#lance.BlobFile.tell" title="Link to this definition"></a></dt>
<dd><p>Return current stream position.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.DataStatistics">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">DataStatistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.FieldStatistics" title="lance.dataset.FieldStatistics"><span class="pre">FieldStatistics</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.DataStatistics" title="Link to this definition"></a></dt>
<dd><p>Statistics about the data in the dataset</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.DataStatistics.fields">
<span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.FieldStatistics" title="lance.dataset.FieldStatistics"><span class="pre">FieldStatistics</span></a></em><a class="headerlink" href="#lance.DataStatistics.fields" title="Link to this definition"></a></dt>
<dd><p>Statistics about the fields in the dataset</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.FFILanceTableProvider">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">FFILanceTableProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_addr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.FFILanceTableProvider" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.FieldStatistics">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">FieldStatistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_on_disk</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.FieldStatistics" title="Link to this definition"></a></dt>
<dd><p>Statistics about a field in the dataset</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.FieldStatistics.bytes_on_disk">
<span class="sig-name descname"><span class="pre">bytes_on_disk</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.FieldStatistics.bytes_on_disk" title="Link to this definition"></a></dt>
<dd><p>(possibly compressed) bytes on disk used to store the field</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.FieldStatistics.id">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.FieldStatistics.id" title="Link to this definition"></a></dt>
<dd><p>id of the field</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.FragmentMetadata">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">FragmentMetadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">physical_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">deletion_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.fragment.DeletionFile" title="lance.fragment.DeletionFile"><span class="pre">DeletionFile</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_id_meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.fragment.RowIdMeta" title="lance.fragment.RowIdMeta"><span class="pre">RowIdMeta</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.FragmentMetadata" title="Link to this definition"></a></dt>
<dd><p>Metadata for a fragment.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.FragmentMetadata.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#lance.FragmentMetadata.id" title="Link to this definition"></a></dt>
<dd><p>The ID of the fragment.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.FragmentMetadata.files">
<span class="sig-name descname"><span class="pre">files</span></span><a class="headerlink" href="#lance.FragmentMetadata.files" title="Link to this definition"></a></dt>
<dd><p>The data files of the fragment. Each data file must have the same number
of rows. Each file stores a different subset of the columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile">DataFile</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.FragmentMetadata.physical_rows">
<span class="sig-name descname"><span class="pre">physical_rows</span></span><a class="headerlink" href="#lance.FragmentMetadata.physical_rows" title="Link to this definition"></a></dt>
<dd><p>The number of rows originally in this fragment. This is the number of rows
in the data files before deletions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.FragmentMetadata.deletion_file">
<span class="sig-name descname"><span class="pre">deletion_file</span></span><a class="headerlink" href="#lance.FragmentMetadata.deletion_file" title="Link to this definition"></a></dt>
<dd><p>The deletion file, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#lance.fragment.DeletionFile" title="lance.fragment.DeletionFile">DeletionFile</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.FragmentMetadata.row_id_meta">
<span class="sig-name descname"><span class="pre">row_id_meta</span></span><a class="headerlink" href="#lance.FragmentMetadata.row_id_meta" title="Link to this definition"></a></dt>
<dd><p>The row id metadata, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#lance.fragment.RowIdMeta" title="lance.fragment.RowIdMeta">RowIdMeta</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.FragmentMetadata.data_files">
<span class="sig-name descname"><span class="pre">data_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.FragmentMetadata.data_files" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">deletion_file</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.fragment.DeletionFile" title="lance.fragment.DeletionFile"><span class="pre">DeletionFile</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id0" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">files</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id1" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.FragmentMetadata.from_json">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a></span></span><a class="headerlink" href="#lance.FragmentMetadata.from_json" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#id2" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.FragmentMetadata.num_deletions">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_deletions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.FragmentMetadata.num_deletions" title="Link to this definition"></a></dt>
<dd><p>The number of rows that have been deleted from this fragment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.FragmentMetadata.num_rows">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.FragmentMetadata.num_rows" title="Link to this definition"></a></dt>
<dd><p>The number of rows in this fragment after deletions.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id3">
<span class="sig-name descname"><span class="pre">physical_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#id3" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id4">
<span class="sig-name descname"><span class="pre">row_id_meta</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.fragment.RowIdMeta" title="lance.fragment.RowIdMeta"><span class="pre">RowIdMeta</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id4" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.FragmentMetadata.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a></span></span><a class="headerlink" href="#lance.FragmentMetadata.to_json" title="Link to this definition"></a></dt>
<dd><p>Get this as a simple JSON-serializable dictionary.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceDataset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">LanceDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_cache_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_cache_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_lock</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommitLock</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serialized_manifest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_scan_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_cache_size_bytes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset" title="Link to this definition"></a></dt>
<dd><p>A Lance Dataset in Lance format where the data is stored at the given uri.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.add_columns">
<span class="sig-name descname"><span class="pre">add_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transforms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BatchUDF</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ReaderLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Field.html#pyarrow.Field" title="(in Apache Arrow v20.0.0)"><span class="pre">pyarrow.Field</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Field.html#pyarrow.Field" title="(in Apache Arrow v20.0.0)"><span class="pre">pyarrow.Field</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">pyarrow.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reader_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.add_columns" title="Link to this definition"></a></dt>
<dd><p>Add new columns with defined values.</p>
<p>There are several ways to specify the new columns. First, you can provide
SQL expressions for each new column. Second you can provide a UDF that
takes a batch of existing data and returns a new batch with the new
columns. These new columns will be appended to the dataset.</p>
<p>You can also provide a RecordBatchReader which will read the new column
values from some external source.  This is often useful when the new column
values have already been staged to files (often by some distributed process)</p>
<p>See the <code class="xref py py-func docutils literal notranslate"><span class="pre">lance.add_columns_udf()</span></code> decorator for more information on
writing UDFs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transforms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> or </em><em>AddColumnsUDF</em><em> or </em><em>ReaderLike</em>)  If this is a dictionary, then the keys are the names of the new
columns and the values are SQL expression strings. These strings can
reference existing columns in the dataset.
If this is a AddColumnsUDF, then it is a UDF that takes a batch of
existing data and returns a new batch with the new columns.
If this is <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Field.html#pyarrow.Field" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.Field</span></code></a> or <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.Schema</span></code></a>, it adds
all NULL columns with the given schema, in a metadata-only operation.</p></li>
<li><p><strong>read_columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  <p>The names of the columns that the UDF will read. If None, then the
UDF will read all columns. This is only used when transforms is a
UDF. Otherwise, the read columns are inferred from the SQL expressions.</p>
<p>This can include _rowid or _rowaddr to read the row id or row address
from the dataset.</p>
</p></li>
<li><p><strong>reader_schema</strong> (<em>pa.Schema</em><em>, </em><em>optional</em>)  Only valid if transforms is a <cite>ReaderLike</cite> object.  This will be used to
determine the schema of the reader.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of rows to read at a time from the source dataset when applying
the transform.  This is ignored if the dataset is a v1 dataset.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;my_dataset&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@lance</span><span class="o">.</span><span class="n">batch_udf</span><span class="p">()</span>
<span class="gp">... </span><span class="k">def</span><span class="w"> </span><span class="nf">double_a</span><span class="p">(</span><span class="n">batch</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">df</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;double_a&#39;</span><span class="p">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">add_columns</span><span class="p">(</span><span class="n">double_a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  double_a</span>
<span class="go">0  1         2</span>
<span class="go">1  2         4</span>
<span class="go">2  3         6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">add_columns</span><span class="p">({</span><span class="s2">&quot;triple_a&quot;</span><span class="p">:</span> <span class="s2">&quot;a * 3&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  double_a  triple_a</span>
<span class="go">0  1         2         3</span>
<span class="go">1  2         4         6</span>
<span class="go">2  3         6         9</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.LanceDataset.merge" title="lance.LanceDataset.merge"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LanceDataset.merge</span></code></a></dt><dd><p>Merge a pre-computed set of columns into the dataset.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.alter_columns">
<span class="sig-name descname"><span class="pre">alter_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">alterations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.AlterColumn" title="lance.dataset.AlterColumn"><span class="pre">AlterColumn</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.alter_columns" title="Link to this definition"></a></dt>
<dd><p>Alter column name, data type, and nullability.</p>
<p>Columns that are renamed can keep any indices that are on them. If a
column has an IVF_PQ index, it can be kept if the column is casted to
another type. However, other index types dont support casting at this
time.</p>
<p>Column types can be upcasted (such as int32 to int64) or downcasted
(such as int64 to int32). However, downcasting will fail if there are
any values that cannot be represented in the new type. In general,
columns can be casted to same general type: integers to integers,
floats to floats, and strings to strings. However, strings, binary, and
list columns can be casted between their size variants. For example,
string to large string, binary to large binary, and list to large list.</p>
<p>Columns that are renamed can keep any indices that are on them. However, if
the column is casted to a different type, its indices will be dropped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>alterations</strong> (<em>Iterable</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Any</em><em>]</em><em>]</em>)  <p>A sequence of dictionaries, each with the following keys:</p>
<ul class="simple">
<li><dl class="simple">
<dt>path: str</dt><dd><p>The column path to alter. For a top-level column, this is the name.
For a nested column, this is the dot-separated path, e.g. a.b.c.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>name: str, optional</dt><dd><p>The new name of the column. If not specified, the column name is
not changed.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nullable: bool, optional</dt><dd><p>Whether the column should be nullable. If not specified, the column
nullability is not changed. Only non-nullable columns can be changed
to nullable. Currently, you cannot change a nullable column to
non-nullable.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>data_type: pyarrow.DataType, optional</dt><dd><p>The new data type to cast the column to. If not specified, the column
data type is not changed.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">([</span><span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int64</span><span class="p">()),</span>
<span class="gp">... </span>                    <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">(),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">alter_columns</span><span class="p">({</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">},</span>
<span class="gp">... </span>                      <span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">alter_columns</span><span class="p">({</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;data_type&quot;</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">schema</span>
<span class="go">x: int32</span>
<span class="go">b: string</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.checkout_version">
<span class="sig-name descname"><span class="pre">checkout_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.checkout_version" title="Link to this definition"></a></dt>
<dd><p>Load the given version of the dataset.</p>
<p>Unlike the <a class="reference internal" href="#module-lance.dataset" title="lance.dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">dataset()</span></code></a> constructor, this will re-use the
current cache.
This is a no-op if the dataset is already at the given version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>version</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>,</em>)  The version to check out. A version number (<cite>int</cite>) or a tag
(<cite>str</cite>) can be provided.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset">LanceDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.cleanup_old_versions">
<span class="sig-name descname"><span class="pre">cleanup_old_versions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">older_than</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.13)"><span class="pre">timedelta</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_unverified</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_if_tagged_old_versions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CleanupStats</span></span></span><a class="headerlink" href="#lance.LanceDataset.cleanup_old_versions" title="Link to this definition"></a></dt>
<dd><p>Cleans up old versions of the dataset.</p>
<p>Some dataset changes, such as overwriting, leave behind data that is not
referenced by the latest dataset version.  The old data is left in place
to allow the dataset to be restored back to an older version.</p>
<p>This method will remove older versions and any data files they reference.
Once this cleanup task has run you will not be able to checkout or restore
these older versions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>older_than</strong> (<em>timedelta</em><em>, </em><em>optional</em>)  Only versions older than this will be removed.  If not specified, this
will default to two weeks.</p></li>
<li><p><strong>delete_unverified</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  <p>Files leftover from a failed transaction may appear to be part of an
in-progress operation (e.g. appending new data) and these files will
not be deleted unless they are at least 7 days old.  If delete_unverified
is True then these files will be deleted regardless of their age.</p>
<p>This should only be set to True if you can guarantee that no other process
is currently working on this dataset.  Otherwise the dataset could be put
into a corrupted state.</p>
</p></li>
<li><p><strong>error_if_tagged_old_versions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Some versions may have tags associated with them. Tagged versions will
not be cleaned up, regardless of how old they are. If this argument
is set to <cite>True</cite> (the default), an exception will be raised if any
tagged versions match the parameters. Otherwise, tagged versions will
be ignored without any error and only untagged versions will be
cleaned up.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.commit">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">operation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.LanceOperation.BaseOperation" title="lance.LanceOperation.BaseOperation"><span class="pre">LanceOperation.BaseOperation</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.Transaction" title="lance.Transaction"><span class="pre">Transaction</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">blobs_op</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.LanceOperation.BaseOperation" title="lance.LanceOperation.BaseOperation"><span class="pre">LanceOperation.BaseOperation</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_lock</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommitLock</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_v2_manifest_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detached</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.commit" title="Link to this definition"></a></dt>
<dd><p>Create a new version of dataset</p>
<p>This method is an advanced method which allows users to describe a change
that has been made to the data files.  This method is not needed when using
Lance to apply changes (e.g. when using <a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceDataset</span></code></a> or
<a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a>.)</p>
<p>Its current purpose is to allow for changes being made in a distributed
environment where no single process is doing all of the work.  For example,
a distributed bulk update or a distributed bulk modify operation.</p>
<p>Once all of the changes have been made, this method can be called to make
the changes visible by updating the dataset manifest.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API and doesnt provide the same level of validation
as the other APIs. For example, its the responsibility of the caller to
ensure that the fragments are valid for the schema.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_uri</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Path</em><em>, or </em><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><em>LanceDataset</em></a>)  The base uri of the dataset, or the dataset object itself. Using
the dataset object can be more efficient because it can re-use the
file metadata cache.</p></li>
<li><p><strong>operation</strong> (<a class="reference internal" href="#lance.LanceOperation.BaseOperation" title="lance.LanceOperation.BaseOperation"><em>BaseOperation</em></a>)  The operation to apply to the dataset.  This describes what changes
have been made. See available operations under <a class="reference internal" href="#lance.LanceOperation" title="lance.LanceOperation"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceOperation</span></code></a>.</p></li>
<li><p><strong>read_version</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The version of the dataset that was used as the base for the changes.
This is not needed for overwrite or restore operations.</p></li>
<li><p><strong>commit_lock</strong> (<em>CommitLock</em><em>, </em><em>optional</em>)  A custom commit lock.  Only needed if your object store does not support
atomic commits.  See the user guide for more details.</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>enable_v2_manifest_paths</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, and this is a new dataset, uses the new V2 manifest paths.
These paths provide more efficient opening of datasets with many
versions on object stores. This parameter has no effect if the dataset
already exists. To migrate an existing dataset, instead use the
<a class="reference internal" href="#lance.LanceDataset.migrate_manifest_paths_v2" title="lance.LanceDataset.migrate_manifest_paths_v2"><code class="xref py py-meth docutils literal notranslate"><span class="pre">migrate_manifest_paths_v2()</span></code></a> method. Default is False. WARNING:
turning this on will make the dataset unreadable for older versions
of Lance (prior to 0.17.0).</p></li>
<li><p><strong>detached</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, then the commit will not be part of the dataset lineage.  It will
never show up as the latest dataset and the only way to check it out in the
future will be to specifically check it out by version.  The version will be
a random version that is only unique amongst detached commits.  The caller
should store this somewhere as there will be no other way to obtain it in
the future.</p></li>
<li><p><strong>max_retries</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The maximum number of retries to perform when committing the dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new version of Lance Dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset">LanceDataset</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Creating a new dataset with the <a class="reference internal" href="#lance.LanceOperation.Overwrite" title="lance.LanceOperation.Overwrite"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceOperation.Overwrite</span></code></a> operation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab1</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab2</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment1</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment2</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragments</span> <span class="o">=</span> <span class="p">[</span><span class="n">fragment1</span><span class="p">,</span> <span class="n">fragment2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Overwrite</span><span class="p">(</span><span class="n">tab1</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="n">fragments</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.commit_batch">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">transactions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.Transaction" title="lance.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_lock</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommitLock</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_v2_manifest_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detached</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.BulkCommitResult" title="lance.dataset.BulkCommitResult"><span class="pre">BulkCommitResult</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.commit_batch" title="Link to this definition"></a></dt>
<dd><p>Create a new version of dataset with multiple transactions.</p>
<p>This method is an advanced method which allows users to describe a change
that has been made to the data files.  This method is not needed when using
Lance to apply changes (e.g. when using <a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceDataset</span></code></a> or
<a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a>.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Path</em><em>, or </em><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><em>LanceDataset</em></a>)  The base uri of the dataset, or the dataset object itself. Using
the dataset object can be more efficient because it can re-use the
file metadata cache.</p></li>
<li><p><strong>transactions</strong> (<em>Iterable</em><em>[</em><a class="reference internal" href="#lance.Transaction" title="lance.Transaction"><em>Transaction</em></a><em>]</em>)  The transactions to apply to the dataset. These will be merged into
a single transaction and applied to the dataset. Note: Only append
transactions are currently supported. Other transaction types will be
supported in the future.</p></li>
<li><p><strong>commit_lock</strong> (<em>CommitLock</em><em>, </em><em>optional</em>)  A custom commit lock.  Only needed if your object store does not support
atomic commits.  See the user guide for more details.</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>enable_v2_manifest_paths</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, and this is a new dataset, uses the new V2 manifest paths.
These paths provide more efficient opening of datasets with many
versions on object stores. This parameter has no effect if the dataset
already exists. To migrate an existing dataset, instead use the
<a class="reference internal" href="#lance.LanceDataset.migrate_manifest_paths_v2" title="lance.LanceDataset.migrate_manifest_paths_v2"><code class="xref py py-meth docutils literal notranslate"><span class="pre">migrate_manifest_paths_v2()</span></code></a> method. Default is False. WARNING:
turning this on will make the dataset unreadable for older versions
of Lance (prior to 0.17.0).</p></li>
<li><p><strong>detached</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, then the commit will not be part of the dataset lineage.  It will
never show up as the latest dataset and the only way to check it out in the
future will be to specifically check it out by version.  The version will be
a random version that is only unique amongst detached commits.  The caller
should store this somewhere as there will be no other way to obtain it in
the future.</p></li>
<li><p><strong>max_retries</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The maximum number of retries to perform when committing the dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>dataset: LanceDataset</dt><dd><p>A new version of Lance Dataset.</p>
</dd>
<dt>merged: Transaction</dt><dd><p>The merged transaction that was applied to the dataset.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict with keys</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.config">
<span class="sig-name descname"><span class="pre">config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.LanceDataset.config" title="Link to this definition"></a></dt>
<dd><p>Get configs of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of configuration items.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.count_rows">
<span class="sig-name descname"><span class="pre">count_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.count_rows" title="Link to this definition"></a></dt>
<dd><p>Count rows matching the scanner filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  See py:method:<cite>scanner</cite> method for full parameter description.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>count</strong>  The total number of rows in the dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.create_index">
<span class="sig-name descname"><span class="pre">create_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'L2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_partitions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ivf_centroids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.FixedSizeListArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.FixedShapeTensorArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pq_codebook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.FixedSizeListArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.FixedShapeTensorArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_sub_vectors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accelerator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="s"><span class="pre">'torch.Device'</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_cache_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle_partition_batches</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle_partition_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ivf_centroids_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precomputed_partition_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_nan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one_pass_ivfpq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.create_index" title="Link to this definition"></a></dt>
<dd><p>Create index on column.</p>
<p><strong>Experimental API</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The column to be indexed.</p></li>
<li><p><strong>index_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The type of the index.
<code class="docutils literal notranslate"><span class="pre">&quot;IVF_PQ,</span> <span class="pre">IVF_HNSW_PQ</span> <span class="pre">and</span> <span class="pre">IVF_HNSW_SQ&quot;</span></code> are supported now.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  The index name. If not provided, it will be generated from the
column name.</p></li>
<li><p><strong>metric</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The distance metric type, i.e., L2 (alias to euclidean), cosine
or dot (dot product). Default is L2.</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>)  Replace the existing index if it exists.</p></li>
<li><p><strong>num_partitions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of partitions of IVF (Inverted File Index).</p></li>
<li><p><strong>ivf_centroids</strong> (<em>optional</em>)  It can be either <code class="xref py py-class docutils literal notranslate"><span class="pre">np.ndarray</span></code>,
<a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.FixedSizeListArray.html#pyarrow.FixedSizeListArray" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.FixedSizeListArray</span></code></a> or
<a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.FixedShapeTensorArray.html#pyarrow.FixedShapeTensorArray" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.FixedShapeTensorArray</span></code></a>.
A <code class="docutils literal notranslate"><span class="pre">num_partitions</span> <span class="pre">x</span> <span class="pre">dimension</span></code> array of existing K-mean centroids
for IVF clustering. If not provided, a new KMeans model will be trained.</p></li>
<li><p><strong>pq_codebook</strong> (<em>optional</em><em>,</em>)  <p>It can be <code class="xref py py-class docutils literal notranslate"><span class="pre">np.ndarray</span></code>, <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.FixedSizeListArray.html#pyarrow.FixedSizeListArray" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.FixedSizeListArray</span></code></a>,
or <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.FixedShapeTensorArray.html#pyarrow.FixedShapeTensorArray" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.FixedShapeTensorArray</span></code></a>.
A <code class="docutils literal notranslate"><span class="pre">num_sub_vectors</span> <span class="pre">x</span> <span class="pre">(2</span> <span class="pre">^</span> <span class="pre">nbits</span> <span class="pre">*</span> <span class="pre">dimensions</span> <span class="pre">//</span> <span class="pre">num_sub_vectors)</span></code>
array of K-mean centroids for PQ codebook.</p>
<p>Note: <code class="docutils literal notranslate"><span class="pre">nbits</span></code> is always 8 for now.
If not provided, a new PQ model will be trained.</p>
</p></li>
<li><p><strong>num_sub_vectors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of sub-vectors for PQ (Product Quantization).</p></li>
<li><p><strong>accelerator</strong> (str or <code class="docutils literal notranslate"><span class="pre">torch.Device</span></code>, optional)  If set, use an accelerator to speed up the training process.
Accepted accelerator: cuda (Nvidia GPU) and mps (Apple Silicon GPU).
If not set, use the CPU.</p></li>
<li><p><strong>index_cache_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The size of the index cache in number of entries. Default value is 256.</p></li>
<li><p><strong>shuffle_partition_batches</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  <p>The number of batches, using the row group size of the dataset, to include
in each shuffle partition. Default value is 10240.</p>
<p>Assuming the row group size is 1024, each shuffle partition will hold
10240 * 1024 = 10,485,760 rows. By making this value smaller, this shuffle
will consume less memory but will take longer to complete, and vice versa.</p>
</p></li>
<li><p><strong>shuffle_partition_concurrency</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  <p>The number of shuffle partitions to process concurrently. Default value is 2</p>
<p>By making this value smaller, this shuffle will consume less memory but will
take longer to complete, and vice versa.</p>
</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>filter_nan</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>)  Defaults to True. False is UNSAFE, and will cause a crash if any null/nan
values are present (and otherwise will not). Disables the null filter used
for nullable columns. Obtains a small speed boost.</p></li>
<li><p><strong>one_pass_ivfpq</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>)  Defaults to False. If enabled, index type must be IVF_PQ. Reduces disk IO.</p></li>
<li><p><strong>kwargs</strong>  Parameters passed to the index building process.</p></li>
</ul>
</dd>
</dl>
<p>The SQ (Scalar Quantization) is available for only <code class="docutils literal notranslate"><span class="pre">IVF_HNSW_SQ</span></code> index type,
this quantization method is used to reduce the memory usage of the index,
it maps the float vectors to integer vectors, each integer is of <code class="docutils literal notranslate"><span class="pre">num_bits</span></code>,
now only 8 bits are supported.</p>
<dl class="simple">
<dt>If <code class="docutils literal notranslate"><span class="pre">index_type</span></code> is IVF_*, then the following parameters are required:</dt><dd><p>num_partitions</p>
</dd>
<dt>If <code class="docutils literal notranslate"><span class="pre">index_type</span></code> is with PQ, then the following parameters are required:</dt><dd><p>num_sub_vectors</p>
</dd>
</dl>
<p>Optional parameters for <cite>IVF_PQ</cite>:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>ivf_centroids</dt><dd><p>Existing K-mean centroids for IVF clustering.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>num_bits</dt><dd><p>The number of bits for PQ (Product Quantization). Default is 8.
Only 4, 8 are supported.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>index_file_version</dt><dd><p>The version of the index file. Default is V3.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Optional parameters for <cite>IVF_HNSW_*</cite>:</dt><dd><dl class="simple">
<dt>max_level</dt><dd><p>Int, the maximum number of levels in the graph.</p>
</dd>
<dt>m</dt><dd><p>Int, the number of edges per node in the graph.</p>
</dd>
<dt>ef_construction</dt><dd><p>Int, the number of nodes to examine during the construction.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/sift.lance&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span>
    <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="s2">&quot;IVF_PQ&quot;</span><span class="p">,</span>
    <span class="n">num_partitions</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
    <span class="n">num_sub_vectors</span><span class="o">=</span><span class="mi">16</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/sift.lance&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span>
    <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="s2">&quot;IVF_HNSW_SQ&quot;</span><span class="p">,</span>
    <span class="n">num_partitions</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Experimental Accelerator (GPU) support:</p>
<ul class="simple">
<li><dl class="simple">
<dt><em>accelerate</em>: use GPU to train IVF partitions.</dt><dd><p>Only supports CUDA (Nvidia) or MPS (Apple) currently.
Requires PyTorch being installed.</p>
</dd>
</dl>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/sift.lance&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span>
    <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="s2">&quot;IVF_PQ&quot;</span><span class="p">,</span>
    <span class="n">num_partitions</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
    <span class="n">num_sub_vectors</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">accelerator</span><span class="o">=</span><span class="s2">&quot;cuda&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p class="rubric">References</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/facebookresearch/faiss/wiki/Faiss-indexes">Faiss Index</a></p></li>
<li><p>IVF introduced in <a class="reference external" href="https://ieeexplore.ieee.org/abstract/document/1238663">Video Google: a text retrieval approach to object matching
in videos</a></p></li>
<li><p><a class="reference external" href="https://hal.inria.fr/inria-00514462v2/document">Product quantization for nearest neighbor search</a></p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.create_scalar_index">
<span class="sig-name descname"><span class="pre">create_scalar_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'BTREE'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'BITMAP'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'LABEL_LIST'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'INVERTED'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'FTS'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'NGRAM'</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.create_scalar_index" title="Link to this definition"></a></dt>
<dd><p>Create a scalar index on a column.</p>
<p>Scalar indices, like vector indices, can be used to speed up scans.  A scalar
index can speed up scans that contain filter expressions on the indexed column.
For example, the following scan will be faster if the column <code class="docutils literal notranslate"><span class="pre">my_col</span></code> has
a scalar index:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/images.lance&quot;</span><span class="p">)</span>
<span class="n">my_table</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">scanner</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;my_col != 7&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span>
</pre></div>
</div>
<p>Vector search with pre-filers can also benefit from scalar indices. For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/images.lance&quot;</span><span class="p">)</span>
<span class="n">my_table</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">scanner</span><span class="p">(</span>
    <span class="n">nearest</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
       <span class="n">column</span><span class="o">=</span><span class="s2">&quot;vector&quot;</span><span class="p">,</span>
       <span class="n">q</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
       <span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;my_col != 7&quot;</span><span class="p">,</span>
    <span class="n">prefilter</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
<p>There are 5 types of scalar indices available today.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BTREE</span></code>. The most common type is <code class="docutils literal notranslate"><span class="pre">BTREE</span></code>. This index is inspired
by the btree data structure although only the first few layers of the btree
are cached in memory.  It will
perform well on columns with a large number of unique values and few rows per
value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BITMAP</span></code>. This index stores a bitmap for each unique value in the column.
This index is useful for columns with a small number of unique values and
many rows per value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LABEL_LIST</span></code>. A special index that is used to index list
columns whose values have small cardinality.  For example, a column that
contains lists of tags (e.g. <code class="docutils literal notranslate"><span class="pre">[&quot;tag1&quot;,</span> <span class="pre">&quot;tag2&quot;,</span> <span class="pre">&quot;tag3&quot;]</span></code>) can be indexed
with a <code class="docutils literal notranslate"><span class="pre">LABEL_LIST</span></code> index.  This index can only speedup queries with
<code class="docutils literal notranslate"><span class="pre">array_has_any</span></code> or <code class="docutils literal notranslate"><span class="pre">array_has_all</span></code> filters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NGRAM</span></code>. A special index that is used to index string columns.  This index
creates a bitmap for each ngram in the string.  By default we use trigrams.
This index can currently speed up queries using the <code class="docutils literal notranslate"><span class="pre">contains</span></code> function
in filters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FTS/INVERTED</span></code>. It is used to index document columns. This index
can conduct full-text searches. For example, a column that contains any word
of query string hello world. The results will be ranked by BM25.</p></li>
</ul>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">LANCE_BYPASS_SPILLING</span></code> environment variable can be used to
bypass spilling to disk. Setting this to true can avoid memory exhaustion
issues (see <a class="reference external" href="https://github.com/apache/datafusion/issues/10073">https://github.com/apache/datafusion/issues/10073</a> for more info).</p>
<p><strong>Experimental API</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The column to be indexed.  Must be a boolean, integer, float,
or string column.</p></li>
<li><p><strong>index_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The type of the index.  One of <code class="docutils literal notranslate"><span class="pre">&quot;BTREE&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;BITMAP&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;LABEL_LIST&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;NGRAM&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;FTS&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;INVERTED&quot;</span></code>.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  The index name. If not provided, it will be generated from the
column name.</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Replace the existing index if it exists.</p></li>
<li><p><strong>with_position</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will store the
positions of the words in the document, so that you can conduct phrase
query. This will significantly increase the index size.
It wont impact the performance of non-phrase queries even if it is set to
True.</p></li>
<li><p><strong>base_tokenizer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default &quot;simple&quot;</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. The base tokenizer to use. The value
can be:
* simple: splits tokens on whitespace and punctuation.
* whitespace: splits tokens on whitespace.
* raw: no tokenization.</p></li>
<li><p><strong>language</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default &quot;English&quot;</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. The language for stemming
and stop words. This is only used when <cite>stem</cite> or <cite>remove_stop_words</cite> is true</p></li>
<li><p><strong>max_token_length</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>]</em><em>, </em><em>default 40</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. The maximum token length.
Any token longer than this will be removed.</p></li>
<li><p><strong>lower_case</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will convert all
text to lowercase.</p></li>
<li><p><strong>stem</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will stem the
tokens.</p></li>
<li><p><strong>remove_stop_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will remove
stop words.</p></li>
<li><p><strong>ascii_folding</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will convert
non-ascii characters to ascii characters if possible.
This would remove accents like  -&gt; e.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/images.lance&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span>
    <span class="s2">&quot;category&quot;</span><span class="p">,</span>
    <span class="s2">&quot;BTREE&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Scalar indices can only speed up scans for basic filters using
equality, comparison, range (e.g. <code class="docutils literal notranslate"><span class="pre">my_col</span> <span class="pre">BETWEEN</span> <span class="pre">0</span> <span class="pre">AND</span> <span class="pre">100</span></code>), and set
membership (e.g. <cite>my_col IN (0, 1, 2)</cite>)</p>
<p>Scalar indices can be used if the filter contains multiple indexed columns and
the filter criteria are ANDd or ORd together
(e.g. <code class="docutils literal notranslate"><span class="pre">my_col</span> <span class="pre">&lt;</span> <span class="pre">0</span> <span class="pre">AND</span> <span class="pre">other_col&gt;</span> <span class="pre">100</span></code>)</p>
<p>Scalar indices may be used if the filter contains non-indexed columns but,
depending on the structure of the filter, they may not be usable.  For example,
if the column <code class="docutils literal notranslate"><span class="pre">not_indexed</span></code> does not have a scalar index then the filter
<code class="docutils literal notranslate"><span class="pre">my_col</span> <span class="pre">=</span> <span class="pre">0</span> <span class="pre">OR</span> <span class="pre">not_indexed</span> <span class="pre">=</span> <span class="pre">1</span></code> will not be able to use any scalar index on
<code class="docutils literal notranslate"><span class="pre">my_col</span></code>.</p>
<p>To determine if a scan is making use of a scalar index you can use
<code class="docutils literal notranslate"><span class="pre">explain_plan</span></code> to look at the query plan that lance has created.  Queries
that use scalar indices will either have a <code class="docutils literal notranslate"><span class="pre">ScalarIndexQuery</span></code> relation or a
<code class="docutils literal notranslate"><span class="pre">MaterializeIndex</span></code> operator.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.data_storage_version">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data_storage_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.LanceDataset.data_storage_version" title="Link to this definition"></a></dt>
<dd><p>The version of the data storage format this dataset is using</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.delete" title="Link to this definition"></a></dt>
<dd><p>Delete rows from the dataset.</p>
<p>This marks rows as deleted, but does not physically remove them from the
files. This keeps the existing indexes still valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>predicate</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>pa.compute.Expression</em>)  The predicate to use to select rows to delete. May either be a SQL
string or a pyarrow Expression.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;a = 1 or b in (&#39;a&#39;, &#39;b&#39;)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span>
<span class="go">pyarrow.Table</span>
<span class="go">a: int64</span>
<span class="go">b: string</span>
<span class="go">----</span>
<span class="go">a: [[3]]</span>
<span class="go">b: [[&quot;c&quot;]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.delete_config_keys">
<span class="sig-name descname"><span class="pre">delete_config_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.delete_config_keys" title="Link to this definition"></a></dt>
<dd><p>Delete specified configuration keys from the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  A list of configuration keys to remove from the dataset.
Non-existent keys will be silently ignored.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.drop">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">drop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_not_found</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.drop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.drop_columns">
<span class="sig-name descname"><span class="pre">drop_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.drop_columns" title="Link to this definition"></a></dt>
<dd><p>Drop one or more columns from the dataset</p>
<p>This is a metadata-only operation and does not remove the data from the
underlying storage. In order to remove the data, you must subsequently
call <code class="docutils literal notranslate"><span class="pre">compact_files</span></code> to rewrite the data without the removed columns and
then call <code class="docutils literal notranslate"><span class="pre">cleanup_old_versions</span></code> to remove the old files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The names of the columns to drop. These can be nested column references
(e.g. a.b.c) or top-level column names (e.g. a).</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">drop_columns</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   b</span>
<span class="go">0  a</span>
<span class="go">1  b</span>
<span class="go">2  c</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.drop_index">
<span class="sig-name descname"><span class="pre">drop_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.drop_index" title="Link to this definition"></a></dt>
<dd><p>Drops an index from the dataset</p>
<p>Note: Indices are dropped by index name.  This is not the same as the field
name. If you did not specify a name when you created the index then a name was
generated for you.  You can use the <cite>list_indices</cite> method to get the names of
the indices.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.get_fragment">
<span class="sig-name descname"><span class="pre">get_fragment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.fragment.LanceFragment" title="lance.fragment.LanceFragment"><span class="pre">LanceFragment</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.get_fragment" title="Link to this definition"></a></dt>
<dd><p>Get the fragment with fragment id.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.get_fragments">
<span class="sig-name descname"><span class="pre">get_fragments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Expression</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.LanceFragment" title="lance.LanceFragment"><span class="pre">LanceFragment</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.LanceDataset.get_fragments" title="Link to this definition"></a></dt>
<dd><p>Get all fragments from the dataset.</p>
<p>Note: filter is not supported yet.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.has_index">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_index</span></span><a class="headerlink" href="#lance.LanceDataset.has_index" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.head">
<span class="sig-name descname"><span class="pre">head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_rows</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.head" title="Link to this definition"></a></dt>
<dd><p>Load the first N rows of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The number of rows to load.</p></li>
<li><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  See scanner() method for full parameter description.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>table</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.index_statistics">
<span class="sig-name descname"><span class="pre">index_statistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.LanceDataset.index_statistics" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'append'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.insert" title="Link to this definition"></a></dt>
<dd><p>Insert data into the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>Reader-like</em>)  The data to be written. Acceptable types are:
- Pandas DataFrame, Pyarrow Table, Dataset, Scanner, or RecordBatchReader
- Huggingface dataset</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default 'append'</em>)  <dl class="simple">
<dt>The mode to use when writing the data. Options are:</dt><dd><p><strong>create</strong> - create a new dataset (raises if uri already exists).
<strong>overwrite</strong> - create a new snapshot version
<strong>append</strong> - create a new version that is the concat of the input the
latest version (raises if uri does not exist)</p>
</dd>
</dl>
</p></li>
<li><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  Additional keyword arguments to pass to <a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.join">
<span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">right_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">join_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'left</span> <span class="pre">outer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coalesce_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.join" title="Link to this definition"></a></dt>
<dd><p>Not implemented (just override pyarrow dataset to prevent segfault)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.lance_schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lance_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LanceSchema</span></em><a class="headerlink" href="#lance.LanceDataset.lance_schema" title="Link to this definition"></a></dt>
<dd><p>The LanceSchema for this dataset</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.latest_version">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">latest_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.LanceDataset.latest_version" title="Link to this definition"></a></dt>
<dd><p>Returns the latest version of the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.list_indices">
<span class="sig-name descname"><span class="pre">list_indices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.Index" title="lance.dataset.Index"><span class="pre">Index</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.LanceDataset.list_indices" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.max_field_id">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_field_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.LanceDataset.max_field_id" title="Link to this definition"></a></dt>
<dd><p>The max_field_id in manifest</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.merge">
<span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.merge" title="Link to this definition"></a></dt>
<dd><p>Merge another dataset into this one.</p>
<p>Performs a left join, where the dataset is the left side and data_obj
is the right side. Rows existing in the dataset but not on the left will
be filled with null values, unless Lance doesnt support null values for
some types, in which case an error will be raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>Reader-like</em>)  The data to be merged. Acceptable types are:
- Pandas DataFrame, Pyarrow Table, Dataset, Scanner,
Iterator[RecordBatch], or RecordBatchReader</p></li>
<li><p><strong>left_on</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the column in the dataset to join on.</p></li>
<li><p><strong>right_on</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>None</em>)  The name of the column in data_obj to join on. If None, defaults to
left_on.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;dataset&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  y</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_df</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  y  z</span>
<span class="go">0  1  a  d</span>
<span class="go">1  2  b  e</span>
<span class="go">2  3  c  f</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.LanceDataset.add_columns" title="lance.LanceDataset.add_columns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LanceDataset.add_columns</span></code></a></dt><dd><p>Add new columns by computing batch-by-batch.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.merge_insert">
<span class="sig-name descname"><span class="pre">merge_insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.merge_insert" title="Link to this definition"></a></dt>
<dd><p>Returns a builder that can be used to create a merge insert operation</p>
<p>This operation can add rows, update rows, and remove rows in a single
transaction. It is a very generic tool that can be used to create
behaviors like insert if not exists, update or insert (i.e. upsert),
or even replace a portion of existing data with new data (e.g. replace
all data where month=january)</p>
<p>The merge insert operation works by combining new data from a
<strong>source table</strong> with existing data in a <strong>target table</strong> by using a
join.  There are three categories of records.</p>
<p>Matched records are records that exist in both the source table and
the target table. Not matched records exist only in the source table
(e.g. these are new data). Not matched by source records exist only
in the target table (this is old data).</p>
<p>The builder returned by this method can be used to customize what
should happen for each category of data.</p>
<p>Please note that the data will be reordered as part of this
operation.  This is because updated rows will be deleted from the
dataset and then reinserted at the end with the new values.  The
order of the newly inserted rows may fluctuate randomly because a
hash-join operation is used internally.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>on</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>]</em>)  A column (or columns) to join on.  This is how records from the
source table and target table are matched.  Typically this is some
kind of key or id column.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Use <cite>when_matched_update_all()</cite> and <cite>when_not_matched_insert_all()</cite> to
perform an upsert operation.  This will update rows that already exist
in the dataset and insert rows that do not exist.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Perform a &quot;upsert&quot; operation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">merge_insert</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_matched_update_all</span><span class="p">()</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_not_matched_insert_all</span><span class="p">()</span> \
<span class="gp">... </span>            <span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">new_table</span><span class="p">)</span>
<span class="go">{&#39;num_inserted_rows&#39;: 1, &#39;num_updated_rows&#39;: 2, &#39;num_deleted_rows&#39;: 0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  b</span>
<span class="go">1  2  x</span>
<span class="go">2  3  y</span>
<span class="go">3  4  z</span>
</pre></div>
</div>
<p>Use <cite>when_not_matched_insert_all()</cite> to perform an insert if not exists
operation.  This will only insert rows that do not already exist in the
dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Perform an &quot;insert if not exists&quot; operation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">merge_insert</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_not_matched_insert_all</span><span class="p">()</span> \
<span class="gp">... </span>            <span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">new_table</span><span class="p">)</span>
<span class="go">{&#39;num_inserted_rows&#39;: 1, &#39;num_updated_rows&#39;: 0, &#39;num_deleted_rows&#39;: 0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  z</span>
</pre></div>
</div>
<p>You are not required to provide all the columns. If you only want to
update a subset of columns, you can omit columns you dont want to
update. Omitted columns will keep their existing values if they are
updated, or will be null if they are inserted.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> \
<span class="gp">... </span>                  <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Perform an &quot;upsert&quot; operation, only updating column &quot;a&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">merge_insert</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_matched_update_all</span><span class="p">()</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_not_matched_insert_all</span><span class="p">()</span> \
<span class="gp">... </span>            <span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">new_table</span><span class="p">)</span>
<span class="go">{&#39;num_inserted_rows&#39;: 1, &#39;num_updated_rows&#39;: 2, &#39;num_deleted_rows&#39;: 0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b     c</span>
<span class="go">0  1  a     x</span>
<span class="go">1  2  x     y</span>
<span class="go">2  3  y     z</span>
<span class="go">3  4  z  None</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.migrate_manifest_paths_v2">
<span class="sig-name descname"><span class="pre">migrate_manifest_paths_v2</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.migrate_manifest_paths_v2" title="Link to this definition"></a></dt>
<dd><p>Migrate the manifest paths to the new format.</p>
<p>This will update the manifest to use the new v2 format for paths.</p>
<p>This function is idempotent, and can be run multiple times without
changing the state of the object store.</p>
<p>DANGER: this should not be run while other concurrent operations are happening.
And it should also run until completion before resuming other operations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.optimize">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">optimize</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.DatasetOptimizer" title="lance.dataset.DatasetOptimizer"><span class="pre">DatasetOptimizer</span></a></em><a class="headerlink" href="#lance.LanceDataset.optimize" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.partition_expression">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partition_expression</span></span><a class="headerlink" href="#lance.LanceDataset.partition_expression" title="Link to this definition"></a></dt>
<dd><p>Not implemented (just override pyarrow dataset to prevent segfault)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.prewarm_index">
<span class="sig-name descname"><span class="pre">prewarm_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.prewarm_index" title="Link to this definition"></a></dt>
<dd><p>Prewarm an index</p>
<p>This will load the entire index into memory.  This can help avoid cold start
issues with index queries.  If the index does not fit in the index cache, then
this will result in wasted I/O.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the index to prewarm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.replace_field_metadata">
<span class="sig-name descname"><span class="pre">replace_field_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.replace_field_metadata" title="Link to this definition"></a></dt>
<dd><p>Replace the metadata of a field in the schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the field to replace the metadata for</p></li>
<li><p><strong>new_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  The new metadata to set</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.replace_schema">
<span class="sig-name descname"><span class="pre">replace_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.replace_schema" title="Link to this definition"></a></dt>
<dd><p>Not implemented (just override pyarrow dataset to prevent segfault)</p>
<p>See <a href="#id5"><span class="problematic" id="id6">:py:method:`replace_schema_metadata`</span></a> or <a href="#id7"><span class="problematic" id="id8">:py:method:`replace_field_metadata`</span></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.replace_schema_metadata">
<span class="sig-name descname"><span class="pre">replace_schema_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.replace_schema_metadata" title="Link to this definition"></a></dt>
<dd><p>Replace the schema metadata of the dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  The new metadata to set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.restore">
<span class="sig-name descname"><span class="pre">restore</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.restore" title="Link to this definition"></a></dt>
<dd><p>Restore the currently checked out version as the latest version of the dataset.</p>
<p>This creates a new commit.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.sample">
<span class="sig-name descname"><span class="pre">sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><span class="pre">Table</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.sample" title="Link to this definition"></a></dt>
<dd><p>Select a random sample of data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  number of rows to retrieve</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str default None</em>)  List of column names to be fetched.
Or a dictionary of column names to SQL expressions.
All columns are fetched if None or unspecified.</p></li>
<li><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  see scanner() method for full parameter description.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>table</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.scanner">
<span class="sig-name descname"><span class="pre">scanner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nearest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan_in_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.LanceFragment" title="lance.fragment.LanceFragment"><span class="pre">LanceFragment</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_text_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">FullTextQuery</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefilter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast_search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">io_buffer_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">late_materialization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_scalar_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_deleted_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan_stats_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.ScanStatistics" title="_lib.ScanStatistics"><span class="pre">ScanStatistics</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict_batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.LanceScanner" title="lance.dataset.LanceScanner"><span class="pre">LanceScanner</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.scanner" title="Link to this definition"></a></dt>
<dd><p>Return a Scanner that can support various pushdowns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str default None</em>)  List of column names to be fetched.
Or a dictionary of column names to SQL expressions.
All columns are fetched if None or unspecified.</p></li>
<li><p><strong>filter</strong> (<em>pa.compute.Expression</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  Expression or str that is a valid SQL where clause. See
<a class="reference external" href="https://lancedb.github.io/lance/introduction/read_and_write.html#filter-push-down">Lance filter pushdown</a>
for valid SQL expressions.</p></li>
<li><p><strong>limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  Fetch up to this many rows. All rows if None or unspecified.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  Fetch starting with this row. 0 if None or unspecified.</p></li>
<li><p><strong>nearest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>default None</em>)  <p>Get the rows corresponding to the K most similar vectors. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">embedding</span> <span class="n">col</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">query</span> <span class="n">vector</span> <span class="k">as</span> <span class="n">pa</span><span class="o">.</span><span class="n">Float32Array</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;k&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;minimum_nprobes&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s2">&quot;maximum_nprobes&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">&quot;refine_factor&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  The target size of batches returned.  In some cases batches can be up to
twice this size (but never larger than this).  In some cases batches can
be smaller than this size.</p></li>
<li><p><strong>io_buffer_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  The size of the IO buffer.  See <code class="docutils literal notranslate"><span class="pre">ScannerBuilder.io_buffer_size</span></code>
for more information.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of batches to read ahead.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of fragments to read ahead.</p></li>
<li><p><strong>scan_in_order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Whether to read the fragments and batches in order. If false,
throughput may be higher, but batches will be returned out of order
and memory use might increase.</p></li>
<li><p><strong>fragments</strong> (<em>iterable</em><em> of </em><a class="reference internal" href="#lance.LanceFragment" title="lance.LanceFragment"><em>LanceFragment</em></a><em>, </em><em>default None</em>)  If specified, only scan these fragments. If scan_in_order is True, then
the fragments will be scanned in the order given.</p></li>
<li><p><strong>prefilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  <p>If True then the filter will be applied before the vector query is run.
This will generate more correct results but it may be a more costly
query.  Its generally good when the filter is highly selective.</p>
<p>If False then the filter will be applied after the vector query is run.
This will perform well but the results may have fewer than the requested
number of rows (or be empty) if the rows closest to the query do not
match the filter.  Its generally good when the filter is not very
selective.</p>
</p></li>
<li><p><strong>use_scalar_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Lance will automatically use scalar indices to optimize a query.  In some
corner cases this can make query performance worse and this parameter can
be used to disable scalar indices in these cases.</p></li>
<li><p><strong>late_materialization</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> or </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>, </em><em>default None</em>)  <p>Allows custom control over late materialization.  Late materialization
fetches non-query columns using a take operation after the filter.  This
is useful when there are few results or columns are very large.</p>
<p>Early materialization can be better when there are many results or the
columns are very narrow.</p>
<p>If True, then all columns are late materialized.
If False, then all columns are early materialized.
If a list of strings, then only the columns in the list are
late materialized.</p>
<p>The default uses a heuristic that assumes filters will select about 0.1%
of the rows.  If your filter is more selective (e.g. find by id) you may
want to set this to True.  If your filter is not very selective (e.g.
matches 20% of the rows) you may want to set this to False.</p>
</p></li>
<li><p><strong>full_text_query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  <p>query string to search for, the results will be ranked by BM25.
e.g. hello world, would match documents containing hello or world.
or a dictionary with the following keys:</p>
<ul>
<li><dl class="simple">
<dt>columns: list[str]</dt><dd><p>The columns to search,
currently only supports a single column in the columns list.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>query: str</dt><dd><p>The query string to search for.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>fast_search</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  If True, then the search will only be performed on the indexed data, which
yields faster search time.</p></li>
<li><p><strong>scan_stats_callback</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="#lance.ScanStatistics" title="lance.ScanStatistics"><em>ScanStatistics</em></a><em>]</em><em>, </em><em>None</em><em>]</em><em>, </em><em>default None</em>)  A callback function that will be called with the scan statistics after the
scan is complete.  Errors raised by the callback will be logged but not
re-raised.</p></li>
<li><p><strong>include_deleted_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  <p>If True, then rows that have been deleted, but are still present in the
fragment, will be returned.  These rows will have the _rowid column set
to null.  All other columns will reflect the value stored on disk and may
not be null.</p>
<p>Note: if this is a search operation, or a take operation (including scalar
indexed scans) then deleted rows cannot be returned.</p>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For now, if BOTH filter and nearest is specified, then:</p>
<ol class="arabic simple">
<li><p>nearest is executed first.</p></li>
<li><p>The results are filtered afterwards.</p></li>
</ol>
</div>
<p>For debugging ANN results, you can choose to not use the index
even if present by specifying <code class="docutils literal notranslate"><span class="pre">use_index=False</span></code>. For example,
the following will always return exact KNN results:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">(</span><span class="n">nearest</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="s2">&quot;k&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">query</span> <span class="n">vector</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;use_index&quot;</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.LanceDataset.schema" title="Link to this definition"></a></dt>
<dd><p>The pyarrow Schema for this dataset</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.session">
<span class="sig-name descname"><span class="pre">session</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_Session</span></span></span><a class="headerlink" href="#lance.LanceDataset.session" title="Link to this definition"></a></dt>
<dd><p>Return the dataset session, which holds the datasets state.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.stats">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stats</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceStats" title="lance.dataset.LanceStats"><span class="pre">LanceStats</span></a></em><a class="headerlink" href="#lance.LanceDataset.stats" title="Link to this definition"></a></dt>
<dd><p><strong>Experimental API</strong></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.tags">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tags</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.Tags" title="lance.dataset.Tags"><span class="pre">Tags</span></a></em><a class="headerlink" href="#lance.LanceDataset.tags" title="Link to this definition"></a></dt>
<dd><p>Tag management for the dataset.</p>
<p>Similar to Git, tags are a way to add metadata to a specific version of the
dataset.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Tagged versions are exempted from the <a class="reference internal" href="#lance.LanceDataset.cleanup_old_versions" title="lance.LanceDataset.cleanup_old_versions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cleanup_old_versions()</span></code></a>
process.</p>
<p>To remove a version that has been tagged, you must first
<code class="xref py py-meth docutils literal notranslate"><span class="pre">delete()</span></code> the associated tag.</p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;dataset.lance&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;v2-prod-20250203&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">tags</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.take">
<span class="sig-name descname"><span class="pre">take</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Array.html#pyarrow.Array" title="(in Apache Arrow v20.0.0)"><span class="pre">Array</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><span class="pre">Table</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.take" title="Link to this definition"></a></dt>
<dd><p>Select rows of data by index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indices</strong> (<em>Array</em><em> or </em><em>array-like</em>)  indices of rows to select in the dataset.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str default None</em>)  List of column names to be fetched.
Or a dictionary of column names to SQL expressions.
All columns are fetched if None or unspecified.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>table</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)">pyarrow.Table</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.take_blobs">
<span class="sig-name descname"><span class="pre">take_blobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blob_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Array.html#pyarrow.Array" title="(in Apache Arrow v20.0.0)"><span class="pre">Array</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addresses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Array.html#pyarrow.Array" title="(in Apache Arrow v20.0.0)"><span class="pre">Array</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Array.html#pyarrow.Array" title="(in Apache Arrow v20.0.0)"><span class="pre">Array</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.BlobFile" title="lance.blob.BlobFile"><span class="pre">BlobFile</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.LanceDataset.take_blobs" title="Link to this definition"></a></dt>
<dd><p>Select blobs by row IDs.</p>
<p>Instead of loading large binary blob data into memory before processing it,
this API allows you to open binary blob data as a regular Python file-like
object. For more details, see <a class="reference internal" href="#lance.BlobFile" title="lance.BlobFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">lance.BlobFile</span></code></a>.</p>
<p>Exactly one of ids, addresses, or indices must be specified.
:param blob_column: The name of the blob column to select.
:type blob_column: str
:param ids: row IDs to select in the dataset.
:type ids: Integer Array or array-like
:param addresses: The (unstable) row addresses to select in the dataset.
:type addresses: Integer Array or array-like
:param indices: The offset / indices of the row in the dataset.
:type indices: Integer Array or array-like</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>blob_files</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="#lance.BlobFile" title="lance.BlobFile">BlobFile</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.to_batches">
<span class="sig-name descname"><span class="pre">to_batches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nearest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan_in_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefilter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_text_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">io_buffer_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">late_materialization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_scalar_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict_batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.RecordBatch.html#pyarrow.RecordBatch" title="(in Apache Arrow v20.0.0)"><span class="pre">RecordBatch</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.LanceDataset.to_batches" title="Link to this definition"></a></dt>
<dd><p>Read the dataset as materialized record batches.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  Arguments for <a class="reference internal" href="#lance.LanceDataset.scanner" title="lance.LanceDataset.scanner"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scanner()</span></code></a>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>record_batches</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Iterator of <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.RecordBatch.html#pyarrow.RecordBatch" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RecordBatch</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.to_table">
<span class="sig-name descname"><span class="pre">to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nearest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan_in_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefilter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast_search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_text_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">FullTextQuery</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">io_buffer_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">late_materialization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_scalar_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_deleted_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><span class="pre">Table</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.to_table" title="Link to this definition"></a></dt>
<dd><p>Read the data into memory as a <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.Table</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str default None</em>)  List of column names to be fetched.
Or a dictionary of column names to SQL expressions.
All columns are fetched if None or unspecified.</p></li>
<li><p><strong>filter</strong> (<em>pa.compute.Expression</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  <p>Expression or str that is a valid SQL where clause. See
<a class="reference external" href="https://lancedb.github.io/lance/introduction/read_and_write.html#filter-push-down">Lance filter pushdown</a>
for valid SQL expressions.</p>
</p></li>
<li><p><strong>limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  Fetch up to this many rows. All rows if None or unspecified.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  Fetch starting with this row. 0 if None or unspecified.</p></li>
<li><p><strong>nearest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>default None</em>)  <p>Get the rows corresponding to the K most similar vectors. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">embedding</span> <span class="n">col</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">query</span> <span class="n">vector</span> <span class="k">as</span> <span class="n">pa</span><span class="o">.</span><span class="n">Float32Array</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;k&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;metric&quot;</span><span class="p">:</span> <span class="s2">&quot;cosine&quot;</span><span class="p">,</span>
    <span class="s2">&quot;minimum_nprobes&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s2">&quot;maximum_nprobes&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">&quot;refine_factor&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of rows to read at a time.</p></li>
<li><p><strong>io_buffer_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  The size of the IO buffer.  See <code class="docutils literal notranslate"><span class="pre">ScannerBuilder.io_buffer_size</span></code>
for more information.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of batches to read ahead.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of fragments to read ahead.</p></li>
<li><p><strong>scan_in_order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default True</em>)  Whether to read the fragments and batches in order. If false,
throughput may be higher, but batches will be returned out of order
and memory use might increase.</p></li>
<li><p><strong>prefilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)  Run filter before the vector search.</p></li>
<li><p><strong>late_materialization</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> or </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>, </em><em>default None</em>)  Allows custom control over late materialization.  See
<code class="docutils literal notranslate"><span class="pre">ScannerBuilder.late_materialization</span></code> for more information.</p></li>
<li><p><strong>use_scalar_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Allows custom control over scalar index usage.  See
<code class="docutils literal notranslate"><span class="pre">ScannerBuilder.use_scalar_index</span></code> for more information.</p></li>
<li><p><strong>with_row_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)  Return row ID.</p></li>
<li><p><strong>with_row_address</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)  Return row address</p></li>
<li><p><strong>use_stats</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default True</em>)  Use stats pushdown during filters.</p></li>
<li><p><strong>fast_search</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)</p></li>
<li><p><strong>full_text_query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  <p>query string to search for, the results will be ranked by BM25.
e.g. hello world, would match documents contains hello or world.
or a dictionary with the following keys:</p>
<ul>
<li><dl class="simple">
<dt>columns: list[str]</dt><dd><p>The columns to search,
currently only supports a single column in the columns list.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>query: str</dt><dd><p>The query string to search for.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>include_deleted_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)  <p>If True, then rows that have been deleted, but are still present in the
fragment, will be returned.  These rows will have the _rowid column set
to null.  All other columns will reflect the value stored on disk and may
not be null.</p>
<p>Note: if this is a search operation, or a take operation (including scalar
indexed scans) then deleted rows cannot be returned.</p>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If BOTH filter and nearest is specified, then:</p>
<ol class="arabic simple">
<li><p>nearest is executed first.</p></li>
<li><p>The results are filtered afterward, unless pre-filter sets to True.</p></li>
</ol>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">updates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">where</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conflict_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.13)"><span class="pre">timedelta</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">datetime.timedelta(seconds=30)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.UpdateResult" title="lance.dataset.UpdateResult"><span class="pre">UpdateResult</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.update" title="Link to this definition"></a></dt>
<dd><p>Update column values for rows matching where.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>updates</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str</em>)  A mapping of column names to a SQL expression.</p></li>
<li><p><strong>where</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  A SQL predicate indicating which rows should be updated.</p></li>
<li><p><strong>conflict_retries</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  Number of times to retry the operation if there is contention.
Default is 10.</p></li>
<li><p><strong>retry_timeout</strong> (<em>timedelta</em><em>, </em><em>optional</em>)  The timeout used to limit retries. This is the maximum time to spend on
the operation before giving up. At least one attempt will be made,
regardless of how long it takes to complete. Subsequent attempts will be
cancelled once this timeout is reached. Default is 30 seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>updates</strong>  A dictionary containing the number of rows updated.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">update_stats</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;a + 2&#39;</span><span class="p">),</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;b != &#39;a&#39;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">update_stats</span><span class="p">[</span><span class="s2">&quot;num_updated_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  4  b</span>
<span class="go">2  5  c</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.update_config">
<span class="sig-name descname"><span class="pre">update_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">upsert_values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.LanceDataset.update_config" title="Link to this definition"></a></dt>
<dd><p>Update the dataset configuration.</p>
<p>This method inserts or updates configuration key-value pairs for the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>upsert_values</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str</em>)  The configuration items to insert or update.
Both keys and values should be strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.uri">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">uri</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.LanceDataset.uri" title="Link to this definition"></a></dt>
<dd><p>The location of the data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.validate" title="Link to this definition"></a></dt>
<dd><p>Validate the dataset.</p>
<p>This checks the integrity of the dataset and will raise an exception if
the dataset is corrupted.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceDataset.version">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.LanceDataset.version" title="Link to this definition"></a></dt>
<dd><p>Returns the currently checked out version of the dataset</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceDataset.versions">
<span class="sig-name descname"><span class="pre">versions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceDataset.versions" title="Link to this definition"></a></dt>
<dd><p>Return all versions in this dataset.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceFragment">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">LanceFragment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_Fragment</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceFragment" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.count_rows">
<span class="sig-name descname"><span class="pre">count_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceFragment.count_rows" title="Link to this definition"></a></dt>
<dd><p>Count rows matching the scanner filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>count</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.create">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FragmentWriteProgress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'append'</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_storage_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_legacy_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata"><span class="pre">FragmentMetadata</span></a></span></span><a class="headerlink" href="#lance.LanceFragment.create" title="Link to this definition"></a></dt>
<dd><p>Create a <a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">FragmentMetadata</span></code></a> from the given data.</p>
<p>This can be used if the dataset is not yet created.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Internal API. This method is not intended to be used by end users.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_uri</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The URI of the dataset.</p></li>
<li><p><strong>fragment_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The ID of the fragment.</p></li>
<li><p><strong>data</strong> (<em>pa.Table</em><em> or </em><em>pa.RecordBatchReader</em>)  The data to be written to the fragment.</p></li>
<li><p><strong>schema</strong> (<em>pa.Schema</em><em>, </em><em>optional</em>)  The schema of the data. If not specified, the schema will be inferred
from the data.</p></li>
<li><p><strong>max_rows_per_group</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024</em>)  The maximum number of rows per group in the data file.</p></li>
<li><p><strong>progress</strong> (<em>FragmentWriteProgress</em><em>, </em><em>optional</em>)  <em>Experimental API</em>. Progress tracking for writing the fragment. Pass
a custom class that defines hooks to be called when each fragment is
starting to write and finishing writing.</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default &quot;append&quot;</em>)  The write mode. If append is specified, the data will be checked
against the existing datasets schema. Otherwise, pass create or
overwrite to assign new field ids to the schema.</p></li>
<li><p><strong>data_storage_version</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  The version of the data storage format to use. Newer versions are more
efficient but require newer versions of lance to read.  The default (None)
will use the latest stable version.  See the user guide for more details.</p></li>
<li><p><strong>use_legacy_format</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default None</em>)  Deprecated parameter.  Use data_storage_version instead.</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.dataset.LanceOperation.Overwrite" title="lance.dataset.LanceOperation.Overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lance.dataset.LanceOperation.Overwrite</span></code></a></dt><dd><p>The operation used to create a new dataset or overwrite one using fragments created with this API. See the doc page for an example of using this API.</p>
</dd>
<dt><a class="reference internal" href="#lance.dataset.LanceOperation.Append" title="lance.dataset.LanceOperation.Append"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lance.dataset.LanceOperation.Append</span></code></a></dt><dd><p>The operation used to append fragments created with this API to an existing dataset. See the doc page for an example of using this API.</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.create_from_file">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata"><span class="pre">FragmentMetadata</span></a></span></span><a class="headerlink" href="#lance.LanceFragment.create_from_file" title="Link to this definition"></a></dt>
<dd><p>Create a fragment from the given datafile uri.</p>
<p>This can be used if the datafile is loss from dataset.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Internal API. This method is not intended to be used by end users.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The filename of the datafile.</p></li>
<li><p><strong>dataset</strong> (<a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><em>LanceDataset</em></a>)  The dataset that the fragment belongs to.</p></li>
<li><p><strong>fragment_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The ID of the fragment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.data_files">
<span class="sig-name descname"><span class="pre">data_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceFragment.data_files" title="Link to this definition"></a></dt>
<dd><p>Return the data files of this fragment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.LanceFragment.delete" title="Link to this definition"></a></dt>
<dd><p>Delete rows from this Fragment.</p>
<p>This will add or update the deletion file of this fragment. It does not
modify or delete the data files of this fragment. If no rows are left after
the deletion, this method will return None.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Internal API. This method is not intended to be used by end users.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>predicate</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  A SQL predicate that specifies the rows to delete.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new fragment containing the new deletion file, or None if no rows left.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a> or None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="s2">&quot;dataset&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frag</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_fragment</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frag</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;a &gt; 1&quot;</span><span class="p">)</span>
<span class="go">FragmentMetadata(id=0, files=[DataFile(path=&#39;...&#39;, fields=[0, 1], ...), ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frag</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;a &gt; 0&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.dataset.LanceOperation.Delete" title="lance.dataset.LanceOperation.Delete"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lance.dataset.LanceOperation.Delete</span></code></a></dt><dd><p>The operation used to commit these changes to a dataset. See the doc page for an example of using this API.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.deletion_file">
<span class="sig-name descname"><span class="pre">deletion_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceFragment.deletion_file" title="Link to this definition"></a></dt>
<dd><p>Return the deletion file, if any</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceFragment.fragment_id">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fragment_id</span></span><a class="headerlink" href="#lance.LanceFragment.fragment_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.head">
<span class="sig-name descname"><span class="pre">head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">num_rows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceFragment.head" title="Link to this definition"></a></dt>
<dd><p>Load the first N rows of the fragment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The number of rows to load.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  <p>The columns to project. This can be a list of column names to
include (order and duplicates will be preserved), or a dictionary
with {new_column_name: expression} values for more advanced
projections.</p>
<p>The list of columns or expressions may use the special fields
<cite>__batch_index</cite> (the index of the batch within the fragment),
<cite>__fragment_index</cite> (the index of the fragment within the dataset),
<cite>__last_in_fragment</cite> (whether the batch is last in fragment), and
<cite>__filename</cite> (the name of the source file or a description of the
source fragment).</p>
<p>The columns will be passed down to Datasets and corresponding data
fragments to avoid loading, copying, and deserializing columns
that will not be required further down the compute chain.
By default all of the available columns are projected. Raises
an exception if any of the referenced column names does not exist
in the datasets Schema.</p>
</p></li>
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.merge">
<span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LanceSchema</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.LanceFragment.merge" title="Link to this definition"></a></dt>
<dd><p>Merge another dataset into this fragment.</p>
<p>Performs a left join, where the fragment is the left side and data_obj
is the right side. Rows existing in the dataset but not on the left will
be filled with null values, unless Lance doesnt support null values for
some types, in which case an error will be raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>Reader-like</em>)  The data to be merged. Acceptable types are:
- Pandas DataFrame, Pyarrow Table, Dataset, Scanner,
Iterator[RecordBatch], or RecordBatchReader</p></li>
<li><p><strong>left_on</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the column in the dataset to join on.</p></li>
<li><p><strong>right_on</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>None</em>)  The name of the column in data_obj to join on. If None, defaults to
left_on.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;dataset&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  y</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragments</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_fragments</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merged</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fragments</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="p">,</span> <span class="n">schema</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_df</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">merged</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merge</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Merge</span><span class="p">(</span><span class="n">merged</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;dataset&quot;</span><span class="p">,</span> <span class="n">merge</span><span class="p">,</span> <span class="n">read_version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  y  z</span>
<span class="go">0  1  a  d</span>
<span class="go">1  2  b  e</span>
<span class="go">2  3  c  f</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">LanceDataset.merge_columns</span></code></dt><dd><p>Add columns to this Fragment.</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A new fragment with the merged column(s) and the final schema.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>, LanceSchema]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.merge_columns">
<span class="sig-name descname"><span class="pre">merge_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value_func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BatchUDF</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ReaderLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">pa.RecordBatch</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pa.RecordBatch</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reader_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LanceSchema</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.LanceFragment.merge_columns" title="Link to this definition"></a></dt>
<dd><p>Add columns to this Fragment.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Internal API. This method is not intended to be used by end users.</p>
</div>
<p>The parameters and their interpretation are the same as in the
<a class="reference internal" href="#lance.dataset.LanceDataset.add_columns" title="lance.dataset.LanceDataset.add_columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.dataset.LanceDataset.add_columns()</span></code></a> operation.</p>
<p>The only difference is that, instead of modifying the dataset, a new
fragment is created.  The new schema of the fragment is returned as well.
These can be used in a later operation to commit the changes to the dataset.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.dataset.LanceOperation.Merge" title="lance.dataset.LanceOperation.Merge"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lance.dataset.LanceOperation.Merge</span></code></a></dt><dd><p>The operation used to commit these changes to the dataset. See the doc page for an example of using this API.</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A new fragment with the added column(s) and the final schema.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>, LanceSchema]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceFragment.metadata">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a></em><a class="headerlink" href="#lance.LanceFragment.metadata" title="Link to this definition"></a></dt>
<dd><p>Return the metadata of this fragment.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceFragment.num_deletions">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_deletions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.LanceFragment.num_deletions" title="Link to this definition"></a></dt>
<dd><p>Return the number of deleted rows in this fragment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceFragment.partition_expression">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partition_expression</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.LanceFragment.partition_expression" title="Link to this definition"></a></dt>
<dd><p>An Expression which evaluates to true for all data viewed by this
Fragment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceFragment.physical_rows">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">physical_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.LanceFragment.physical_rows" title="Link to this definition"></a></dt>
<dd><p>Return the number of rows originally in this fragment.</p>
<p>To get the number of rows after deletions, use
<a class="reference internal" href="#lance.LanceFragment.count_rows" title="lance.LanceFragment.count_rows"><code class="xref py py-meth docutils literal notranslate"><span class="pre">count_rows()</span></code></a> instead.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceFragment.physical_schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">physical_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.LanceFragment.physical_schema" title="Link to this definition"></a></dt>
<dd><p>Return the physical schema of this Fragment. This schema can be
different from the dataset read schema.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.scanner">
<span class="sig-name descname"><span class="pre">scanner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.compute.Expression</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">16</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.LanceScanner" title="lance.LanceScanner"><span class="pre">LanceScanner</span></a></span></span><a class="headerlink" href="#lance.LanceFragment.scanner" title="Link to this definition"></a></dt>
<dd><p>See Dataset::scanner for details</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceFragment.schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.LanceFragment.schema" title="Link to this definition"></a></dt>
<dd><p>Return the schema of this fragment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.take">
<span class="sig-name descname"><span class="pre">take</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceFragment.take" title="Link to this definition"></a></dt>
<dd><p>Select rows of data by index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indices</strong> (<em>Array</em><em> or </em><em>array-like</em>)  The indices of row to select in the dataset.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  <p>The columns to project. This can be a list of column names to
include (order and duplicates will be preserved), or a dictionary
with {new_column_name: expression} values for more advanced
projections.</p>
<p>The list of columns or expressions may use the special fields
<cite>__batch_index</cite> (the index of the batch within the fragment),
<cite>__fragment_index</cite> (the index of the fragment within the dataset),
<cite>__last_in_fragment</cite> (whether the batch is last in fragment), and
<cite>__filename</cite> (the name of the source file or a description of the
source fragment).</p>
<p>The columns will be passed down to Datasets and corresponding data
fragments to avoid loading, copying, and deserializing columns
that will not be required further down the compute chain.
By default all of the available columns are projected. Raises
an exception if any of the referenced column names does not exist
in the datasets Schema.</p>
</p></li>
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.to_batches">
<span class="sig-name descname"><span class="pre">to_batches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Schema</span> <span class="pre">schema=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceFragment.to_batches" title="Link to this definition"></a></dt>
<dd><p>Read the fragment as materialized record batches.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema</strong> (<em>Schema</em><em>, </em><em>optional</em>)  Concrete schema to use for scanning.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  <p>The columns to project. This can be a list of column names to
include (order and duplicates will be preserved), or a dictionary
with {new_column_name: expression} values for more advanced
projections.</p>
<p>The list of columns or expressions may use the special fields
<cite>__batch_index</cite> (the index of the batch within the fragment),
<cite>__fragment_index</cite> (the index of the fragment within the dataset),
<cite>__last_in_fragment</cite> (whether the batch is last in fragment), and
<cite>__filename</cite> (the name of the source file or a description of the
source fragment).</p>
<p>The columns will be passed down to Datasets and corresponding data
fragments to avoid loading, copying, and deserializing columns
that will not be required further down the compute chain.
By default all of the available columns are projected. Raises
an exception if any of the referenced column names does not exist
in the datasets Schema.</p>
</p></li>
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>record_batches</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>iterator of RecordBatch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceFragment.to_table">
<span class="sig-name descname"><span class="pre">to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Schema</span> <span class="pre">schema=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceFragment.to_table" title="Link to this definition"></a></dt>
<dd><p>Convert this Fragment into a Table.</p>
<p>Use this convenience utility with care. This will serially materialize
the Scan result in memory before creating the Table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema</strong> (<em>Schema</em><em>, </em><em>optional</em>)  Concrete schema to use for scanning.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  <p>The columns to project. This can be a list of column names to
include (order and duplicates will be preserved), or a dictionary
with {new_column_name: expression} values for more advanced
projections.</p>
<p>The list of columns or expressions may use the special fields
<cite>__batch_index</cite> (the index of the batch within the fragment),
<cite>__fragment_index</cite> (the index of the fragment within the dataset),
<cite>__last_in_fragment</cite> (whether the batch is last in fragment), and
<cite>__filename</cite> (the name of the source file or a description of the
source fragment).</p>
<p>The columns will be passed down to Datasets and corresponding data
fragments to avoid loading, copying, and deserializing columns
that will not be required further down the compute chain.
By default all of the available columns are projected. Raises
an exception if any of the referenced column names does not exist
in the datasets Schema.</p>
</p></li>
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>table</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Table</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">LanceOperation</span></span><a class="headerlink" href="#lance.LanceOperation" title="Link to this definition"></a></dt>
<dd><dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.Append">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.Append" title="Link to this definition"></a></dt>
<dd><p>Append new rows to the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Append.fragments">
<span class="sig-name descname"><span class="pre">fragments</span></span><a class="headerlink" href="#lance.LanceOperation.Append.fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that contain the new rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API for distributed operations. To append to a
dataset on a single machine, use <a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">lance.write_dataset()</span></code></a>.</p>
</div>
<p class="rubric">Examples</p>
<p>To append new rows to a dataset, first use
<a class="reference internal" href="#lance.fragment.LanceFragment.create" title="lance.fragment.LanceFragment.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.fragment.LanceFragment.create()</span></code></a> to create fragments. Then
collect the fragment metadata into a list and pass it to this class.
Finally, pass the operation to the <a class="reference internal" href="#lance.LanceDataset.commit" title="lance.LanceDataset.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceDataset.commit()</span></code></a>
method to create the new dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab1</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">tab1</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab2</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Append</span><span class="p">([</span><span class="n">fragment</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">read_version</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id10">
<span class="sig-name descname"><span class="pre">fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id10" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.BaseOperation">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BaseOperation</span></span><a class="headerlink" href="#lance.LanceOperation.BaseOperation" title="Link to this definition"></a></dt>
<dd><p>Base class for operations that can be applied to a dataset.</p>
<p>See available operations under <a class="reference internal" href="#lance.LanceOperation" title="lance.LanceOperation"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceOperation</span></code></a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.CreateIndex">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CreateIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.13)"><span class="pre">Set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">created_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.13)"><span class="pre">datetime</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.CreateIndex" title="Link to this definition"></a></dt>
<dd><p>Operation that creates an index on the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.CreateIndex.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.13)"><span class="pre">datetime</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lance.LanceOperation.CreateIndex.created_at" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.CreateIndex.dataset_version">
<span class="sig-name descname"><span class="pre">dataset_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.LanceOperation.CreateIndex.dataset_version" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.CreateIndex.fields">
<span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.LanceOperation.CreateIndex.fields" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.CreateIndex.fragment_ids">
<span class="sig-name descname"><span class="pre">fragment_ids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.13)"><span class="pre">Set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.LanceOperation.CreateIndex.fragment_ids" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.CreateIndex.index_version">
<span class="sig-name descname"><span class="pre">index_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.LanceOperation.CreateIndex.index_version" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.CreateIndex.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.LanceOperation.CreateIndex.name" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.CreateIndex.uuid">
<span class="sig-name descname"><span class="pre">uuid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.LanceOperation.CreateIndex.uuid" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.DataReplacement">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DataReplacement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">replacements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.DataReplacementGroup" title="lance.dataset.LanceOperation.DataReplacementGroup"><span class="pre">DataReplacementGroup</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.DataReplacement" title="Link to this definition"></a></dt>
<dd><p>Operation that replaces existing datafiles in the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.DataReplacement.replacements">
<span class="sig-name descname"><span class="pre">replacements</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.DataReplacementGroup" title="lance.dataset.LanceOperation.DataReplacementGroup"><span class="pre">DataReplacementGroup</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.LanceOperation.DataReplacement.replacements" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.DataReplacementGroup">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DataReplacementGroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.DataReplacementGroup" title="Link to this definition"></a></dt>
<dd><p>Group of data replacements</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.DataReplacementGroup.fragment_id">
<span class="sig-name descname"><span class="pre">fragment_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.LanceOperation.DataReplacementGroup.fragment_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.DataReplacementGroup.new_file">
<span class="sig-name descname"><span class="pre">new_file</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a></em><a class="headerlink" href="#lance.LanceOperation.DataReplacementGroup.new_file" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.Delete">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">updated_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deleted_fragment_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.Delete" title="Link to this definition"></a></dt>
<dd><p>Remove fragments or rows from the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Delete.updated_fragments">
<span class="sig-name descname"><span class="pre">updated_fragments</span></span><a class="headerlink" href="#lance.LanceOperation.Delete.updated_fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that have been updated with new deletion vectors.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Delete.deleted_fragment_ids">
<span class="sig-name descname"><span class="pre">deleted_fragment_ids</span></span><a class="headerlink" href="#lance.LanceOperation.Delete.deleted_fragment_ids" title="Link to this definition"></a></dt>
<dd><p>The ids of the fragments that have been deleted entirely. These are
the fragments where <a class="reference internal" href="#lance.LanceFragment.delete" title="lance.LanceFragment.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceFragment.delete()</span></code></a> returned None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Delete.predicate">
<span class="sig-name descname"><span class="pre">predicate</span></span><a class="headerlink" href="#lance.LanceOperation.Delete.predicate" title="Link to this definition"></a></dt>
<dd><p>The original SQL predicate used to select the rows to delete.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API for distributed operations. To delete rows from
dataset on a single machine, use <a class="reference internal" href="#lance.LanceDataset.delete" title="lance.LanceDataset.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.LanceDataset.delete()</span></code></a>.</p>
</div>
<p class="rubric">Examples</p>
<p>To delete rows from a dataset, call <a class="reference internal" href="#lance.fragment.LanceFragment.delete" title="lance.fragment.LanceFragment.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.fragment.LanceFragment.delete()</span></code></a>
on each of the fragments. If that returns a new fragment, add that to
the <code class="docutils literal notranslate"><span class="pre">updated_fragments</span></code> list. If it returns None, that means the whole
fragment was deleted, so add the fragment id to the <code class="docutils literal notranslate"><span class="pre">deleted_fragment_ids</span></code>.
Finally, pass the operation to the <a class="reference internal" href="#lance.LanceDataset.commit" title="lance.LanceDataset.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceDataset.commit()</span></code></a> method to
complete the deletion operation.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;append&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">predicate</span> <span class="o">=</span> <span class="s2">&quot;a &gt;= 2&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">updated_fragments</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deleted_fragment_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">fragment</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_fragments</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">new_fragment</span> <span class="o">=</span> <span class="n">fragment</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">predicate</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">new_fragment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">updated_fragments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_fragment</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">deleted_fragment_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fragment</span><span class="o">.</span><span class="n">fragment_id</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Delete</span><span class="p">(</span><span class="n">updated_fragments</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">deleted_fragment_ids</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">predicate</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">read_version</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id11">
<span class="sig-name descname"><span class="pre">deleted_fragment_ids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id11" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id12">
<span class="sig-name descname"><span class="pre">predicate</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#id12" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id13">
<span class="sig-name descname"><span class="pre">updated_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id13" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.Merge">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LanceSchema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.Merge" title="Link to this definition"></a></dt>
<dd><p>Operation that adds columns. Unlike Overwrite, this should not change
the structure of the fragments, allowing existing indices to be kept.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Merge.fragments">
<span class="sig-name descname"><span class="pre">fragments</span></span><a class="headerlink" href="#lance.LanceOperation.Merge.fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that make up the new dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>iterable of <a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Merge.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#lance.LanceOperation.Merge.schema" title="Link to this definition"></a></dt>
<dd><p>The schema of the new dataset. Passing a LanceSchema is preferred,
and passing a pyarrow.Schema is deprecated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>LanceSchema or <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)">pyarrow.Schema</a></p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API for distributed operations. To overwrite or
create new dataset on a single machine, use <a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">lance.write_dataset()</span></code></a>.</p>
</div>
<p class="rubric">Examples</p>
<p>To add new columns to a dataset, first define a method that will create
the new columns based on the existing columns. Then use
<code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.fragment.LanceFragment.add_columns()</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow.compute</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">double_a</span><span class="p">(</span><span class="n">batch</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">RecordBatch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">RecordBatch</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">doubled</span> <span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">record_batch</span><span class="p">([</span><span class="n">doubled</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;a_doubled&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragments</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">fragment</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_fragments</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">new_fragment</span><span class="p">,</span> <span class="n">new_schema</span> <span class="o">=</span> <span class="n">fragment</span><span class="o">.</span><span class="n">merge_columns</span><span class="p">(</span><span class="n">double_a</span><span class="p">,</span>
<span class="gp">... </span>                                                      <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">fragments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_fragment</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Merge</span><span class="p">(</span><span class="n">fragments</span><span class="p">,</span> <span class="n">new_schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">read_version</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b  a_doubled</span>
<span class="go">0  1  a          2</span>
<span class="go">1  2  b          4</span>
<span class="go">2  3  c          6</span>
<span class="go">3  4  d          8</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id14">
<span class="sig-name descname"><span class="pre">fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id14" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id15">
<span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LanceSchema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#id15" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.Overwrite">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Overwrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LanceSchema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.Overwrite" title="Link to this definition"></a></dt>
<dd><p>Overwrite or create a new dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Overwrite.new_schema">
<span class="sig-name descname"><span class="pre">new_schema</span></span><a class="headerlink" href="#lance.LanceOperation.Overwrite.new_schema" title="Link to this definition"></a></dt>
<dd><p>The schema of the new dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)">pyarrow.Schema</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Overwrite.fragments">
<span class="sig-name descname"><span class="pre">fragments</span></span><a class="headerlink" href="#lance.LanceOperation.Overwrite.fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that make up the new dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API for distributed operations. To overwrite or
create new dataset on a single machine, use <a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">lance.write_dataset()</span></code></a>.</p>
</div>
<p class="rubric">Examples</p>
<p>To create or overwrite a dataset, first use
<a class="reference internal" href="#lance.fragment.LanceFragment.create" title="lance.fragment.LanceFragment.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.fragment.LanceFragment.create()</span></code></a> to create fragments. Then
collect the fragment metadata into a list and pass it along with the
schema to this class. Finally, pass the operation to the
<a class="reference internal" href="#lance.LanceDataset.commit" title="lance.LanceDataset.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceDataset.commit()</span></code></a> method to create the new dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab1</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab2</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment1</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment2</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragments</span> <span class="o">=</span> <span class="p">[</span><span class="n">fragment1</span><span class="p">,</span> <span class="n">fragment2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Overwrite</span><span class="p">(</span><span class="n">tab1</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="n">fragments</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id16">
<span class="sig-name descname"><span class="pre">fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id16" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id17">
<span class="sig-name descname"><span class="pre">new_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LanceSchema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#id17" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.Project">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LanceSchema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.Project" title="Link to this definition"></a></dt>
<dd><p>Operation that project columns.
Use this operator for drop column or rename/swap column.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Project.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#lance.LanceOperation.Project.schema" title="Link to this definition"></a></dt>
<dd><p>The lance schema of the new dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>LanceSchema</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Examples</p>
<p>Use the projece operator to swap column:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow.compute</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">lance.schema</span><span class="w"> </span><span class="kn">import</span> <span class="n">LanceSchema</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="s2">&quot;b1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b b1</span>
<span class="go">0  1  a  c</span>
<span class="go">1  2  b  d</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">## rename column `b` into `b0` and rename b1 into `b`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b0&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lance_schema</span> <span class="o">=</span> <span class="n">LanceSchema</span><span class="o">.</span><span class="n">from_pyarrow</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Project</span><span class="p">(</span><span class="n">lance_schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">read_version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a b0  b</span>
<span class="go">0  1  a  c</span>
<span class="go">1  2  b  d</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id18">
<span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LanceSchema</span></em><a class="headerlink" href="#id18" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.Restore">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Restore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.Restore" title="Link to this definition"></a></dt>
<dd><p>Operation that restores a previous version of the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Restore.version">
<span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.LanceOperation.Restore.version" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.Rewrite">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Rewrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">groups</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.RewriteGroup" title="lance.dataset.LanceOperation.RewriteGroup"><span class="pre">RewriteGroup</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rewritten_indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.RewrittenIndex" title="lance.dataset.LanceOperation.RewrittenIndex"><span class="pre">RewrittenIndex</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.Rewrite" title="Link to this definition"></a></dt>
<dd><p>Operation that rewrites one or more files and indices into one
or more files and indices.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Rewrite.groups">
<span class="sig-name descname"><span class="pre">groups</span></span><a class="headerlink" href="#lance.LanceOperation.Rewrite.groups" title="Link to this definition"></a></dt>
<dd><p>Groups of files that have been rewritten.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.LanceOperation.RewriteGroup" title="lance.LanceOperation.RewriteGroup">RewriteGroup</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Rewrite.rewritten_indices">
<span class="sig-name descname"><span class="pre">rewritten_indices</span></span><a class="headerlink" href="#lance.LanceOperation.Rewrite.rewritten_indices" title="Link to this definition"></a></dt>
<dd><p>Indices that have been rewritten.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.LanceOperation.RewrittenIndex" title="lance.LanceOperation.RewrittenIndex">RewrittenIndex</a>]</p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API not intended for general use.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id19">
<span class="sig-name descname"><span class="pre">groups</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.RewriteGroup" title="lance.dataset.LanceOperation.RewriteGroup"><span class="pre">RewriteGroup</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id19" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id20">
<span class="sig-name descname"><span class="pre">rewritten_indices</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.RewrittenIndex" title="lance.dataset.LanceOperation.RewrittenIndex"><span class="pre">RewrittenIndex</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id20" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.RewriteGroup">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RewriteGroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.RewriteGroup" title="Link to this definition"></a></dt>
<dd><p>Collection of rewritten files</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.RewriteGroup.new_fragments">
<span class="sig-name descname"><span class="pre">new_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.LanceOperation.RewriteGroup.new_fragments" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.RewriteGroup.old_fragments">
<span class="sig-name descname"><span class="pre">old_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.LanceOperation.RewriteGroup.old_fragments" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.RewrittenIndex">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RewrittenIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.RewrittenIndex" title="Link to this definition"></a></dt>
<dd><p>An index that has been rewritten</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.RewrittenIndex.new_id">
<span class="sig-name descname"><span class="pre">new_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.LanceOperation.RewrittenIndex.new_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.RewrittenIndex.old_id">
<span class="sig-name descname"><span class="pre">old_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.LanceOperation.RewrittenIndex.old_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceOperation.Update">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">removed_fragment_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updated_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields_modified</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceOperation.Update" title="Link to this definition"></a></dt>
<dd><p>Operation that updates rows in the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Update.removed_fragment_ids">
<span class="sig-name descname"><span class="pre">removed_fragment_ids</span></span><a class="headerlink" href="#lance.LanceOperation.Update.removed_fragment_ids" title="Link to this definition"></a></dt>
<dd><p>The ids of the fragments that have been removed entirely.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Update.updated_fragments">
<span class="sig-name descname"><span class="pre">updated_fragments</span></span><a class="headerlink" href="#lance.LanceOperation.Update.updated_fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that have been updated with new deletion vectors.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Update.new_fragments">
<span class="sig-name descname"><span class="pre">new_fragments</span></span><a class="headerlink" href="#lance.LanceOperation.Update.new_fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that contain the new rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.LanceOperation.Update.fields_modified">
<span class="sig-name descname"><span class="pre">fields_modified</span></span><a class="headerlink" href="#lance.LanceOperation.Update.fields_modified" title="Link to this definition"></a></dt>
<dd><p>If any fields are modified in updated_fragments, then they must be
listed here so those fragments can be removed from indices covering
those fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id21">
<span class="sig-name descname"><span class="pre">fields_modified</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id21" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id22">
<span class="sig-name descname"><span class="pre">new_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id22" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id23">
<span class="sig-name descname"><span class="pre">removed_fragment_ids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id23" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id24">
<span class="sig-name descname"><span class="pre">updated_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id24" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.LanceScanner">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">LanceScanner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scanner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_Scanner</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.analyze_plan">
<span class="sig-name descname"><span class="pre">analyze_plan</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#lance.LanceScanner.analyze_plan" title="Link to this definition"></a></dt>
<dd><p>Execute the plan for this scanner and display with runtime metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  Use a verbose output format.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>plan</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.count_rows">
<span class="sig-name descname"><span class="pre">count_rows</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner.count_rows" title="Link to this definition"></a></dt>
<dd><p>Count rows matching the scanner filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>count</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceScanner.dataset_schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dataset_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.LanceScanner.dataset_schema" title="Link to this definition"></a></dt>
<dd><p>The schema with which batches will be read from fragments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.explain_plan">
<span class="sig-name descname"><span class="pre">explain_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#lance.LanceScanner.explain_plan" title="Link to this definition"></a></dt>
<dd><p>Return the execution plan for this scanner.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  Use a verbose output format.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>plan</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.from_batches">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_batches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner.from_batches" title="Link to this definition"></a></dt>
<dd><p>Not implemented</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.from_dataset">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner.from_dataset" title="Link to this definition"></a></dt>
<dd><p>Not implemented</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.from_fragment">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_fragment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner.from_fragment" title="Link to this definition"></a></dt>
<dd><p>Not implemented</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.head">
<span class="sig-name descname"><span class="pre">head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_rows</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner.head" title="Link to this definition"></a></dt>
<dd><p>Load the first N rows of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The number of rows to load.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.LanceScanner.projected_schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">projected_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.LanceScanner.projected_schema" title="Link to this definition"></a></dt>
<dd><p>The materialized schema of the data, accounting for projections.</p>
<p>This is the schema of any data returned from the scanner.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.scan_batches">
<span class="sig-name descname"><span class="pre">scan_batches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner.scan_batches" title="Link to this definition"></a></dt>
<dd><p>Consume a Scanner in record batches with corresponding fragments.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record_batches</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>iterator of TaggedRecordBatch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.take">
<span class="sig-name descname"><span class="pre">take</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner.take" title="Link to this definition"></a></dt>
<dd><p>Not implemented</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.to_batches">
<span class="sig-name descname"><span class="pre">to_batches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner.to_batches" title="Link to this definition"></a></dt>
<dd><p>Consume a Scanner in record batches.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record_batches</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>iterator of RecordBatch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.to_reader">
<span class="sig-name descname"><span class="pre">to_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.LanceScanner.to_reader" title="Link to this definition"></a></dt>
<dd><p>Consume this scanner as a RecordBatchReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>RecordBatchReader</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.LanceScanner.to_table">
<span class="sig-name descname"><span class="pre">to_table</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><span class="pre">Table</span></a></span></span><a class="headerlink" href="#lance.LanceScanner.to_table" title="Link to this definition"></a></dt>
<dd><p>Read the data into memory and return a pyarrow Table.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.MergeInsertBuilder">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">MergeInsertBuilder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.MergeInsertBuilder" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.MergeInsertBuilder.conflict_retries">
<span class="sig-name descname"><span class="pre">conflict_retries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.MergeInsertBuilder.conflict_retries" title="Link to this definition"></a></dt>
<dd><p>Set number of times to retry the operation if there is contention.</p>
<p>If this is set &gt; 0, then the operation will keep a copy of the input data
either in memory or on disk (depending on the size of the data) and will
retry the operation if there is contention.</p>
<p>Default is 10.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.MergeInsertBuilder.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.MergeInsertBuilder.execute" title="Link to this definition"></a></dt>
<dd><p>Executes the merge insert operation</p>
<p>This function updates the original dataset and returns a dictionary with
information about merge statistics - i.e. the number of inserted, updated,
and deleted rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>ReaderLike</em>)  The new data to use as the source table for the operation.  This parameter
can be any source of data (e.g. table / dataset) that
<a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a> accepts.</p></li>
<li><p><strong>schema</strong> (<em>Optional</em><em>[</em><em>pa.Schema</em><em>]</em>)  The schema of the data.  This only needs to be supplied whenever the data
source is some kind of generator.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.MergeInsertBuilder.execute_uncommitted">
<span class="sig-name descname"><span class="pre">execute_uncommitted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.Transaction" title="lance.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.MergeInsertBuilder.execute_uncommitted" title="Link to this definition"></a></dt>
<dd><p>Executes the merge insert operation without committing</p>
<p>This function updates the original dataset and returns a dictionary with
information about merge statistics - i.e. the number of inserted, updated,
and deleted rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>ReaderLike</em>)  The new data to use as the source table for the operation.  This parameter
can be any source of data (e.g. table / dataset) that
<a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a> accepts.</p></li>
<li><p><strong>schema</strong> (<em>Optional</em><em>[</em><em>pa.Schema</em><em>]</em>)  The schema of the data.  This only needs to be supplied whenever the data
source is some kind of generator.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.MergeInsertBuilder.retry_timeout">
<span class="sig-name descname"><span class="pre">retry_timeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.13)"><span class="pre">timedelta</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.MergeInsertBuilder.retry_timeout" title="Link to this definition"></a></dt>
<dd><p>Set the timeout used to limit retries.</p>
<p>This is the maximum time to spend on the operation before giving up. At
least one attempt will be made, regardless of how long it takes to complete.
Subsequent attempts will be cancelled once this timeout is reached. If
the timeout has been reached during the first attempt, the operation
will be cancelled immediately before making a second attempt.</p>
<p>The default is 30 seconds.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.MergeInsertBuilder.when_matched_update_all">
<span class="sig-name descname"><span class="pre">when_matched_update_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.MergeInsertBuilder.when_matched_update_all" title="Link to this definition"></a></dt>
<dd><p>Configure the operation to update matched rows</p>
<p>After this method is called, when the merge insert operation executes,
any rows that match both the source table and the target table will be
updated.  The rows from the target table will be removed and the rows
from the source table will be added.</p>
<p>An optional condition may be specified.  This should be an SQL filter
and, if present, then only matched rows that also satisfy this filter will
be updated.  The SQL filter should use the prefix <cite>target.</cite> to refer to
columns in the target table and the prefix <cite>source.</cite> to refer to columns
in the source table.  For example, <cite>source.last_update &lt; target.last_update</cite>.</p>
<p>If a condition is specified and rows do not satisfy the condition then these
rows will not be updated.  Failure to satisfy the filter does not cause
a matched row to become a not matched row.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.MergeInsertBuilder.when_not_matched_by_source_delete">
<span class="sig-name descname"><span class="pre">when_not_matched_by_source_delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.MergeInsertBuilder.when_not_matched_by_source_delete" title="Link to this definition"></a></dt>
<dd><p>Configure the operation to delete source rows that do not match</p>
<p>After this method is called, when the merge insert operation executes,
any rows that exist only in the target table will be deleted.  An
optional filter can be specified to limit the scope of the delete
operation.  If given (as an SQL filter) then only rows which match
the filter will be deleted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.MergeInsertBuilder.when_not_matched_insert_all">
<span class="sig-name descname"><span class="pre">when_not_matched_insert_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.MergeInsertBuilder.when_not_matched_insert_all" title="Link to this definition"></a></dt>
<dd><p>Configure the operation to insert not matched rows</p>
<p>After this method is called, when the merge insert operation executes,
any rows that exist only in the source table will be inserted into
the target table.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.ScanStatistics">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">ScanStatistics</span></span><a class="headerlink" href="#lance.ScanStatistics" title="Link to this definition"></a></dt>
<dd><p>Statistics about the scan.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.ScanStatistics.bytes_read">
<span class="sig-name descname"><span class="pre">bytes_read</span></span><a class="headerlink" href="#lance.ScanStatistics.bytes_read" title="Link to this definition"></a></dt>
<dd><p>Number of bytes read from disk</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.ScanStatistics.indices_loaded">
<span class="sig-name descname"><span class="pre">indices_loaded</span></span><a class="headerlink" href="#lance.ScanStatistics.indices_loaded" title="Link to this definition"></a></dt>
<dd><p>Number of indices loaded</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.ScanStatistics.iops">
<span class="sig-name descname"><span class="pre">iops</span></span><a class="headerlink" href="#lance.ScanStatistics.iops" title="Link to this definition"></a></dt>
<dd><p>Number of IO operations performed.  This may be slightly higher than
the actual number due to coalesced I/O</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.ScanStatistics.parts_loaded">
<span class="sig-name descname"><span class="pre">parts_loaded</span></span><a class="headerlink" href="#lance.ScanStatistics.parts_loaded" title="Link to this definition"></a></dt>
<dd><p>Number of index partitions loaded</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.Transaction">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">Transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">read_version:</span> <span class="pre">'int'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operation:</span> <span class="pre">'LanceOperation.BaseOperation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uuid:</span> <span class="pre">'str'</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blobs_op:</span> <span class="pre">'Optional[LanceOperation.BaseOperation]'</span> <span class="pre">=</span> <span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.Transaction" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.Transaction.blobs_op">
<span class="sig-name descname"><span class="pre">blobs_op</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceOperation.BaseOperation" title="lance.dataset.LanceOperation.BaseOperation"><span class="pre">BaseOperation</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lance.Transaction.blobs_op" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.Transaction.operation">
<span class="sig-name descname"><span class="pre">operation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceOperation.BaseOperation" title="lance.dataset.LanceOperation.BaseOperation"><span class="pre">BaseOperation</span></a></em><a class="headerlink" href="#lance.Transaction.operation" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.Transaction.read_version">
<span class="sig-name descname"><span class="pre">read_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.Transaction.read_version" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.Transaction.uuid">
<span class="sig-name descname"><span class="pre">uuid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.Transaction.uuid" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.batch_udf">
<span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">batch_udf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.batch_udf" title="Link to this definition"></a></dt>
<dd><p>Create a user defined function (UDF) that adds columns to a dataset.</p>
<p>This function is used to add columns to a dataset. It takes a function that
takes a single argument, a RecordBatch, and returns a RecordBatch. The
function is called once for each batch in the dataset. The function should
not modify the input batch, but instead create a new batch with the new
columns added.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_schema</strong> (<em>Schema</em><em>, </em><em>optional</em>)  The schema of the output RecordBatch. This is used to validate the
output of the function. If not provided, the schema of the first output
RecordBatch will be used.</p></li>
<li><p><strong>checkpoint_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>Path</em><em>, </em><em>optional</em>)  If specified, this file will be used as a cache for unsaved results of
this UDF. If the process fails, and you call add_columns again with this
same file, it will resume from the last saved state. This is useful for
long running processes that may fail and need to be resumed. This file
may get very large. It will hold up to an entire data files worth of
results on disk, which can be multiple gigabytes of data.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>AddColumnsUDF</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.bytes_read_counter">
<span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">bytes_read_counter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.bytes_read_counter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.dataset">
<span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asof</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ts_types</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_lock</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommitLock</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_cache_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_scan_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_cache_size_bytes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></span><a class="headerlink" href="#lance.dataset" title="Link to this definition"></a></dt>
<dd><p>Opens the Lance dataset from the address specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uri</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  Address to the Lance dataset. It can be a local file path <cite>/tmp/data.lance</cite>,
or a cloud object store URI, i.e., <cite>s3://bucket/data.lance</cite>.</p></li>
<li><p><strong>version</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  If specified, load a specific version of the Lance dataset. Else, loads the
latest version. A version number (<cite>int</cite>) or a tag (<cite>str</cite>) can be provided.</p></li>
<li><p><strong>asof</strong> (<em>optional</em><em>, </em><em>datetime</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  If specified, find the latest version created on or earlier than the given
argument value. If a version is already specified, this arg is ignored.</p></li>
<li><p><strong>block_size</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  Block size in bytes. Provide a hint for the size of the minimal I/O request.</p></li>
<li><p><strong>commit_lock</strong> (<em>optional</em><em>, </em><em>lance.commit.CommitLock</em>)  A custom commit lock.  Only needed if your object store does not support
atomic commits.  See the user guide for more details.</p></li>
<li><p><strong>index_cache_size</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  <p>Index cache size. Index cache is a LRU cache with TTL. This number specifies the
number of index pages, for example, IVF partitions, to be cached in
the host memory. Default value is <code class="docutils literal notranslate"><span class="pre">256</span></code>.</p>
<p>Roughly, for an <code class="docutils literal notranslate"><span class="pre">IVF_PQ</span></code> partition with <code class="docutils literal notranslate"><span class="pre">n</span></code> rows, the size of each index
page equals the combination of the pq code (<code class="docutils literal notranslate"><span class="pre">nd.array([n,pq],</span> <span class="pre">dtype=uint8))</span></code>
and the row ids (<code class="docutils literal notranslate"><span class="pre">nd.array([n],</span> <span class="pre">dtype=uint64)</span></code>).
Approximately, <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">Total</span> <span class="pre">Rows</span> <span class="pre">/</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">IVF</span> <span class="pre">partitions</span></code>.
<code class="docutils literal notranslate"><span class="pre">pq</span> <span class="pre">=</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">PQ</span> <span class="pre">sub-vectors</span></code>.</p>
</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>default_scan_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  <p>Default scan options that are used when scanning the dataset.  This accepts
the same arguments described in <a class="reference internal" href="#lance.LanceDataset.scanner" title="lance.LanceDataset.scanner"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.LanceDataset.scanner()</span></code></a>.  The
arguments will be applied to any scan operation.</p>
<p>This can be useful to supply defaults for common parameters such as
<code class="docutils literal notranslate"><span class="pre">batch_size</span></code>.</p>
<p>It can also be used to create a view of the dataset that includes meta
fields such as <code class="docutils literal notranslate"><span class="pre">_rowid</span></code> or <code class="docutils literal notranslate"><span class="pre">_rowaddr</span></code>.  If <code class="docutils literal notranslate"><span class="pre">default_scan_options</span></code> is
provided then the schema returned by <a class="reference internal" href="#lance.LanceDataset.schema" title="lance.LanceDataset.schema"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.LanceDataset.schema()</span></code></a> will
include these fields if the appropriate scan options are set.</p>
</p></li>
<li><p><strong>metadata_cache_size_bytes</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  Size of the metadata cache in bytes. This cache is used to store metadata
information about the dataset, such as schema and statistics. If not specified,
a default size will be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.iops_counter">
<span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">iops_counter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.iops_counter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.json_to_schema">
<span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">json_to_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema_json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></span></span><a class="headerlink" href="#lance.json_to_schema" title="Link to this definition"></a></dt>
<dd><p>Converts a JSON string to a PyArrow schema.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>schema_json</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>)  The JSON payload to convert to a PyArrow Schema.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.schema_to_json">
<span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">schema_to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.schema_to_json" title="Link to this definition"></a></dt>
<dd><p>Converts a pyarrow schema to a JSON string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.set_logger">
<span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">set_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pylance.log'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pylance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_handler</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.set_logger" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.write_dataset">
<span class="sig-prename descclassname"><span class="pre">lance.</span></span><span class="sig-name descname"><span class="pre">write_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'create'</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1048576</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bytes_per_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">96636764160</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_lock</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommitLock</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FragmentWriteProgress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_storage_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_legacy_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_v2_manifest_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_move_stable_row_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_cleanup_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.AutoCleanupConfig" title="lance.dataset.AutoCleanupConfig"><span class="pre">AutoCleanupConfig</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></span><a class="headerlink" href="#lance.write_dataset" title="Link to this definition"></a></dt>
<dd><p>Write a given data_obj to the given uri</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>Reader-like</em>)  The data to be written. Acceptable types are:
- Pandas DataFrame, Pyarrow Table, Dataset, Scanner, or RecordBatchReader
- Huggingface dataset</p></li>
<li><p><strong>uri</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Path</em><em>, or </em><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><em>LanceDataset</em></a>)  Where to write the dataset to (directory). If a LanceDataset is passed,
the session will be reused.</p></li>
<li><p><strong>schema</strong> (<em>Schema</em><em>, </em><em>optional</em>)  If specified and the input is a pandas DataFrame, use this schema
instead of the default pandas to arrow table conversion.</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  <strong>create</strong> - create a new dataset (raises if uri already exists).
<strong>overwrite</strong> - create a new snapshot version
<strong>append</strong> - create a new version that is the concat of the input and the
latest version, or a new dataset if uri doesnt exist.</p></li>
<li><p><strong>max_rows_per_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024 * 1024</em>)  The max number of rows to write before starting a new file</p></li>
<li><p><strong>max_rows_per_group</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024</em>)  The max number of rows before starting a new group (in the same file)</p></li>
<li><p><strong>max_bytes_per_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 90 * 1024 * 1024 * 1024</em>)  The max number of bytes to write before starting a new file. This is a
soft limit. This limit is checked after each group is written, which
means larger groups may cause this to be overshot meaningfully. This
defaults to 90 GB, since we have a hard limit of 100 GB per file on
object stores.</p></li>
<li><p><strong>commit_lock</strong> (<em>CommitLock</em><em>, </em><em>optional</em>)  A custom commit lock.  Only needed if your object store does not support
atomic commits.  See the user guide for more details.</p></li>
<li><p><strong>progress</strong> (<em>FragmentWriteProgress</em><em>, </em><em>optional</em>)  <em>Experimental API</em>. Progress tracking for writing the fragment. Pass
a custom class that defines hooks to be called when each fragment is
starting to write and finishing writing.</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>data_storage_version</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  The version of the data storage format to use. Newer versions are more
efficient but require newer versions of lance to read.  The default (None)
will use the latest stable version.  See the user guide for more details.</p></li>
<li><p><strong>use_legacy_format</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default None</em>)  Deprecated method for setting the data storage version. Use the
<cite>data_storage_version</cite> parameter instead.</p></li>
<li><p><strong>enable_v2_manifest_paths</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, and this is a new dataset, uses the new V2 manifest paths.
These paths provide more efficient opening of datasets with many
versions on object stores. This parameter has no effect if the dataset
already exists. To migrate an existing dataset, instead use the
<a class="reference internal" href="#lance.LanceDataset.migrate_manifest_paths_v2" title="lance.LanceDataset.migrate_manifest_paths_v2"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceDataset.migrate_manifest_paths_v2()</span></code></a> method. Default is False.</p></li>
<li><p><strong>enable_move_stable_row_ids</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  Experimental parameter: if set to true, the writer will use move-stable row ids.
These row ids are stable after compaction operations, but not after updates.
This makes compaction more efficient, since with stable row ids no
secondary indices need to be updated to point to new row ids.</p></li>
<li><p><strong>auto_cleanup_options</strong> (<em>optional</em><em>, </em><a class="reference internal" href="#lance.dataset.AutoCleanupConfig" title="lance.dataset.AutoCleanupConfig"><em>AutoCleanupConfig</em></a>)  Config options for automatic cleanup of the dataset.
If set, and this is a new dataset, old dataset versions will be automatically
cleaned up according to this parameter.
To add autocleaning to an existing dataset, use Dataset::update_config to set
lance.auto_cleanup.interval and lance.auto_cleanup.older_than.
Both parameters must be set to invoke autocleaning.
If you do not set this parameter(default behavior),
then no autocleaning will be performed.
Note: this option only takes effect when creating a new dataset,
it has no effect on existing datasets.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class" id="module-lance.dataset">
<dt class="sig sig-object py" id="lance.dataset.AlterColumn">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">AlterColumn</span></span><a class="headerlink" href="#lance.dataset.AlterColumn" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.AlterColumn.data_type">
<span class="sig-name descname"><span class="pre">data_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.DataType.html#pyarrow.DataType" title="(in Apache Arrow v20.0.0)"><span class="pre">DataType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#lance.dataset.AlterColumn.data_type" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.AlterColumn.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#lance.dataset.AlterColumn.name" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.AlterColumn.nullable">
<span class="sig-name descname"><span class="pre">nullable</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#lance.dataset.AlterColumn.nullable" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.AlterColumn.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.AlterColumn.path" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.AutoCleanupConfig">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">AutoCleanupConfig</span></span><a class="headerlink" href="#lance.dataset.AutoCleanupConfig" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.AutoCleanupConfig.interval">
<span class="sig-name descname"><span class="pre">interval</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.AutoCleanupConfig.interval" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.AutoCleanupConfig.older_than_seconds">
<span class="sig-name descname"><span class="pre">older_than_seconds</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.AutoCleanupConfig.older_than_seconds" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.BulkCommitResult">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">BulkCommitResult</span></span><a class="headerlink" href="#lance.dataset.BulkCommitResult" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.BulkCommitResult.dataset">
<span class="sig-name descname"><span class="pre">dataset</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></em><a class="headerlink" href="#lance.dataset.BulkCommitResult.dataset" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.BulkCommitResult.merged">
<span class="sig-name descname"><span class="pre">merged</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.Transaction" title="lance.dataset.Transaction"><span class="pre">Transaction</span></a></em><a class="headerlink" href="#lance.dataset.BulkCommitResult.merged" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.DataStatistics">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">DataStatistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.FieldStatistics" title="lance.dataset.FieldStatistics"><span class="pre">FieldStatistics</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.DataStatistics" title="Link to this definition"></a></dt>
<dd><p>Statistics about the data in the dataset</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.DataStatistics.fields">
<span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.FieldStatistics" title="lance.dataset.FieldStatistics"><span class="pre">FieldStatistics</span></a></em><a class="headerlink" href="#lance.dataset.DataStatistics.fields" title="Link to this definition"></a></dt>
<dd><p>Statistics about the fields in the dataset</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.DatasetOptimizer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">DatasetOptimizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.DatasetOptimizer" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.DatasetOptimizer.compact_files">
<span class="sig-name descname"><span class="pre">compact_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_rows_per_fragment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1048576</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bytes_per_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">materialize_deletions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">materialize_deletions_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CompactionMetrics</span></span></span><a class="headerlink" href="#lance.dataset.DatasetOptimizer.compact_files" title="Link to this definition"></a></dt>
<dd><p>Compacts small files in the dataset, reducing total number of files.</p>
<dl class="simple">
<dt>This does a few things:</dt><dd><ul class="simple">
<li><p>Removes deleted rows from fragments</p></li>
<li><p>Removes dropped columns from fragments</p></li>
<li><p>Merges small fragments into larger ones</p></li>
</ul>
</dd>
</dl>
<p>This method preserves the insertion order of the dataset. This may mean
it leaves small fragments in the dataset if they are not adjacent to
other fragments that need compaction. For example, if you have fragments
with row counts 5 million, 100, and 5 million, the middle fragment will
not be compacted because the fragments it is adjacent to do not need
compaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_rows_per_fragment</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024*1024</em>)  The target number of rows per fragment. This is the number of rows
that will be in each fragment after compaction.</p></li>
<li><p><strong>max_rows_per_group</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024</em>)  <p>Max number of rows per group. This does not affect which fragments
need compaction, but does affect how they are re-written if selected.</p>
<p>This setting only affects datasets using the legacy storage format.
The newer format does not require row groups.</p>
</p></li>
<li><p><strong>max_bytes_per_file</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>]</em><em>, </em><em>default None</em>)  <p>Max number of bytes in a single file.  This does not affect which
fragments need compaction, but does affect how they are re-written if
selected.  If this value is too small you may end up with fragments
that are smaller than <cite>target_rows_per_fragment</cite>.</p>
<p>The default will use the default from <code class="docutils literal notranslate"><span class="pre">write_dataset</span></code>.</p>
</p></li>
<li><p><strong>materialize_deletions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Whether to compact fragments with soft deleted rows so they are no
longer present in the file.</p></li>
<li><p><strong>materialize_deletions_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><em>default 0.1</em>)  The fraction of original rows that are soft deleted in a fragment
before the fragment is a candidate for compaction.</p></li>
<li><p><strong>num_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of threads to use when performing compaction. If not
specified, defaults to the number of cores on the machine.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  <p>The batch size to use when scanning input fragments.  You may want
to reduce this if you are running out of memory during compaction.</p>
<p>The default will use the same default from <code class="docutils literal notranslate"><span class="pre">scanner</span></code>.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Metrics about the compaction process</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>CompactionMetrics</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">lance.optimize.Compaction</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.DatasetOptimizer.disable_auto_cleanup">
<span class="sig-name descname"><span class="pre">disable_auto_cleanup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.DatasetOptimizer.disable_auto_cleanup" title="Link to this definition"></a></dt>
<dd><p>Disable autocleaning via delete related keys.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.DatasetOptimizer.enable_auto_cleanup">
<span class="sig-name descname"><span class="pre">enable_auto_cleanup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">auto_cleanup_config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.AutoCleanupConfig" title="lance.dataset.AutoCleanupConfig"><span class="pre">AutoCleanupConfig</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.DatasetOptimizer.enable_auto_cleanup" title="Link to this definition"></a></dt>
<dd><p>Enable autocleaning for an existing dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>auto_cleanup_config</strong> (<a class="reference internal" href="#lance.dataset.AutoCleanupConfig" title="lance.dataset.AutoCleanupConfig"><em>AutoCleanupConfig</em></a>)  Config options for automatic cleanup of the dataset.
If set, datasets old versions will be automatically
cleaned up according to this parameter.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.DatasetOptimizer.optimize_indices">
<span class="sig-name descname"><span class="pre">optimize_indices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.DatasetOptimizer.optimize_indices" title="Link to this definition"></a></dt>
<dd><p>Optimizes index performance.</p>
<p>As new data arrives it is not added to existing indexes automatically.
When searching we need to perform an indexed search of the old data plus
an expensive unindexed search on the new data.  As the amount of new
unindexed data grows this can have an impact on search latency.
This function will add the new data to existing indexes, restoring the
performance.  This function does not retrain the index, it only assigns
the new data to existing partitions.  This means an update is much quicker
than retraining the entire index but may have less accuracy (especially
if the new data exhibits new patterns, concepts, or trends)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_indices_to_merge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1</em>)  The number of indices to merge.
If set to 0, new delta index will be created.</p></li>
<li><p><strong>index_names</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>, </em><em>default None</em>)  The names of the indices to optimize.
If None, all indices will be optimized.</p></li>
<li><p><strong>retrain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  <p>Whether to retrain the whole index.
If true, the index will be retrained based on the current data,
<cite>num_indices_to_merge</cite> will be ignored,
and all indices will be merged into one.</p>
<p>This is useful when the data distribution has changed significantly,
and we want to retrain the index to improve the search quality.
This would be faster than re-create the index from scratch.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.DatasetStats">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">DatasetStats</span></span><a class="headerlink" href="#lance.dataset.DatasetStats" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.DatasetStats.num_deleted_rows">
<span class="sig-name descname"><span class="pre">num_deleted_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.DatasetStats.num_deleted_rows" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.DatasetStats.num_fragments">
<span class="sig-name descname"><span class="pre">num_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.DatasetStats.num_fragments" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.DatasetStats.num_small_files">
<span class="sig-name descname"><span class="pre">num_small_files</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.DatasetStats.num_small_files" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.ExecuteResult">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">ExecuteResult</span></span><a class="headerlink" href="#lance.dataset.ExecuteResult" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.ExecuteResult.num_deleted_rows">
<span class="sig-name descname"><span class="pre">num_deleted_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.ExecuteResult.num_deleted_rows" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.ExecuteResult.num_inserted_rows">
<span class="sig-name descname"><span class="pre">num_inserted_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.ExecuteResult.num_inserted_rows" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.ExecuteResult.num_updated_rows">
<span class="sig-name descname"><span class="pre">num_updated_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.ExecuteResult.num_updated_rows" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.FieldStatistics">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">FieldStatistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_on_disk</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.FieldStatistics" title="Link to this definition"></a></dt>
<dd><p>Statistics about a field in the dataset</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.FieldStatistics.bytes_on_disk">
<span class="sig-name descname"><span class="pre">bytes_on_disk</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.FieldStatistics.bytes_on_disk" title="Link to this definition"></a></dt>
<dd><p>(possibly compressed) bytes on disk used to store the field</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.FieldStatistics.id">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.FieldStatistics.id" title="Link to this definition"></a></dt>
<dd><p>id of the field</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.Index">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">Index</span></span><a class="headerlink" href="#lance.dataset.Index" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Index.fields">
<span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.dataset.Index.fields" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Index.fragment_ids">
<span class="sig-name descname"><span class="pre">fragment_ids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.13)"><span class="pre">Set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.dataset.Index.fragment_ids" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Index.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.Index.name" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Index.type">
<span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.Index.type" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Index.uuid">
<span class="sig-name descname"><span class="pre">uuid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.Index.uuid" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Index.version">
<span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.Index.version" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">LanceDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_cache_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_cache_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_lock</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommitLock</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serialized_manifest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_scan_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_cache_size_bytes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset" title="Link to this definition"></a></dt>
<dd><p>A Lance Dataset in Lance format where the data is stored at the given uri.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.add_columns">
<span class="sig-name descname"><span class="pre">add_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transforms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BatchUDF</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ReaderLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Field.html#pyarrow.Field" title="(in Apache Arrow v20.0.0)"><span class="pre">pyarrow.Field</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Field.html#pyarrow.Field" title="(in Apache Arrow v20.0.0)"><span class="pre">pyarrow.Field</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">pyarrow.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reader_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.add_columns" title="Link to this definition"></a></dt>
<dd><p>Add new columns with defined values.</p>
<p>There are several ways to specify the new columns. First, you can provide
SQL expressions for each new column. Second you can provide a UDF that
takes a batch of existing data and returns a new batch with the new
columns. These new columns will be appended to the dataset.</p>
<p>You can also provide a RecordBatchReader which will read the new column
values from some external source.  This is often useful when the new column
values have already been staged to files (often by some distributed process)</p>
<p>See the <code class="xref py py-func docutils literal notranslate"><span class="pre">lance.add_columns_udf()</span></code> decorator for more information on
writing UDFs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transforms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> or </em><em>AddColumnsUDF</em><em> or </em><em>ReaderLike</em>)  If this is a dictionary, then the keys are the names of the new
columns and the values are SQL expression strings. These strings can
reference existing columns in the dataset.
If this is a AddColumnsUDF, then it is a UDF that takes a batch of
existing data and returns a new batch with the new columns.
If this is <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Field.html#pyarrow.Field" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.Field</span></code></a> or <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.Schema</span></code></a>, it adds
all NULL columns with the given schema, in a metadata-only operation.</p></li>
<li><p><strong>read_columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  <p>The names of the columns that the UDF will read. If None, then the
UDF will read all columns. This is only used when transforms is a
UDF. Otherwise, the read columns are inferred from the SQL expressions.</p>
<p>This can include _rowid or _rowaddr to read the row id or row address
from the dataset.</p>
</p></li>
<li><p><strong>reader_schema</strong> (<em>pa.Schema</em><em>, </em><em>optional</em>)  Only valid if transforms is a <cite>ReaderLike</cite> object.  This will be used to
determine the schema of the reader.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of rows to read at a time from the source dataset when applying
the transform.  This is ignored if the dataset is a v1 dataset.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;my_dataset&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@lance</span><span class="o">.</span><span class="n">batch_udf</span><span class="p">()</span>
<span class="gp">... </span><span class="k">def</span><span class="w"> </span><span class="nf">double_a</span><span class="p">(</span><span class="n">batch</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">df</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;double_a&#39;</span><span class="p">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">add_columns</span><span class="p">(</span><span class="n">double_a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  double_a</span>
<span class="go">0  1         2</span>
<span class="go">1  2         4</span>
<span class="go">2  3         6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">add_columns</span><span class="p">({</span><span class="s2">&quot;triple_a&quot;</span><span class="p">:</span> <span class="s2">&quot;a * 3&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  double_a  triple_a</span>
<span class="go">0  1         2         3</span>
<span class="go">1  2         4         6</span>
<span class="go">2  3         6         9</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.dataset.LanceDataset.merge" title="lance.dataset.LanceDataset.merge"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LanceDataset.merge</span></code></a></dt><dd><p>Merge a pre-computed set of columns into the dataset.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.alter_columns">
<span class="sig-name descname"><span class="pre">alter_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">alterations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.AlterColumn" title="lance.dataset.AlterColumn"><span class="pre">AlterColumn</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.alter_columns" title="Link to this definition"></a></dt>
<dd><p>Alter column name, data type, and nullability.</p>
<p>Columns that are renamed can keep any indices that are on them. If a
column has an IVF_PQ index, it can be kept if the column is casted to
another type. However, other index types dont support casting at this
time.</p>
<p>Column types can be upcasted (such as int32 to int64) or downcasted
(such as int64 to int32). However, downcasting will fail if there are
any values that cannot be represented in the new type. In general,
columns can be casted to same general type: integers to integers,
floats to floats, and strings to strings. However, strings, binary, and
list columns can be casted between their size variants. For example,
string to large string, binary to large binary, and list to large list.</p>
<p>Columns that are renamed can keep any indices that are on them. However, if
the column is casted to a different type, its indices will be dropped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>alterations</strong> (<em>Iterable</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Any</em><em>]</em><em>]</em>)  <p>A sequence of dictionaries, each with the following keys:</p>
<ul class="simple">
<li><dl class="simple">
<dt>path: str</dt><dd><p>The column path to alter. For a top-level column, this is the name.
For a nested column, this is the dot-separated path, e.g. a.b.c.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>name: str, optional</dt><dd><p>The new name of the column. If not specified, the column name is
not changed.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nullable: bool, optional</dt><dd><p>Whether the column should be nullable. If not specified, the column
nullability is not changed. Only non-nullable columns can be changed
to nullable. Currently, you cannot change a nullable column to
non-nullable.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>data_type: pyarrow.DataType, optional</dt><dd><p>The new data type to cast the column to. If not specified, the column
data type is not changed.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">([</span><span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int64</span><span class="p">()),</span>
<span class="gp">... </span>                    <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">(),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">alter_columns</span><span class="p">({</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">},</span>
<span class="gp">... </span>                      <span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">alter_columns</span><span class="p">({</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;data_type&quot;</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">schema</span>
<span class="go">x: int32</span>
<span class="go">b: string</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.checkout_version">
<span class="sig-name descname"><span class="pre">checkout_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.checkout_version" title="Link to this definition"></a></dt>
<dd><p>Load the given version of the dataset.</p>
<p>Unlike the <code class="xref py py-func docutils literal notranslate"><span class="pre">dataset()</span></code> constructor, this will re-use the
current cache.
This is a no-op if the dataset is already at the given version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>version</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>,</em>)  The version to check out. A version number (<cite>int</cite>) or a tag
(<cite>str</cite>) can be provided.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset">LanceDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.cleanup_old_versions">
<span class="sig-name descname"><span class="pre">cleanup_old_versions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">older_than</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.13)"><span class="pre">timedelta</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_unverified</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_if_tagged_old_versions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CleanupStats</span></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.cleanup_old_versions" title="Link to this definition"></a></dt>
<dd><p>Cleans up old versions of the dataset.</p>
<p>Some dataset changes, such as overwriting, leave behind data that is not
referenced by the latest dataset version.  The old data is left in place
to allow the dataset to be restored back to an older version.</p>
<p>This method will remove older versions and any data files they reference.
Once this cleanup task has run you will not be able to checkout or restore
these older versions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>older_than</strong> (<em>timedelta</em><em>, </em><em>optional</em>)  Only versions older than this will be removed.  If not specified, this
will default to two weeks.</p></li>
<li><p><strong>delete_unverified</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  <p>Files leftover from a failed transaction may appear to be part of an
in-progress operation (e.g. appending new data) and these files will
not be deleted unless they are at least 7 days old.  If delete_unverified
is True then these files will be deleted regardless of their age.</p>
<p>This should only be set to True if you can guarantee that no other process
is currently working on this dataset.  Otherwise the dataset could be put
into a corrupted state.</p>
</p></li>
<li><p><strong>error_if_tagged_old_versions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Some versions may have tags associated with them. Tagged versions will
not be cleaned up, regardless of how old they are. If this argument
is set to <cite>True</cite> (the default), an exception will be raised if any
tagged versions match the parameters. Otherwise, tagged versions will
be ignored without any error and only untagged versions will be
cleaned up.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.commit">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">operation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.LanceOperation.BaseOperation" title="lance.dataset.LanceOperation.BaseOperation"><span class="pre">LanceOperation.BaseOperation</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.Transaction" title="lance.dataset.Transaction"><span class="pre">Transaction</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">blobs_op</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.LanceOperation.BaseOperation" title="lance.dataset.LanceOperation.BaseOperation"><span class="pre">LanceOperation.BaseOperation</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_lock</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommitLock</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_v2_manifest_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detached</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.commit" title="Link to this definition"></a></dt>
<dd><p>Create a new version of dataset</p>
<p>This method is an advanced method which allows users to describe a change
that has been made to the data files.  This method is not needed when using
Lance to apply changes (e.g. when using <a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceDataset</span></code></a> or
<a class="reference internal" href="#lance.dataset.write_dataset" title="lance.dataset.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a>.)</p>
<p>Its current purpose is to allow for changes being made in a distributed
environment where no single process is doing all of the work.  For example,
a distributed bulk update or a distributed bulk modify operation.</p>
<p>Once all of the changes have been made, this method can be called to make
the changes visible by updating the dataset manifest.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API and doesnt provide the same level of validation
as the other APIs. For example, its the responsibility of the caller to
ensure that the fragments are valid for the schema.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_uri</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Path</em><em>, or </em><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><em>LanceDataset</em></a>)  The base uri of the dataset, or the dataset object itself. Using
the dataset object can be more efficient because it can re-use the
file metadata cache.</p></li>
<li><p><strong>operation</strong> (<a class="reference internal" href="#lance.LanceOperation.BaseOperation" title="lance.LanceOperation.BaseOperation"><em>BaseOperation</em></a>)  The operation to apply to the dataset.  This describes what changes
have been made. See available operations under <a class="reference internal" href="#lance.dataset.LanceOperation" title="lance.dataset.LanceOperation"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceOperation</span></code></a>.</p></li>
<li><p><strong>read_version</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The version of the dataset that was used as the base for the changes.
This is not needed for overwrite or restore operations.</p></li>
<li><p><strong>commit_lock</strong> (<em>CommitLock</em><em>, </em><em>optional</em>)  A custom commit lock.  Only needed if your object store does not support
atomic commits.  See the user guide for more details.</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>enable_v2_manifest_paths</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, and this is a new dataset, uses the new V2 manifest paths.
These paths provide more efficient opening of datasets with many
versions on object stores. This parameter has no effect if the dataset
already exists. To migrate an existing dataset, instead use the
<a class="reference internal" href="#lance.dataset.LanceDataset.migrate_manifest_paths_v2" title="lance.dataset.LanceDataset.migrate_manifest_paths_v2"><code class="xref py py-meth docutils literal notranslate"><span class="pre">migrate_manifest_paths_v2()</span></code></a> method. Default is False. WARNING:
turning this on will make the dataset unreadable for older versions
of Lance (prior to 0.17.0).</p></li>
<li><p><strong>detached</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, then the commit will not be part of the dataset lineage.  It will
never show up as the latest dataset and the only way to check it out in the
future will be to specifically check it out by version.  The version will be
a random version that is only unique amongst detached commits.  The caller
should store this somewhere as there will be no other way to obtain it in
the future.</p></li>
<li><p><strong>max_retries</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The maximum number of retries to perform when committing the dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new version of Lance Dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset">LanceDataset</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Creating a new dataset with the <a class="reference internal" href="#lance.dataset.LanceOperation.Overwrite" title="lance.dataset.LanceOperation.Overwrite"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceOperation.Overwrite</span></code></a> operation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab1</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab2</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment1</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment2</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragments</span> <span class="o">=</span> <span class="p">[</span><span class="n">fragment1</span><span class="p">,</span> <span class="n">fragment2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Overwrite</span><span class="p">(</span><span class="n">tab1</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="n">fragments</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.commit_batch">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">commit_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">transactions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.Transaction" title="lance.dataset.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_lock</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommitLock</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_v2_manifest_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detached</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.BulkCommitResult" title="lance.dataset.BulkCommitResult"><span class="pre">BulkCommitResult</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.commit_batch" title="Link to this definition"></a></dt>
<dd><p>Create a new version of dataset with multiple transactions.</p>
<p>This method is an advanced method which allows users to describe a change
that has been made to the data files.  This method is not needed when using
Lance to apply changes (e.g. when using <a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceDataset</span></code></a> or
<a class="reference internal" href="#lance.dataset.write_dataset" title="lance.dataset.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a>.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Path</em><em>, or </em><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><em>LanceDataset</em></a>)  The base uri of the dataset, or the dataset object itself. Using
the dataset object can be more efficient because it can re-use the
file metadata cache.</p></li>
<li><p><strong>transactions</strong> (<em>Iterable</em><em>[</em><a class="reference internal" href="#lance.dataset.Transaction" title="lance.dataset.Transaction"><em>Transaction</em></a><em>]</em>)  The transactions to apply to the dataset. These will be merged into
a single transaction and applied to the dataset. Note: Only append
transactions are currently supported. Other transaction types will be
supported in the future.</p></li>
<li><p><strong>commit_lock</strong> (<em>CommitLock</em><em>, </em><em>optional</em>)  A custom commit lock.  Only needed if your object store does not support
atomic commits.  See the user guide for more details.</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>enable_v2_manifest_paths</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, and this is a new dataset, uses the new V2 manifest paths.
These paths provide more efficient opening of datasets with many
versions on object stores. This parameter has no effect if the dataset
already exists. To migrate an existing dataset, instead use the
<a class="reference internal" href="#lance.dataset.LanceDataset.migrate_manifest_paths_v2" title="lance.dataset.LanceDataset.migrate_manifest_paths_v2"><code class="xref py py-meth docutils literal notranslate"><span class="pre">migrate_manifest_paths_v2()</span></code></a> method. Default is False. WARNING:
turning this on will make the dataset unreadable for older versions
of Lance (prior to 0.17.0).</p></li>
<li><p><strong>detached</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, then the commit will not be part of the dataset lineage.  It will
never show up as the latest dataset and the only way to check it out in the
future will be to specifically check it out by version.  The version will be
a random version that is only unique amongst detached commits.  The caller
should store this somewhere as there will be no other way to obtain it in
the future.</p></li>
<li><p><strong>max_retries</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The maximum number of retries to perform when committing the dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>dataset: LanceDataset</dt><dd><p>A new version of Lance Dataset.</p>
</dd>
<dt>merged: Transaction</dt><dd><p>The merged transaction that was applied to the dataset.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict with keys</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.config">
<span class="sig-name descname"><span class="pre">config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.config" title="Link to this definition"></a></dt>
<dd><p>Get configs of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of configuration items.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.count_rows">
<span class="sig-name descname"><span class="pre">count_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.count_rows" title="Link to this definition"></a></dt>
<dd><p>Count rows matching the scanner filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  See py:method:<cite>scanner</cite> method for full parameter description.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>count</strong>  The total number of rows in the dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.create_index">
<span class="sig-name descname"><span class="pre">create_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'L2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_partitions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ivf_centroids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.FixedSizeListArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.FixedShapeTensorArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pq_codebook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.FixedSizeListArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.FixedShapeTensorArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_sub_vectors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accelerator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="s"><span class="pre">'torch.Device'</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_cache_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle_partition_batches</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle_partition_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ivf_centroids_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precomputed_partition_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_nan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one_pass_ivfpq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.create_index" title="Link to this definition"></a></dt>
<dd><p>Create index on column.</p>
<p><strong>Experimental API</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The column to be indexed.</p></li>
<li><p><strong>index_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The type of the index.
<code class="docutils literal notranslate"><span class="pre">&quot;IVF_PQ,</span> <span class="pre">IVF_HNSW_PQ</span> <span class="pre">and</span> <span class="pre">IVF_HNSW_SQ&quot;</span></code> are supported now.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  The index name. If not provided, it will be generated from the
column name.</p></li>
<li><p><strong>metric</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The distance metric type, i.e., L2 (alias to euclidean), cosine
or dot (dot product). Default is L2.</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>)  Replace the existing index if it exists.</p></li>
<li><p><strong>num_partitions</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of partitions of IVF (Inverted File Index).</p></li>
<li><p><strong>ivf_centroids</strong> (<em>optional</em>)  It can be either <code class="xref py py-class docutils literal notranslate"><span class="pre">np.ndarray</span></code>,
<a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.FixedSizeListArray.html#pyarrow.FixedSizeListArray" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.FixedSizeListArray</span></code></a> or
<a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.FixedShapeTensorArray.html#pyarrow.FixedShapeTensorArray" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.FixedShapeTensorArray</span></code></a>.
A <code class="docutils literal notranslate"><span class="pre">num_partitions</span> <span class="pre">x</span> <span class="pre">dimension</span></code> array of existing K-mean centroids
for IVF clustering. If not provided, a new KMeans model will be trained.</p></li>
<li><p><strong>pq_codebook</strong> (<em>optional</em><em>,</em>)  <p>It can be <code class="xref py py-class docutils literal notranslate"><span class="pre">np.ndarray</span></code>, <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.FixedSizeListArray.html#pyarrow.FixedSizeListArray" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.FixedSizeListArray</span></code></a>,
or <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.FixedShapeTensorArray.html#pyarrow.FixedShapeTensorArray" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.FixedShapeTensorArray</span></code></a>.
A <code class="docutils literal notranslate"><span class="pre">num_sub_vectors</span> <span class="pre">x</span> <span class="pre">(2</span> <span class="pre">^</span> <span class="pre">nbits</span> <span class="pre">*</span> <span class="pre">dimensions</span> <span class="pre">//</span> <span class="pre">num_sub_vectors)</span></code>
array of K-mean centroids for PQ codebook.</p>
<p>Note: <code class="docutils literal notranslate"><span class="pre">nbits</span></code> is always 8 for now.
If not provided, a new PQ model will be trained.</p>
</p></li>
<li><p><strong>num_sub_vectors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of sub-vectors for PQ (Product Quantization).</p></li>
<li><p><strong>accelerator</strong> (str or <code class="docutils literal notranslate"><span class="pre">torch.Device</span></code>, optional)  If set, use an accelerator to speed up the training process.
Accepted accelerator: cuda (Nvidia GPU) and mps (Apple Silicon GPU).
If not set, use the CPU.</p></li>
<li><p><strong>index_cache_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The size of the index cache in number of entries. Default value is 256.</p></li>
<li><p><strong>shuffle_partition_batches</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  <p>The number of batches, using the row group size of the dataset, to include
in each shuffle partition. Default value is 10240.</p>
<p>Assuming the row group size is 1024, each shuffle partition will hold
10240 * 1024 = 10,485,760 rows. By making this value smaller, this shuffle
will consume less memory but will take longer to complete, and vice versa.</p>
</p></li>
<li><p><strong>shuffle_partition_concurrency</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  <p>The number of shuffle partitions to process concurrently. Default value is 2</p>
<p>By making this value smaller, this shuffle will consume less memory but will
take longer to complete, and vice versa.</p>
</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>filter_nan</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>)  Defaults to True. False is UNSAFE, and will cause a crash if any null/nan
values are present (and otherwise will not). Disables the null filter used
for nullable columns. Obtains a small speed boost.</p></li>
<li><p><strong>one_pass_ivfpq</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>)  Defaults to False. If enabled, index type must be IVF_PQ. Reduces disk IO.</p></li>
<li><p><strong>kwargs</strong>  Parameters passed to the index building process.</p></li>
</ul>
</dd>
</dl>
<p>The SQ (Scalar Quantization) is available for only <code class="docutils literal notranslate"><span class="pre">IVF_HNSW_SQ</span></code> index type,
this quantization method is used to reduce the memory usage of the index,
it maps the float vectors to integer vectors, each integer is of <code class="docutils literal notranslate"><span class="pre">num_bits</span></code>,
now only 8 bits are supported.</p>
<dl class="simple">
<dt>If <code class="docutils literal notranslate"><span class="pre">index_type</span></code> is IVF_*, then the following parameters are required:</dt><dd><p>num_partitions</p>
</dd>
<dt>If <code class="docutils literal notranslate"><span class="pre">index_type</span></code> is with PQ, then the following parameters are required:</dt><dd><p>num_sub_vectors</p>
</dd>
</dl>
<p>Optional parameters for <cite>IVF_PQ</cite>:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>ivf_centroids</dt><dd><p>Existing K-mean centroids for IVF clustering.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>num_bits</dt><dd><p>The number of bits for PQ (Product Quantization). Default is 8.
Only 4, 8 are supported.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>index_file_version</dt><dd><p>The version of the index file. Default is V3.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Optional parameters for <cite>IVF_HNSW_*</cite>:</dt><dd><dl class="simple">
<dt>max_level</dt><dd><p>Int, the maximum number of levels in the graph.</p>
</dd>
<dt>m</dt><dd><p>Int, the number of edges per node in the graph.</p>
</dd>
<dt>ef_construction</dt><dd><p>Int, the number of nodes to examine during the construction.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/sift.lance&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span>
    <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="s2">&quot;IVF_PQ&quot;</span><span class="p">,</span>
    <span class="n">num_partitions</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
    <span class="n">num_sub_vectors</span><span class="o">=</span><span class="mi">16</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/sift.lance&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span>
    <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="s2">&quot;IVF_HNSW_SQ&quot;</span><span class="p">,</span>
    <span class="n">num_partitions</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Experimental Accelerator (GPU) support:</p>
<ul class="simple">
<li><dl class="simple">
<dt><em>accelerate</em>: use GPU to train IVF partitions.</dt><dd><p>Only supports CUDA (Nvidia) or MPS (Apple) currently.
Requires PyTorch being installed.</p>
</dd>
</dl>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/sift.lance&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span>
    <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="s2">&quot;IVF_PQ&quot;</span><span class="p">,</span>
    <span class="n">num_partitions</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
    <span class="n">num_sub_vectors</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">accelerator</span><span class="o">=</span><span class="s2">&quot;cuda&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p class="rubric">References</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/facebookresearch/faiss/wiki/Faiss-indexes">Faiss Index</a></p></li>
<li><p>IVF introduced in <a class="reference external" href="https://ieeexplore.ieee.org/abstract/document/1238663">Video Google: a text retrieval approach to object matching
in videos</a></p></li>
<li><p><a class="reference external" href="https://hal.inria.fr/inria-00514462v2/document">Product quantization for nearest neighbor search</a></p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.create_scalar_index">
<span class="sig-name descname"><span class="pre">create_scalar_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'BTREE'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'BITMAP'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'LABEL_LIST'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'INVERTED'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'FTS'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'NGRAM'</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.create_scalar_index" title="Link to this definition"></a></dt>
<dd><p>Create a scalar index on a column.</p>
<p>Scalar indices, like vector indices, can be used to speed up scans.  A scalar
index can speed up scans that contain filter expressions on the indexed column.
For example, the following scan will be faster if the column <code class="docutils literal notranslate"><span class="pre">my_col</span></code> has
a scalar index:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/images.lance&quot;</span><span class="p">)</span>
<span class="n">my_table</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">scanner</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;my_col != 7&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span>
</pre></div>
</div>
<p>Vector search with pre-filers can also benefit from scalar indices. For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/images.lance&quot;</span><span class="p">)</span>
<span class="n">my_table</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">scanner</span><span class="p">(</span>
    <span class="n">nearest</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
       <span class="n">column</span><span class="o">=</span><span class="s2">&quot;vector&quot;</span><span class="p">,</span>
       <span class="n">q</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
       <span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">filter</span><span class="o">=</span><span class="s2">&quot;my_col != 7&quot;</span><span class="p">,</span>
    <span class="n">prefilter</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
<p>There are 5 types of scalar indices available today.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BTREE</span></code>. The most common type is <code class="docutils literal notranslate"><span class="pre">BTREE</span></code>. This index is inspired
by the btree data structure although only the first few layers of the btree
are cached in memory.  It will
perform well on columns with a large number of unique values and few rows per
value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BITMAP</span></code>. This index stores a bitmap for each unique value in the column.
This index is useful for columns with a small number of unique values and
many rows per value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LABEL_LIST</span></code>. A special index that is used to index list
columns whose values have small cardinality.  For example, a column that
contains lists of tags (e.g. <code class="docutils literal notranslate"><span class="pre">[&quot;tag1&quot;,</span> <span class="pre">&quot;tag2&quot;,</span> <span class="pre">&quot;tag3&quot;]</span></code>) can be indexed
with a <code class="docutils literal notranslate"><span class="pre">LABEL_LIST</span></code> index.  This index can only speedup queries with
<code class="docutils literal notranslate"><span class="pre">array_has_any</span></code> or <code class="docutils literal notranslate"><span class="pre">array_has_all</span></code> filters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NGRAM</span></code>. A special index that is used to index string columns.  This index
creates a bitmap for each ngram in the string.  By default we use trigrams.
This index can currently speed up queries using the <code class="docutils literal notranslate"><span class="pre">contains</span></code> function
in filters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FTS/INVERTED</span></code>. It is used to index document columns. This index
can conduct full-text searches. For example, a column that contains any word
of query string hello world. The results will be ranked by BM25.</p></li>
</ul>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">LANCE_BYPASS_SPILLING</span></code> environment variable can be used to
bypass spilling to disk. Setting this to true can avoid memory exhaustion
issues (see <a class="reference external" href="https://github.com/apache/datafusion/issues/10073">https://github.com/apache/datafusion/issues/10073</a> for more info).</p>
<p><strong>Experimental API</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The column to be indexed.  Must be a boolean, integer, float,
or string column.</p></li>
<li><p><strong>index_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The type of the index.  One of <code class="docutils literal notranslate"><span class="pre">&quot;BTREE&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;BITMAP&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;LABEL_LIST&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;NGRAM&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;FTS&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;INVERTED&quot;</span></code>.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  The index name. If not provided, it will be generated from the
column name.</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Replace the existing index if it exists.</p></li>
<li><p><strong>with_position</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will store the
positions of the words in the document, so that you can conduct phrase
query. This will significantly increase the index size.
It wont impact the performance of non-phrase queries even if it is set to
True.</p></li>
<li><p><strong>base_tokenizer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default &quot;simple&quot;</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. The base tokenizer to use. The value
can be:
* simple: splits tokens on whitespace and punctuation.
* whitespace: splits tokens on whitespace.
* raw: no tokenization.</p></li>
<li><p><strong>language</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default &quot;English&quot;</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. The language for stemming
and stop words. This is only used when <cite>stem</cite> or <cite>remove_stop_words</cite> is true</p></li>
<li><p><strong>max_token_length</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>]</em><em>, </em><em>default 40</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. The maximum token length.
Any token longer than this will be removed.</p></li>
<li><p><strong>lower_case</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will convert all
text to lowercase.</p></li>
<li><p><strong>stem</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will stem the
tokens.</p></li>
<li><p><strong>remove_stop_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will remove
stop words.</p></li>
<li><p><strong>ascii_folding</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  This is for the <code class="docutils literal notranslate"><span class="pre">INVERTED</span></code> index. If True, the index will convert
non-ascii characters to ascii characters if possible.
This would remove accents like  -&gt; e.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;/tmp/images.lance&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span>
    <span class="s2">&quot;category&quot;</span><span class="p">,</span>
    <span class="s2">&quot;BTREE&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Scalar indices can only speed up scans for basic filters using
equality, comparison, range (e.g. <code class="docutils literal notranslate"><span class="pre">my_col</span> <span class="pre">BETWEEN</span> <span class="pre">0</span> <span class="pre">AND</span> <span class="pre">100</span></code>), and set
membership (e.g. <cite>my_col IN (0, 1, 2)</cite>)</p>
<p>Scalar indices can be used if the filter contains multiple indexed columns and
the filter criteria are ANDd or ORd together
(e.g. <code class="docutils literal notranslate"><span class="pre">my_col</span> <span class="pre">&lt;</span> <span class="pre">0</span> <span class="pre">AND</span> <span class="pre">other_col&gt;</span> <span class="pre">100</span></code>)</p>
<p>Scalar indices may be used if the filter contains non-indexed columns but,
depending on the structure of the filter, they may not be usable.  For example,
if the column <code class="docutils literal notranslate"><span class="pre">not_indexed</span></code> does not have a scalar index then the filter
<code class="docutils literal notranslate"><span class="pre">my_col</span> <span class="pre">=</span> <span class="pre">0</span> <span class="pre">OR</span> <span class="pre">not_indexed</span> <span class="pre">=</span> <span class="pre">1</span></code> will not be able to use any scalar index on
<code class="docutils literal notranslate"><span class="pre">my_col</span></code>.</p>
<p>To determine if a scan is making use of a scalar index you can use
<code class="docutils literal notranslate"><span class="pre">explain_plan</span></code> to look at the query plan that lance has created.  Queries
that use scalar indices will either have a <code class="docutils literal notranslate"><span class="pre">ScalarIndexQuery</span></code> relation or a
<code class="docutils literal notranslate"><span class="pre">MaterializeIndex</span></code> operator.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.data_storage_version">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data_storage_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.LanceDataset.data_storage_version" title="Link to this definition"></a></dt>
<dd><p>The version of the data storage format this dataset is using</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.delete" title="Link to this definition"></a></dt>
<dd><p>Delete rows from the dataset.</p>
<p>This marks rows as deleted, but does not physically remove them from the
files. This keeps the existing indexes still valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>predicate</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>pa.compute.Expression</em>)  The predicate to use to select rows to delete. May either be a SQL
string or a pyarrow Expression.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;a = 1 or b in (&#39;a&#39;, &#39;b&#39;)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span>
<span class="go">pyarrow.Table</span>
<span class="go">a: int64</span>
<span class="go">b: string</span>
<span class="go">----</span>
<span class="go">a: [[3]]</span>
<span class="go">b: [[&quot;c&quot;]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.delete_config_keys">
<span class="sig-name descname"><span class="pre">delete_config_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.delete_config_keys" title="Link to this definition"></a></dt>
<dd><p>Delete specified configuration keys from the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  A list of configuration keys to remove from the dataset.
Non-existent keys will be silently ignored.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.drop">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">drop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_not_found</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.drop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.drop_columns">
<span class="sig-name descname"><span class="pre">drop_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.drop_columns" title="Link to this definition"></a></dt>
<dd><p>Drop one or more columns from the dataset</p>
<p>This is a metadata-only operation and does not remove the data from the
underlying storage. In order to remove the data, you must subsequently
call <code class="docutils literal notranslate"><span class="pre">compact_files</span></code> to rewrite the data without the removed columns and
then call <code class="docutils literal notranslate"><span class="pre">cleanup_old_versions</span></code> to remove the old files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The names of the columns to drop. These can be nested column references
(e.g. a.b.c) or top-level column names (e.g. a).</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">drop_columns</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   b</span>
<span class="go">0  a</span>
<span class="go">1  b</span>
<span class="go">2  c</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.drop_index">
<span class="sig-name descname"><span class="pre">drop_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.drop_index" title="Link to this definition"></a></dt>
<dd><p>Drops an index from the dataset</p>
<p>Note: Indices are dropped by index name.  This is not the same as the field
name. If you did not specify a name when you created the index then a name was
generated for you.  You can use the <cite>list_indices</cite> method to get the names of
the indices.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.get_fragment">
<span class="sig-name descname"><span class="pre">get_fragment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.fragment.LanceFragment" title="lance.fragment.LanceFragment"><span class="pre">LanceFragment</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.get_fragment" title="Link to this definition"></a></dt>
<dd><p>Get the fragment with fragment id.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.get_fragments">
<span class="sig-name descname"><span class="pre">get_fragments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Expression</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.LanceFragment" title="lance.LanceFragment"><span class="pre">LanceFragment</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.get_fragments" title="Link to this definition"></a></dt>
<dd><p>Get all fragments from the dataset.</p>
<p>Note: filter is not supported yet.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.has_index">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_index</span></span><a class="headerlink" href="#lance.dataset.LanceDataset.has_index" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.head">
<span class="sig-name descname"><span class="pre">head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_rows</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.head" title="Link to this definition"></a></dt>
<dd><p>Load the first N rows of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The number of rows to load.</p></li>
<li><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  See scanner() method for full parameter description.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>table</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.index_statistics">
<span class="sig-name descname"><span class="pre">index_statistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.index_statistics" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'append'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.insert" title="Link to this definition"></a></dt>
<dd><p>Insert data into the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>Reader-like</em>)  The data to be written. Acceptable types are:
- Pandas DataFrame, Pyarrow Table, Dataset, Scanner, or RecordBatchReader
- Huggingface dataset</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default 'append'</em>)  <dl class="simple">
<dt>The mode to use when writing the data. Options are:</dt><dd><p><strong>create</strong> - create a new dataset (raises if uri already exists).
<strong>overwrite</strong> - create a new snapshot version
<strong>append</strong> - create a new version that is the concat of the input the
latest version (raises if uri does not exist)</p>
</dd>
</dl>
</p></li>
<li><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  Additional keyword arguments to pass to <a class="reference internal" href="#lance.dataset.write_dataset" title="lance.dataset.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.join">
<span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">right_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">join_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'left</span> <span class="pre">outer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coalesce_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.join" title="Link to this definition"></a></dt>
<dd><p>Not implemented (just override pyarrow dataset to prevent segfault)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.lance_schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lance_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LanceSchema</span></em><a class="headerlink" href="#lance.dataset.LanceDataset.lance_schema" title="Link to this definition"></a></dt>
<dd><p>The LanceSchema for this dataset</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.latest_version">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">latest_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.LanceDataset.latest_version" title="Link to this definition"></a></dt>
<dd><p>Returns the latest version of the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.list_indices">
<span class="sig-name descname"><span class="pre">list_indices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.Index" title="lance.dataset.Index"><span class="pre">Index</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.list_indices" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.max_field_id">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_field_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.LanceDataset.max_field_id" title="Link to this definition"></a></dt>
<dd><p>The max_field_id in manifest</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.merge">
<span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.merge" title="Link to this definition"></a></dt>
<dd><p>Merge another dataset into this one.</p>
<p>Performs a left join, where the dataset is the left side and data_obj
is the right side. Rows existing in the dataset but not on the left will
be filled with null values, unless Lance doesnt support null values for
some types, in which case an error will be raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>Reader-like</em>)  The data to be merged. Acceptable types are:
- Pandas DataFrame, Pyarrow Table, Dataset, Scanner,
Iterator[RecordBatch], or RecordBatchReader</p></li>
<li><p><strong>left_on</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the column in the dataset to join on.</p></li>
<li><p><strong>right_on</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>None</em>)  The name of the column in data_obj to join on. If None, defaults to
left_on.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;dataset&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  y</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_df</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  y  z</span>
<span class="go">0  1  a  d</span>
<span class="go">1  2  b  e</span>
<span class="go">2  3  c  f</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.dataset.LanceDataset.add_columns" title="lance.dataset.LanceDataset.add_columns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LanceDataset.add_columns</span></code></a></dt><dd><p>Add new columns by computing batch-by-batch.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.merge_insert">
<span class="sig-name descname"><span class="pre">merge_insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.merge_insert" title="Link to this definition"></a></dt>
<dd><p>Returns a builder that can be used to create a merge insert operation</p>
<p>This operation can add rows, update rows, and remove rows in a single
transaction. It is a very generic tool that can be used to create
behaviors like insert if not exists, update or insert (i.e. upsert),
or even replace a portion of existing data with new data (e.g. replace
all data where month=january)</p>
<p>The merge insert operation works by combining new data from a
<strong>source table</strong> with existing data in a <strong>target table</strong> by using a
join.  There are three categories of records.</p>
<p>Matched records are records that exist in both the source table and
the target table. Not matched records exist only in the source table
(e.g. these are new data). Not matched by source records exist only
in the target table (this is old data).</p>
<p>The builder returned by this method can be used to customize what
should happen for each category of data.</p>
<p>Please note that the data will be reordered as part of this
operation.  This is because updated rows will be deleted from the
dataset and then reinserted at the end with the new values.  The
order of the newly inserted rows may fluctuate randomly because a
hash-join operation is used internally.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>on</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>]</em>)  A column (or columns) to join on.  This is how records from the
source table and target table are matched.  Typically this is some
kind of key or id column.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Use <cite>when_matched_update_all()</cite> and <cite>when_not_matched_insert_all()</cite> to
perform an upsert operation.  This will update rows that already exist
in the dataset and insert rows that do not exist.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Perform a &quot;upsert&quot; operation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">merge_insert</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_matched_update_all</span><span class="p">()</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_not_matched_insert_all</span><span class="p">()</span> \
<span class="gp">... </span>            <span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">new_table</span><span class="p">)</span>
<span class="go">{&#39;num_inserted_rows&#39;: 1, &#39;num_updated_rows&#39;: 2, &#39;num_deleted_rows&#39;: 0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  b</span>
<span class="go">1  2  x</span>
<span class="go">2  3  y</span>
<span class="go">3  4  z</span>
</pre></div>
</div>
<p>Use <cite>when_not_matched_insert_all()</cite> to perform an insert if not exists
operation.  This will only insert rows that do not already exist in the
dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Perform an &quot;insert if not exists&quot; operation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">merge_insert</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_not_matched_insert_all</span><span class="p">()</span> \
<span class="gp">... </span>            <span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">new_table</span><span class="p">)</span>
<span class="go">{&#39;num_inserted_rows&#39;: 1, &#39;num_updated_rows&#39;: 0, &#39;num_deleted_rows&#39;: 0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  z</span>
</pre></div>
</div>
<p>You are not required to provide all the columns. If you only want to
update a subset of columns, you can omit columns you dont want to
update. Omitted columns will keep their existing values if they are
updated, or will be null if they are inserted.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> \
<span class="gp">... </span>                  <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Perform an &quot;upsert&quot; operation, only updating column &quot;a&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">merge_insert</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_matched_update_all</span><span class="p">()</span>     \
<span class="gp">... </span>            <span class="o">.</span><span class="n">when_not_matched_insert_all</span><span class="p">()</span> \
<span class="gp">... </span>            <span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">new_table</span><span class="p">)</span>
<span class="go">{&#39;num_inserted_rows&#39;: 1, &#39;num_updated_rows&#39;: 2, &#39;num_deleted_rows&#39;: 0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b     c</span>
<span class="go">0  1  a     x</span>
<span class="go">1  2  x     y</span>
<span class="go">2  3  y     z</span>
<span class="go">3  4  z  None</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.migrate_manifest_paths_v2">
<span class="sig-name descname"><span class="pre">migrate_manifest_paths_v2</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.migrate_manifest_paths_v2" title="Link to this definition"></a></dt>
<dd><p>Migrate the manifest paths to the new format.</p>
<p>This will update the manifest to use the new v2 format for paths.</p>
<p>This function is idempotent, and can be run multiple times without
changing the state of the object store.</p>
<p>DANGER: this should not be run while other concurrent operations are happening.
And it should also run until completion before resuming other operations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.optimize">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">optimize</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.DatasetOptimizer" title="lance.dataset.DatasetOptimizer"><span class="pre">DatasetOptimizer</span></a></em><a class="headerlink" href="#lance.dataset.LanceDataset.optimize" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.partition_expression">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partition_expression</span></span><a class="headerlink" href="#lance.dataset.LanceDataset.partition_expression" title="Link to this definition"></a></dt>
<dd><p>Not implemented (just override pyarrow dataset to prevent segfault)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.prewarm_index">
<span class="sig-name descname"><span class="pre">prewarm_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.prewarm_index" title="Link to this definition"></a></dt>
<dd><p>Prewarm an index</p>
<p>This will load the entire index into memory.  This can help avoid cold start
issues with index queries.  If the index does not fit in the index cache, then
this will result in wasted I/O.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the index to prewarm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.replace_field_metadata">
<span class="sig-name descname"><span class="pre">replace_field_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.replace_field_metadata" title="Link to this definition"></a></dt>
<dd><p>Replace the metadata of a field in the schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the field to replace the metadata for</p></li>
<li><p><strong>new_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  The new metadata to set</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.replace_schema">
<span class="sig-name descname"><span class="pre">replace_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.replace_schema" title="Link to this definition"></a></dt>
<dd><p>Not implemented (just override pyarrow dataset to prevent segfault)</p>
<p>See <a href="#id28"><span class="problematic" id="id29">:py:method:`replace_schema_metadata`</span></a> or <a href="#id30"><span class="problematic" id="id31">:py:method:`replace_field_metadata`</span></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.replace_schema_metadata">
<span class="sig-name descname"><span class="pre">replace_schema_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.replace_schema_metadata" title="Link to this definition"></a></dt>
<dd><p>Replace the schema metadata of the dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  The new metadata to set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.restore">
<span class="sig-name descname"><span class="pre">restore</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.restore" title="Link to this definition"></a></dt>
<dd><p>Restore the currently checked out version as the latest version of the dataset.</p>
<p>This creates a new commit.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.sample">
<span class="sig-name descname"><span class="pre">sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><span class="pre">Table</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.sample" title="Link to this definition"></a></dt>
<dd><p>Select a random sample of data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  number of rows to retrieve</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str default None</em>)  List of column names to be fetched.
Or a dictionary of column names to SQL expressions.
All columns are fetched if None or unspecified.</p></li>
<li><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  see scanner() method for full parameter description.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>table</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.scanner">
<span class="sig-name descname"><span class="pre">scanner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nearest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan_in_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.LanceFragment" title="lance.fragment.LanceFragment"><span class="pre">LanceFragment</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_text_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">FullTextQuery</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefilter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast_search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">io_buffer_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">late_materialization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_scalar_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_deleted_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan_stats_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.ScanStatistics" title="_lib.ScanStatistics"><span class="pre">ScanStatistics</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict_batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.LanceScanner" title="lance.dataset.LanceScanner"><span class="pre">LanceScanner</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.scanner" title="Link to this definition"></a></dt>
<dd><p>Return a Scanner that can support various pushdowns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str default None</em>)  List of column names to be fetched.
Or a dictionary of column names to SQL expressions.
All columns are fetched if None or unspecified.</p></li>
<li><p><strong>filter</strong> (<em>pa.compute.Expression</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  <p>Expression or str that is a valid SQL where clause. See
<a class="reference external" href="https://lancedb.github.io/lance/introduction/read_and_write.html#filter-push-down">Lance filter pushdown</a>
for valid SQL expressions.</p>
</p></li>
<li><p><strong>limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  Fetch up to this many rows. All rows if None or unspecified.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  Fetch starting with this row. 0 if None or unspecified.</p></li>
<li><p><strong>nearest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>default None</em>)  <p>Get the rows corresponding to the K most similar vectors. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">embedding</span> <span class="n">col</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">query</span> <span class="n">vector</span> <span class="k">as</span> <span class="n">pa</span><span class="o">.</span><span class="n">Float32Array</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;k&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;minimum_nprobes&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s2">&quot;maximum_nprobes&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">&quot;refine_factor&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  The target size of batches returned.  In some cases batches can be up to
twice this size (but never larger than this).  In some cases batches can
be smaller than this size.</p></li>
<li><p><strong>io_buffer_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  The size of the IO buffer.  See <code class="docutils literal notranslate"><span class="pre">ScannerBuilder.io_buffer_size</span></code>
for more information.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of batches to read ahead.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of fragments to read ahead.</p></li>
<li><p><strong>scan_in_order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Whether to read the fragments and batches in order. If false,
throughput may be higher, but batches will be returned out of order
and memory use might increase.</p></li>
<li><p><strong>fragments</strong> (<em>iterable</em><em> of </em><a class="reference internal" href="#lance.LanceFragment" title="lance.LanceFragment"><em>LanceFragment</em></a><em>, </em><em>default None</em>)  If specified, only scan these fragments. If scan_in_order is True, then
the fragments will be scanned in the order given.</p></li>
<li><p><strong>prefilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  <p>If True then the filter will be applied before the vector query is run.
This will generate more correct results but it may be a more costly
query.  Its generally good when the filter is highly selective.</p>
<p>If False then the filter will be applied after the vector query is run.
This will perform well but the results may have fewer than the requested
number of rows (or be empty) if the rows closest to the query do not
match the filter.  Its generally good when the filter is not very
selective.</p>
</p></li>
<li><p><strong>use_scalar_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Lance will automatically use scalar indices to optimize a query.  In some
corner cases this can make query performance worse and this parameter can
be used to disable scalar indices in these cases.</p></li>
<li><p><strong>late_materialization</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> or </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>, </em><em>default None</em>)  <p>Allows custom control over late materialization.  Late materialization
fetches non-query columns using a take operation after the filter.  This
is useful when there are few results or columns are very large.</p>
<p>Early materialization can be better when there are many results or the
columns are very narrow.</p>
<p>If True, then all columns are late materialized.
If False, then all columns are early materialized.
If a list of strings, then only the columns in the list are
late materialized.</p>
<p>The default uses a heuristic that assumes filters will select about 0.1%
of the rows.  If your filter is more selective (e.g. find by id) you may
want to set this to True.  If your filter is not very selective (e.g.
matches 20% of the rows) you may want to set this to False.</p>
</p></li>
<li><p><strong>full_text_query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  <p>query string to search for, the results will be ranked by BM25.
e.g. hello world, would match documents containing hello or world.
or a dictionary with the following keys:</p>
<ul>
<li><dl class="simple">
<dt>columns: list[str]</dt><dd><p>The columns to search,
currently only supports a single column in the columns list.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>query: str</dt><dd><p>The query string to search for.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>fast_search</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  If True, then the search will only be performed on the indexed data, which
yields faster search time.</p></li>
<li><p><strong>scan_stats_callback</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="#lance.ScanStatistics" title="lance.ScanStatistics"><em>ScanStatistics</em></a><em>]</em><em>, </em><em>None</em><em>]</em><em>, </em><em>default None</em>)  A callback function that will be called with the scan statistics after the
scan is complete.  Errors raised by the callback will be logged but not
re-raised.</p></li>
<li><p><strong>include_deleted_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  <p>If True, then rows that have been deleted, but are still present in the
fragment, will be returned.  These rows will have the _rowid column set
to null.  All other columns will reflect the value stored on disk and may
not be null.</p>
<p>Note: if this is a search operation, or a take operation (including scalar
indexed scans) then deleted rows cannot be returned.</p>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For now, if BOTH filter and nearest is specified, then:</p>
<ol class="arabic simple">
<li><p>nearest is executed first.</p></li>
<li><p>The results are filtered afterwards.</p></li>
</ol>
</div>
<p>For debugging ANN results, you can choose to not use the index
even if present by specifying <code class="docutils literal notranslate"><span class="pre">use_index=False</span></code>. For example,
the following will always return exact KNN results:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">(</span><span class="n">nearest</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="s2">&quot;k&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">query</span> <span class="n">vector</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;use_index&quot;</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.dataset.LanceDataset.schema" title="Link to this definition"></a></dt>
<dd><p>The pyarrow Schema for this dataset</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.session">
<span class="sig-name descname"><span class="pre">session</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_Session</span></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.session" title="Link to this definition"></a></dt>
<dd><p>Return the dataset session, which holds the datasets state.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.stats">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stats</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceStats" title="lance.dataset.LanceStats"><span class="pre">LanceStats</span></a></em><a class="headerlink" href="#lance.dataset.LanceDataset.stats" title="Link to this definition"></a></dt>
<dd><p><strong>Experimental API</strong></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.tags">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tags</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.Tags" title="lance.dataset.Tags"><span class="pre">Tags</span></a></em><a class="headerlink" href="#lance.dataset.LanceDataset.tags" title="Link to this definition"></a></dt>
<dd><p>Tag management for the dataset.</p>
<p>Similar to Git, tags are a way to add metadata to a specific version of the
dataset.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Tagged versions are exempted from the <a class="reference internal" href="#lance.dataset.LanceDataset.cleanup_old_versions" title="lance.dataset.LanceDataset.cleanup_old_versions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cleanup_old_versions()</span></code></a>
process.</p>
<p>To remove a version that has been tagged, you must first
<a class="reference internal" href="#lance.dataset.Tags.delete" title="lance.dataset.Tags.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete()</span></code></a> the associated tag.</p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;dataset.lance&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;v2-prod-20250203&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">tags</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.take">
<span class="sig-name descname"><span class="pre">take</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Array.html#pyarrow.Array" title="(in Apache Arrow v20.0.0)"><span class="pre">Array</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><span class="pre">Table</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.take" title="Link to this definition"></a></dt>
<dd><p>Select rows of data by index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indices</strong> (<em>Array</em><em> or </em><em>array-like</em>)  indices of rows to select in the dataset.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str default None</em>)  List of column names to be fetched.
Or a dictionary of column names to SQL expressions.
All columns are fetched if None or unspecified.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>table</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)">pyarrow.Table</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.take_blobs">
<span class="sig-name descname"><span class="pre">take_blobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blob_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Array.html#pyarrow.Array" title="(in Apache Arrow v20.0.0)"><span class="pre">Array</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addresses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Array.html#pyarrow.Array" title="(in Apache Arrow v20.0.0)"><span class="pre">Array</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Array.html#pyarrow.Array" title="(in Apache Arrow v20.0.0)"><span class="pre">Array</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.BlobFile" title="lance.blob.BlobFile"><span class="pre">BlobFile</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.take_blobs" title="Link to this definition"></a></dt>
<dd><p>Select blobs by row IDs.</p>
<p>Instead of loading large binary blob data into memory before processing it,
this API allows you to open binary blob data as a regular Python file-like
object. For more details, see <a class="reference internal" href="#lance.BlobFile" title="lance.BlobFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">lance.BlobFile</span></code></a>.</p>
<p>Exactly one of ids, addresses, or indices must be specified.
:param blob_column: The name of the blob column to select.
:type blob_column: str
:param ids: row IDs to select in the dataset.
:type ids: Integer Array or array-like
:param addresses: The (unstable) row addresses to select in the dataset.
:type addresses: Integer Array or array-like
:param indices: The offset / indices of the row in the dataset.
:type indices: Integer Array or array-like</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>blob_files</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="#lance.BlobFile" title="lance.BlobFile">BlobFile</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.to_batches">
<span class="sig-name descname"><span class="pre">to_batches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nearest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan_in_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefilter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_text_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">io_buffer_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">late_materialization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_scalar_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict_batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.RecordBatch.html#pyarrow.RecordBatch" title="(in Apache Arrow v20.0.0)"><span class="pre">RecordBatch</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.to_batches" title="Link to this definition"></a></dt>
<dd><p>Read the dataset as materialized record batches.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  Arguments for <a class="reference internal" href="#lance.dataset.LanceDataset.scanner" title="lance.dataset.LanceDataset.scanner"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scanner()</span></code></a>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>record_batches</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Iterator of <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.RecordBatch.html#pyarrow.RecordBatch" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RecordBatch</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.to_table">
<span class="sig-name descname"><span class="pre">to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nearest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan_in_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefilter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast_search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_text_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">FullTextQuery</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">io_buffer_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">late_materialization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_scalar_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_deleted_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><span class="pre">Table</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.to_table" title="Link to this definition"></a></dt>
<dd><p>Read the data into memory as a <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyarrow.Table</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str default None</em>)  List of column names to be fetched.
Or a dictionary of column names to SQL expressions.
All columns are fetched if None or unspecified.</p></li>
<li><p><strong>filter</strong> (<em>pa.compute.Expression</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  <p>Expression or str that is a valid SQL where clause. See
<a class="reference external" href="https://lancedb.github.io/lance/introduction/read_and_write.html#filter-push-down">Lance filter pushdown</a>
for valid SQL expressions.</p>
</p></li>
<li><p><strong>limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  Fetch up to this many rows. All rows if None or unspecified.</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  Fetch starting with this row. 0 if None or unspecified.</p></li>
<li><p><strong>nearest</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>default None</em>)  <p>Get the rows corresponding to the K most similar vectors. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">embedding</span> <span class="n">col</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">query</span> <span class="n">vector</span> <span class="k">as</span> <span class="n">pa</span><span class="o">.</span><span class="n">Float32Array</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;k&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;metric&quot;</span><span class="p">:</span> <span class="s2">&quot;cosine&quot;</span><span class="p">,</span>
    <span class="s2">&quot;minimum_nprobes&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s2">&quot;maximum_nprobes&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">&quot;refine_factor&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of rows to read at a time.</p></li>
<li><p><strong>io_buffer_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default None</em>)  The size of the IO buffer.  See <code class="docutils literal notranslate"><span class="pre">ScannerBuilder.io_buffer_size</span></code>
for more information.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of batches to read ahead.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  The number of fragments to read ahead.</p></li>
<li><p><strong>scan_in_order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default True</em>)  Whether to read the fragments and batches in order. If false,
throughput may be higher, but batches will be returned out of order
and memory use might increase.</p></li>
<li><p><strong>prefilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)  Run filter before the vector search.</p></li>
<li><p><strong>late_materialization</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> or </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>, </em><em>default None</em>)  Allows custom control over late materialization.  See
<code class="docutils literal notranslate"><span class="pre">ScannerBuilder.late_materialization</span></code> for more information.</p></li>
<li><p><strong>use_scalar_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  Allows custom control over scalar index usage.  See
<code class="docutils literal notranslate"><span class="pre">ScannerBuilder.use_scalar_index</span></code> for more information.</p></li>
<li><p><strong>with_row_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)  Return row ID.</p></li>
<li><p><strong>with_row_address</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)  Return row address</p></li>
<li><p><strong>use_stats</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default True</em>)  Use stats pushdown during filters.</p></li>
<li><p><strong>fast_search</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)</p></li>
<li><p><strong>full_text_query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>, </em><em>optional</em>)  <p>query string to search for, the results will be ranked by BM25.
e.g. hello world, would match documents contains hello or world.
or a dictionary with the following keys:</p>
<ul>
<li><dl class="simple">
<dt>columns: list[str]</dt><dd><p>The columns to search,
currently only supports a single column in the columns list.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>query: str</dt><dd><p>The query string to search for.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>include_deleted_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em><em>, </em><em>default False</em>)  <p>If True, then rows that have been deleted, but are still present in the
fragment, will be returned.  These rows will have the _rowid column set
to null.  All other columns will reflect the value stored on disk and may
not be null.</p>
<p>Note: if this is a search operation, or a take operation (including scalar
indexed scans) then deleted rows cannot be returned.</p>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If BOTH filter and nearest is specified, then:</p>
<ol class="arabic simple">
<li><p>nearest is executed first.</p></li>
<li><p>The results are filtered afterward, unless pre-filter sets to True.</p></li>
</ol>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">updates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">where</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conflict_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.13)"><span class="pre">timedelta</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">datetime.timedelta(seconds=30)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.UpdateResult" title="lance.dataset.UpdateResult"><span class="pre">UpdateResult</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.update" title="Link to this definition"></a></dt>
<dd><p>Update column values for rows matching where.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>updates</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str</em>)  A mapping of column names to a SQL expression.</p></li>
<li><p><strong>where</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  A SQL predicate indicating which rows should be updated.</p></li>
<li><p><strong>conflict_retries</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>optional</em>)  Number of times to retry the operation if there is contention.
Default is 10.</p></li>
<li><p><strong>retry_timeout</strong> (<em>timedelta</em><em>, </em><em>optional</em>)  The timeout used to limit retries. This is the maximum time to spend on
the operation before giving up. At least one attempt will be made,
regardless of how long it takes to complete. Subsequent attempts will be
cancelled once this timeout is reached. Default is 30 seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>updates</strong>  A dictionary containing the number of rows updated.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">update_stats</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;a + 2&#39;</span><span class="p">),</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;b != &#39;a&#39;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">update_stats</span><span class="p">[</span><span class="s2">&quot;num_updated_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  4  b</span>
<span class="go">2  5  c</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.update_config">
<span class="sig-name descname"><span class="pre">update_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">upsert_values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceDataset.update_config" title="Link to this definition"></a></dt>
<dd><p>Update the dataset configuration.</p>
<p>This method inserts or updates configuration key-value pairs for the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>upsert_values</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em> of </em><em>str to str</em>)  The configuration items to insert or update.
Both keys and values should be strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.uri">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">uri</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.LanceDataset.uri" title="Link to this definition"></a></dt>
<dd><p>The location of the data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.validate" title="Link to this definition"></a></dt>
<dd><p>Validate the dataset.</p>
<p>This checks the integrity of the dataset and will raise an exception if
the dataset is corrupted.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.version">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.LanceDataset.version" title="Link to this definition"></a></dt>
<dd><p>Returns the currently checked out version of the dataset</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceDataset.versions">
<span class="sig-name descname"><span class="pre">versions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceDataset.versions" title="Link to this definition"></a></dt>
<dd><p>Return all versions in this dataset.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">LanceOperation</span></span><a class="headerlink" href="#lance.dataset.LanceOperation" title="Link to this definition"></a></dt>
<dd><dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Append">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.Append" title="Link to this definition"></a></dt>
<dd><p>Append new rows to the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Append.fragments">
<span class="sig-name descname"><span class="pre">fragments</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Append.fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that contain the new rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API for distributed operations. To append to a
dataset on a single machine, use <a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">lance.write_dataset()</span></code></a>.</p>
</div>
<p class="rubric">Examples</p>
<p>To append new rows to a dataset, first use
<a class="reference internal" href="#lance.fragment.LanceFragment.create" title="lance.fragment.LanceFragment.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.fragment.LanceFragment.create()</span></code></a> to create fragments. Then
collect the fragment metadata into a list and pass it to this class.
Finally, pass the operation to the <a class="reference internal" href="#lance.dataset.LanceDataset.commit" title="lance.dataset.LanceDataset.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceDataset.commit()</span></code></a>
method to create the new dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab1</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">tab1</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab2</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Append</span><span class="p">([</span><span class="n">fragment</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">read_version</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id34">
<span class="sig-name descname"><span class="pre">fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id34" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.BaseOperation">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BaseOperation</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.BaseOperation" title="Link to this definition"></a></dt>
<dd><p>Base class for operations that can be applied to a dataset.</p>
<p>See available operations under <a class="reference internal" href="#lance.dataset.LanceOperation" title="lance.dataset.LanceOperation"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanceOperation</span></code></a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.CreateIndex">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CreateIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.13)"><span class="pre">Set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">created_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.13)"><span class="pre">datetime</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.CreateIndex" title="Link to this definition"></a></dt>
<dd><p>Operation that creates an index on the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.CreateIndex.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.13)"><span class="pre">datetime</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lance.dataset.LanceOperation.CreateIndex.created_at" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.CreateIndex.dataset_version">
<span class="sig-name descname"><span class="pre">dataset_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.LanceOperation.CreateIndex.dataset_version" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.CreateIndex.fields">
<span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.dataset.LanceOperation.CreateIndex.fields" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.CreateIndex.fragment_ids">
<span class="sig-name descname"><span class="pre">fragment_ids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.13)"><span class="pre">Set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.dataset.LanceOperation.CreateIndex.fragment_ids" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.CreateIndex.index_version">
<span class="sig-name descname"><span class="pre">index_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.LanceOperation.CreateIndex.index_version" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.CreateIndex.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.LanceOperation.CreateIndex.name" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.CreateIndex.uuid">
<span class="sig-name descname"><span class="pre">uuid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.LanceOperation.CreateIndex.uuid" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.DataReplacement">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DataReplacement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">replacements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.DataReplacementGroup" title="lance.dataset.LanceOperation.DataReplacementGroup"><span class="pre">DataReplacementGroup</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.DataReplacement" title="Link to this definition"></a></dt>
<dd><p>Operation that replaces existing datafiles in the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.DataReplacement.replacements">
<span class="sig-name descname"><span class="pre">replacements</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.DataReplacementGroup" title="lance.dataset.LanceOperation.DataReplacementGroup"><span class="pre">DataReplacementGroup</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.dataset.LanceOperation.DataReplacement.replacements" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.DataReplacementGroup">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DataReplacementGroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.DataReplacementGroup" title="Link to this definition"></a></dt>
<dd><p>Group of data replacements</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.DataReplacementGroup.fragment_id">
<span class="sig-name descname"><span class="pre">fragment_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.LanceOperation.DataReplacementGroup.fragment_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.DataReplacementGroup.new_file">
<span class="sig-name descname"><span class="pre">new_file</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a></em><a class="headerlink" href="#lance.dataset.LanceOperation.DataReplacementGroup.new_file" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Delete">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">updated_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deleted_fragment_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.Delete" title="Link to this definition"></a></dt>
<dd><p>Remove fragments or rows from the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Delete.updated_fragments">
<span class="sig-name descname"><span class="pre">updated_fragments</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Delete.updated_fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that have been updated with new deletion vectors.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Delete.deleted_fragment_ids">
<span class="sig-name descname"><span class="pre">deleted_fragment_ids</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Delete.deleted_fragment_ids" title="Link to this definition"></a></dt>
<dd><p>The ids of the fragments that have been deleted entirely. These are
the fragments where <code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceFragment.delete()</span></code> returned None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Delete.predicate">
<span class="sig-name descname"><span class="pre">predicate</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Delete.predicate" title="Link to this definition"></a></dt>
<dd><p>The original SQL predicate used to select the rows to delete.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API for distributed operations. To delete rows from
dataset on a single machine, use <a class="reference internal" href="#lance.LanceDataset.delete" title="lance.LanceDataset.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.LanceDataset.delete()</span></code></a>.</p>
</div>
<p class="rubric">Examples</p>
<p>To delete rows from a dataset, call <a class="reference internal" href="#lance.fragment.LanceFragment.delete" title="lance.fragment.LanceFragment.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.fragment.LanceFragment.delete()</span></code></a>
on each of the fragments. If that returns a new fragment, add that to
the <code class="docutils literal notranslate"><span class="pre">updated_fragments</span></code> list. If it returns None, that means the whole
fragment was deleted, so add the fragment id to the <code class="docutils literal notranslate"><span class="pre">deleted_fragment_ids</span></code>.
Finally, pass the operation to the <a class="reference internal" href="#lance.dataset.LanceDataset.commit" title="lance.dataset.LanceDataset.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceDataset.commit()</span></code></a> method to
complete the deletion operation.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;append&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">predicate</span> <span class="o">=</span> <span class="s2">&quot;a &gt;= 2&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">updated_fragments</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deleted_fragment_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">fragment</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_fragments</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">new_fragment</span> <span class="o">=</span> <span class="n">fragment</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">predicate</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">new_fragment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">updated_fragments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_fragment</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">deleted_fragment_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fragment</span><span class="o">.</span><span class="n">fragment_id</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Delete</span><span class="p">(</span><span class="n">updated_fragments</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">deleted_fragment_ids</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">predicate</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">read_version</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id35">
<span class="sig-name descname"><span class="pre">deleted_fragment_ids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id35" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id36">
<span class="sig-name descname"><span class="pre">predicate</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#id36" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id37">
<span class="sig-name descname"><span class="pre">updated_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id37" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Merge">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LanceSchema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.Merge" title="Link to this definition"></a></dt>
<dd><p>Operation that adds columns. Unlike Overwrite, this should not change
the structure of the fragments, allowing existing indices to be kept.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Merge.fragments">
<span class="sig-name descname"><span class="pre">fragments</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Merge.fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that make up the new dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>iterable of <a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Merge.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Merge.schema" title="Link to this definition"></a></dt>
<dd><p>The schema of the new dataset. Passing a LanceSchema is preferred,
and passing a pyarrow.Schema is deprecated.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>LanceSchema or <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)">pyarrow.Schema</a></p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API for distributed operations. To overwrite or
create new dataset on a single machine, use <a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">lance.write_dataset()</span></code></a>.</p>
</div>
<p class="rubric">Examples</p>
<p>To add new columns to a dataset, first define a method that will create
the new columns based on the existing columns. Then use
<code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.fragment.LanceFragment.add_columns()</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow.compute</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">double_a</span><span class="p">(</span><span class="n">batch</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">RecordBatch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">RecordBatch</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">doubled</span> <span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">batch</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">record_batch</span><span class="p">([</span><span class="n">doubled</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;a_doubled&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragments</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">fragment</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_fragments</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">new_fragment</span><span class="p">,</span> <span class="n">new_schema</span> <span class="o">=</span> <span class="n">fragment</span><span class="o">.</span><span class="n">merge_columns</span><span class="p">(</span><span class="n">double_a</span><span class="p">,</span>
<span class="gp">... </span>                                                      <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">fragments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_fragment</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Merge</span><span class="p">(</span><span class="n">fragments</span><span class="p">,</span> <span class="n">new_schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">read_version</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b  a_doubled</span>
<span class="go">0  1  a          2</span>
<span class="go">1  2  b          4</span>
<span class="go">2  3  c          6</span>
<span class="go">3  4  d          8</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id38">
<span class="sig-name descname"><span class="pre">fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id38" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id39">
<span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LanceSchema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#id39" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Overwrite">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Overwrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LanceSchema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.Overwrite" title="Link to this definition"></a></dt>
<dd><p>Overwrite or create a new dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Overwrite.new_schema">
<span class="sig-name descname"><span class="pre">new_schema</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Overwrite.new_schema" title="Link to this definition"></a></dt>
<dd><p>The schema of the new dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)">pyarrow.Schema</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Overwrite.fragments">
<span class="sig-name descname"><span class="pre">fragments</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Overwrite.fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that make up the new dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API for distributed operations. To overwrite or
create new dataset on a single machine, use <a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">lance.write_dataset()</span></code></a>.</p>
</div>
<p class="rubric">Examples</p>
<p>To create or overwrite a dataset, first use
<a class="reference internal" href="#lance.fragment.LanceFragment.create" title="lance.fragment.LanceFragment.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.fragment.LanceFragment.create()</span></code></a> to create fragments. Then
collect the fragment metadata into a list and pass it along with the
schema to this class. Finally, pass the operation to the
<a class="reference internal" href="#lance.dataset.LanceDataset.commit" title="lance.dataset.LanceDataset.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceDataset.commit()</span></code></a> method to create the new dataset.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab1</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab2</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment1</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragment2</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">LanceFragment</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">tab2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragments</span> <span class="o">=</span> <span class="p">[</span><span class="n">fragment1</span><span class="p">,</span> <span class="n">fragment2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Overwrite</span><span class="p">(</span><span class="n">tab1</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="n">fragments</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="go">3  4  d</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id40">
<span class="sig-name descname"><span class="pre">fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id40" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id41">
<span class="sig-name descname"><span class="pre">new_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LanceSchema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#id41" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Project">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LanceSchema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.Project" title="Link to this definition"></a></dt>
<dd><p>Operation that project columns.
Use this operator for drop column or rename/swap column.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Project.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Project.schema" title="Link to this definition"></a></dt>
<dd><p>The lance schema of the new dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>LanceSchema</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Examples</p>
<p>Use the projece operator to swap column:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow.compute</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">lance.schema</span><span class="w"> </span><span class="kn">import</span> <span class="n">LanceSchema</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="s2">&quot;b1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a  b b1</span>
<span class="go">0  1  a  c</span>
<span class="go">1  2  b  d</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">## rename column `b` into `b0` and rename b1 into `b`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;b0&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lance_schema</span> <span class="o">=</span> <span class="n">LanceSchema</span><span class="o">.</span><span class="n">from_pyarrow</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Project</span><span class="p">(</span><span class="n">lance_schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">read_version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   a b0  b</span>
<span class="go">0  1  a  c</span>
<span class="go">1  2  b  d</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id42">
<span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LanceSchema</span></em><a class="headerlink" href="#id42" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Restore">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Restore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.Restore" title="Link to this definition"></a></dt>
<dd><p>Operation that restores a previous version of the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Restore.version">
<span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.LanceOperation.Restore.version" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Rewrite">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Rewrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">groups</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.RewriteGroup" title="lance.dataset.LanceOperation.RewriteGroup"><span class="pre">RewriteGroup</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rewritten_indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.RewrittenIndex" title="lance.dataset.LanceOperation.RewrittenIndex"><span class="pre">RewrittenIndex</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.Rewrite" title="Link to this definition"></a></dt>
<dd><p>Operation that rewrites one or more files and indices into one
or more files and indices.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Rewrite.groups">
<span class="sig-name descname"><span class="pre">groups</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Rewrite.groups" title="Link to this definition"></a></dt>
<dd><p>Groups of files that have been rewritten.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.LanceOperation.RewriteGroup" title="lance.LanceOperation.RewriteGroup">RewriteGroup</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Rewrite.rewritten_indices">
<span class="sig-name descname"><span class="pre">rewritten_indices</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Rewrite.rewritten_indices" title="Link to this definition"></a></dt>
<dd><p>Indices that have been rewritten.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.LanceOperation.RewrittenIndex" title="lance.LanceOperation.RewrittenIndex">RewrittenIndex</a>]</p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an advanced API not intended for general use.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id43">
<span class="sig-name descname"><span class="pre">groups</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.RewriteGroup" title="lance.dataset.LanceOperation.RewriteGroup"><span class="pre">RewriteGroup</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id43" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id44">
<span class="sig-name descname"><span class="pre">rewritten_indices</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.LanceOperation.RewrittenIndex" title="lance.dataset.LanceOperation.RewrittenIndex"><span class="pre">RewrittenIndex</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id44" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.RewriteGroup">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RewriteGroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.RewriteGroup" title="Link to this definition"></a></dt>
<dd><p>Collection of rewritten files</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.RewriteGroup.new_fragments">
<span class="sig-name descname"><span class="pre">new_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.dataset.LanceOperation.RewriteGroup.new_fragments" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.RewriteGroup.old_fragments">
<span class="sig-name descname"><span class="pre">old_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.dataset.LanceOperation.RewriteGroup.old_fragments" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.RewrittenIndex">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RewrittenIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.RewrittenIndex" title="Link to this definition"></a></dt>
<dd><p>An index that has been rewritten</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.RewrittenIndex.new_id">
<span class="sig-name descname"><span class="pre">new_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.LanceOperation.RewrittenIndex.new_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.RewrittenIndex.old_id">
<span class="sig-name descname"><span class="pre">old_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.LanceOperation.RewrittenIndex.old_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Update">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">removed_fragment_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updated_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields_modified</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceOperation.Update" title="Link to this definition"></a></dt>
<dd><p>Operation that updates rows in the dataset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Update.removed_fragment_ids">
<span class="sig-name descname"><span class="pre">removed_fragment_ids</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Update.removed_fragment_ids" title="Link to this definition"></a></dt>
<dd><p>The ids of the fragments that have been removed entirely.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Update.updated_fragments">
<span class="sig-name descname"><span class="pre">updated_fragments</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Update.updated_fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that have been updated with new deletion vectors.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Update.new_fragments">
<span class="sig-name descname"><span class="pre">new_fragments</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Update.new_fragments" title="Link to this definition"></a></dt>
<dd><p>The fragments that contain the new rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#lance.FragmentMetadata" title="lance.FragmentMetadata">FragmentMetadata</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.LanceOperation.Update.fields_modified">
<span class="sig-name descname"><span class="pre">fields_modified</span></span><a class="headerlink" href="#lance.dataset.LanceOperation.Update.fields_modified" title="Link to this definition"></a></dt>
<dd><p>If any fields are modified in updated_fragments, then they must be
listed here so those fragments can be removed from indices covering
those fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id45">
<span class="sig-name descname"><span class="pre">fields_modified</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id45" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id46">
<span class="sig-name descname"><span class="pre">new_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id46" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id47">
<span class="sig-name descname"><span class="pre">removed_fragment_ids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id47" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id48">
<span class="sig-name descname"><span class="pre">updated_fragments</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id48" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">LanceScanner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scanner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_Scanner</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.analyze_plan">
<span class="sig-name descname"><span class="pre">analyze_plan</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceScanner.analyze_plan" title="Link to this definition"></a></dt>
<dd><p>Execute the plan for this scanner and display with runtime metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  Use a verbose output format.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>plan</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.count_rows">
<span class="sig-name descname"><span class="pre">count_rows</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner.count_rows" title="Link to this definition"></a></dt>
<dd><p>Count rows matching the scanner filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>count</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.dataset_schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dataset_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.dataset.LanceScanner.dataset_schema" title="Link to this definition"></a></dt>
<dd><p>The schema with which batches will be read from fragments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.explain_plan">
<span class="sig-name descname"><span class="pre">explain_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceScanner.explain_plan" title="Link to this definition"></a></dt>
<dd><p>Return the execution plan for this scanner.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  Use a verbose output format.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>plan</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.from_batches">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_batches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner.from_batches" title="Link to this definition"></a></dt>
<dd><p>Not implemented</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.from_dataset">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner.from_dataset" title="Link to this definition"></a></dt>
<dd><p>Not implemented</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.from_fragment">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_fragment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner.from_fragment" title="Link to this definition"></a></dt>
<dd><p>Not implemented</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.head">
<span class="sig-name descname"><span class="pre">head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_rows</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner.head" title="Link to this definition"></a></dt>
<dd><p>Load the first N rows of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The number of rows to load.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.projected_schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">projected_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.dataset.LanceScanner.projected_schema" title="Link to this definition"></a></dt>
<dd><p>The materialized schema of the data, accounting for projections.</p>
<p>This is the schema of any data returned from the scanner.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.scan_batches">
<span class="sig-name descname"><span class="pre">scan_batches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner.scan_batches" title="Link to this definition"></a></dt>
<dd><p>Consume a Scanner in record batches with corresponding fragments.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record_batches</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>iterator of TaggedRecordBatch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.take">
<span class="sig-name descname"><span class="pre">take</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner.take" title="Link to this definition"></a></dt>
<dd><p>Not implemented</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.to_batches">
<span class="sig-name descname"><span class="pre">to_batches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner.to_batches" title="Link to this definition"></a></dt>
<dd><p>Consume a Scanner in record batches.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record_batches</strong></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>iterator of RecordBatch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.to_reader">
<span class="sig-name descname"><span class="pre">to_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceScanner.to_reader" title="Link to this definition"></a></dt>
<dd><p>Consume this scanner as a RecordBatchReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>RecordBatchReader</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceScanner.to_table">
<span class="sig-name descname"><span class="pre">to_table</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><span class="pre">Table</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceScanner.to_table" title="Link to this definition"></a></dt>
<dd><p>Read the data into memory and return a pyarrow Table.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.LanceStats">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">LanceStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_Dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.LanceStats" title="Link to this definition"></a></dt>
<dd><p>Statistics about a LanceDataset.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceStats.data_stats">
<span class="sig-name descname"><span class="pre">data_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.DataStatistics" title="lance.dataset.DataStatistics"><span class="pre">DataStatistics</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceStats.data_stats" title="Link to this definition"></a></dt>
<dd><p>Statistics about the data in the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceStats.dataset_stats">
<span class="sig-name descname"><span class="pre">dataset_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_rows_per_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.DatasetStats" title="lance.dataset.DatasetStats"><span class="pre">DatasetStats</span></a></span></span><a class="headerlink" href="#lance.dataset.LanceStats.dataset_stats" title="Link to this definition"></a></dt>
<dd><p>Statistics about the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.LanceStats.index_stats">
<span class="sig-name descname"><span class="pre">index_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.LanceStats.index_stats" title="Link to this definition"></a></dt>
<dd><p>Statistics about an index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the index to get statistics for.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.MergeInsertBuilder">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">MergeInsertBuilder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.MergeInsertBuilder" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.MergeInsertBuilder.conflict_retries">
<span class="sig-name descname"><span class="pre">conflict_retries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.MergeInsertBuilder.conflict_retries" title="Link to this definition"></a></dt>
<dd><p>Set number of times to retry the operation if there is contention.</p>
<p>If this is set &gt; 0, then the operation will keep a copy of the input data
either in memory or on disk (depending on the size of the data) and will
retry the operation if there is contention.</p>
<p>Default is 10.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.MergeInsertBuilder.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.MergeInsertBuilder.execute" title="Link to this definition"></a></dt>
<dd><p>Executes the merge insert operation</p>
<p>This function updates the original dataset and returns a dictionary with
information about merge statistics - i.e. the number of inserted, updated,
and deleted rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>ReaderLike</em>)  The new data to use as the source table for the operation.  This parameter
can be any source of data (e.g. table / dataset) that
<a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a> accepts.</p></li>
<li><p><strong>schema</strong> (<em>Optional</em><em>[</em><em>pa.Schema</em><em>]</em>)  The schema of the data.  This only needs to be supplied whenever the data
source is some kind of generator.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.MergeInsertBuilder.execute_uncommitted">
<span class="sig-name descname"><span class="pre">execute_uncommitted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.dataset.Transaction" title="lance.dataset.Transaction"><span class="pre">Transaction</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.MergeInsertBuilder.execute_uncommitted" title="Link to this definition"></a></dt>
<dd><p>Executes the merge insert operation without committing</p>
<p>This function updates the original dataset and returns a dictionary with
information about merge statistics - i.e. the number of inserted, updated,
and deleted rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>ReaderLike</em>)  The new data to use as the source table for the operation.  This parameter
can be any source of data (e.g. table / dataset) that
<a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_dataset()</span></code></a> accepts.</p></li>
<li><p><strong>schema</strong> (<em>Optional</em><em>[</em><em>pa.Schema</em><em>]</em>)  The schema of the data.  This only needs to be supplied whenever the data
source is some kind of generator.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.MergeInsertBuilder.retry_timeout">
<span class="sig-name descname"><span class="pre">retry_timeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.13)"><span class="pre">timedelta</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.MergeInsertBuilder.retry_timeout" title="Link to this definition"></a></dt>
<dd><p>Set the timeout used to limit retries.</p>
<p>This is the maximum time to spend on the operation before giving up. At
least one attempt will be made, regardless of how long it takes to complete.
Subsequent attempts will be cancelled once this timeout is reached. If
the timeout has been reached during the first attempt, the operation
will be cancelled immediately before making a second attempt.</p>
<p>The default is 30 seconds.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.MergeInsertBuilder.when_matched_update_all">
<span class="sig-name descname"><span class="pre">when_matched_update_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.MergeInsertBuilder.when_matched_update_all" title="Link to this definition"></a></dt>
<dd><p>Configure the operation to update matched rows</p>
<p>After this method is called, when the merge insert operation executes,
any rows that match both the source table and the target table will be
updated.  The rows from the target table will be removed and the rows
from the source table will be added.</p>
<p>An optional condition may be specified.  This should be an SQL filter
and, if present, then only matched rows that also satisfy this filter will
be updated.  The SQL filter should use the prefix <cite>target.</cite> to refer to
columns in the target table and the prefix <cite>source.</cite> to refer to columns
in the source table.  For example, <cite>source.last_update &lt; target.last_update</cite>.</p>
<p>If a condition is specified and rows do not satisfy the condition then these
rows will not be updated.  Failure to satisfy the filter does not cause
a matched row to become a not matched row.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.MergeInsertBuilder.when_not_matched_by_source_delete">
<span class="sig-name descname"><span class="pre">when_not_matched_by_source_delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.MergeInsertBuilder.when_not_matched_by_source_delete" title="Link to this definition"></a></dt>
<dd><p>Configure the operation to delete source rows that do not match</p>
<p>After this method is called, when the merge insert operation executes,
any rows that exist only in the target table will be deleted.  An
optional filter can be specified to limit the scope of the delete
operation.  If given (as an SQL filter) then only rows which match
the filter will be deleted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.MergeInsertBuilder.when_not_matched_insert_all">
<span class="sig-name descname"><span class="pre">when_not_matched_insert_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.MergeInsertBuilder" title="lance.dataset.MergeInsertBuilder"><span class="pre">MergeInsertBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.MergeInsertBuilder.when_not_matched_insert_all" title="Link to this definition"></a></dt>
<dd><p>Configure the operation to insert not matched rows</p>
<p>After this method is called, when the merge insert operation executes,
any rows that exist only in the source table will be inserted into
the target table.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">ScannerBuilder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.ScannerBuilder" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.apply_defaults">
<span class="sig-name descname"><span class="pre">apply_defaults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">default_opts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.apply_defaults" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.batch_readahead">
<span class="sig-name descname"><span class="pre">batch_readahead</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nbatches</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.batch_readahead" title="Link to this definition"></a></dt>
<dd><p>This parameter is ignored when reading v2 files</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.batch_size">
<span class="sig-name descname"><span class="pre">batch_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.batch_size" title="Link to this definition"></a></dt>
<dd><p>Set batch size for Scanner</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.columns">
<span class="sig-name descname"><span class="pre">columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.columns" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.fast_search">
<span class="sig-name descname"><span class="pre">fast_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.fast_search" title="Link to this definition"></a></dt>
<dd><p>Enable fast search, which only perform search on the indexed data.</p>
<p>Users can use <cite>Table::optimize()</cite> or <cite>create_index()</cite> to include the new data
into index, thus make new data searchable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.dataset.Expression.html#pyarrow.dataset.Expression" title="(in Apache Arrow v20.0.0)"><span class="pre">Expression</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.fragment_readahead">
<span class="sig-name descname"><span class="pre">fragment_readahead</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nfragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.fragment_readahead" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.full_text_search">
<span class="sig-name descname"><span class="pre">full_text_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">FullTextQuery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.full_text_search" title="Link to this definition"></a></dt>
<dd><p>Filter rows by full text searching. <em>Experimental API</em>,
may remove it after we support to do this within <cite>filter</cite> SQL-like expression</p>
<p>Must create inverted index on the given column before searching,</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>Query</em>)  If str, the query string to search for, a match query would be performed.
If Query, the query object to search for,
and the <cite>columns</cite> parameter will be ignored.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  The columns to search in. If None, search in all indexed columns.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.include_deleted_rows">
<span class="sig-name descname"><span class="pre">include_deleted_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.include_deleted_rows" title="Link to this definition"></a></dt>
<dd><p>Include deleted rows</p>
<p>Rows which have been deleted, but are still present in the fragment, will be
returned.  These rows will have all columns (except _rowaddr) set to null</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.io_buffer_size">
<span class="sig-name descname"><span class="pre">io_buffer_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">io_buffer_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.io_buffer_size" title="Link to this definition"></a></dt>
<dd><p>Set the I/O buffer size for the Scanner</p>
<p>This is the amount of RAM that will be reserved for holding I/O received from
storage before it is processed.  This is used to control the amount of memory
used by the scanner.  If the buffer is full then the scanner will block until
the buffer is processed.</p>
<p>Generally this should scale with the number of concurrent I/O threads.  The
default is 2GiB which comfortably provides enough space for somewhere between
32 and 256 concurrent I/O threads.</p>
<p>This value is not a hard cap on the amount of RAM the scanner will use.  Some
space is used for the compute (which can be controlled by the batch size) and
Lance does not keep track of memory after it is returned to the user.</p>
<p>Currently, if there is a single batch of data which is larger than the io buffer
size then the scanner will deadlock.  This is a known issue and will be fixed in
a future release.</p>
<p>This parameter is only used when reading v2 files</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.late_materialization">
<span class="sig-name descname"><span class="pre">late_materialization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">late_materialization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.late_materialization" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.limit">
<span class="sig-name descname"><span class="pre">limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.limit" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.nearest">
<span class="sig-name descname"><span class="pre">nearest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">QueryVectorLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nprobes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_nprobes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum_nprobes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refine_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ef</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.nearest" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.offset">
<span class="sig-name descname"><span class="pre">offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.offset" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.prefilter">
<span class="sig-name descname"><span class="pre">prefilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefilter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.prefilter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.scan_in_order">
<span class="sig-name descname"><span class="pre">scan_in_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_in_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.scan_in_order" title="Link to this definition"></a></dt>
<dd><p>Whether to scan the dataset in order of fragments and batches.</p>
<p>If set to False, the scanner may read fragments concurrently and yield
batches out of order. This may improve performance since it allows more
concurrency in the scan, but can also use more memory.</p>
<p>This parameter is ignored when using v2 files.  In the v2 file format
there is no penalty to scanning in order and so all scans will scan in
order.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.scan_stats_callback">
<span class="sig-name descname"><span class="pre">scan_stats_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.ScanStatistics" title="_lib.ScanStatistics"><span class="pre">ScanStatistics</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.scan_stats_callback" title="Link to this definition"></a></dt>
<dd><p>Set a callback function that will be called with the scan statistics after the
scan is complete.  Errors raised by the callback will be logged but not
re-raised.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.strict_batch_size">
<span class="sig-name descname"><span class="pre">strict_batch_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strict_batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.strict_batch_size" title="Link to this definition"></a></dt>
<dd><p>If True, then all batches except the last batch will have exactly
<cite>batch_size</cite> rows.
By default, it is false.
If this is true then small batches will need to be merged together
which will require a data copy and incur a (typically very small)
performance penalty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.to_scanner">
<span class="sig-name descname"><span class="pre">to_scanner</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.LanceScanner" title="lance.dataset.LanceScanner"><span class="pre">LanceScanner</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.to_scanner" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.use_scalar_index">
<span class="sig-name descname"><span class="pre">use_scalar_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_scalar_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.use_scalar_index" title="Link to this definition"></a></dt>
<dd><p>Set whether scalar indices should be used in a query</p>
<p>Scans will use scalar indices, when available, to optimize queries with filters.
However, in some corner cases, scalar indices may make performance worse.  This
parameter allows users to disable scalar indices in these cases.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.use_stats">
<span class="sig-name descname"><span class="pre">use_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.use_stats" title="Link to this definition"></a></dt>
<dd><p>Enable use of statistics for query planning.</p>
<p>Disabling statistics is used for debugging and benchmarking purposes.
This should be left on for normal use.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.with_fragments">
<span class="sig-name descname"><span class="pre">with_fragments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragments</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.LanceFragment" title="lance.fragment.LanceFragment"><span class="pre">LanceFragment</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.with_fragments" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.with_row_address">
<span class="sig-name descname"><span class="pre">with_row_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">with_row_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.with_row_address" title="Link to this definition"></a></dt>
<dd><p>Enables returns with row addresses.</p>
<p>Row addresses are a unique but unstable identifier for each row in the
dataset that consists of the fragment id (upper 32 bits) and the row
offset in the fragment (lower 32 bits).  Row IDs are generally preferred
since they do not change when a row is modified or compacted.  However,
row addresses may be useful in some advanced use cases.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.ScannerBuilder.with_row_id">
<span class="sig-name descname"><span class="pre">with_row_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.ScannerBuilder" title="lance.dataset.ScannerBuilder"><span class="pre">ScannerBuilder</span></a></span></span><a class="headerlink" href="#lance.dataset.ScannerBuilder.with_row_id" title="Link to this definition"></a></dt>
<dd><p>Enable returns with row IDs.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.Tag">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">Tag</span></span><a class="headerlink" href="#lance.dataset.Tag" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Tag.manifest_size">
<span class="sig-name descname"><span class="pre">manifest_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.Tag.manifest_size" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Tag.version">
<span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.Tag.version" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.Tags">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">Tags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_Dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.Tags" title="Link to this definition"></a></dt>
<dd><p>Dataset tag manager.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.Tags.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.dataset.Tags.create" title="Link to this definition"></a></dt>
<dd><p>Create a tag for a given dataset version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>,</em>)  The name of the tag to create. This name must be unique among all tag
names for the dataset.</p></li>
<li><p><strong>version</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>,</em>)  The dataset version to tag.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.Tags.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.dataset.Tags.delete" title="Link to this definition"></a></dt>
<dd><p>Delete tag from the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>,</em>)  The name of the tag to delete.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.Tags.get_version">
<span class="sig-name descname"><span class="pre">get_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.dataset.Tags.get_version" title="Link to this definition"></a></dt>
<dd><p>Get the version of a specific tag by name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the tag to retrieve.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The version number of the tag if it exists, otherwise None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.Tags.list">
<span class="sig-name descname"><span class="pre">list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.Tag" title="lance.dataset.Tag"><span class="pre">Tag</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.Tags.list" title="Link to this definition"></a></dt>
<dd><p>List all dataset tags.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary mapping tag names to version numbers.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference internal" href="#lance.dataset.Tag" title="lance.dataset.Tag">Tag</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.Tags.list_ordered">
<span class="sig-name descname"><span class="pre">list_ordered</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.Tag" title="lance.dataset.Tag"><span class="pre">Tag</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.dataset.Tags.list_ordered" title="Link to this definition"></a></dt>
<dd><p>List all dataset tags.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>order</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>optional</em>)  The order in which to return the tags.
asc or desc can be used to specify the order explicitly.
default desc.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An ordered list of tuples mapping tag names to its <cite>Tag</cite> metadata.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference internal" href="#lance.dataset.Tag" title="lance.dataset.Tag">Tag</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.Tags.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.dataset.Tags.update" title="Link to this definition"></a></dt>
<dd><p>Update tag to a new version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>,</em>)  The name of the tag to update.</p></li>
<li><p><strong>version</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>,</em>)  The new dataset version to tag.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.Transaction">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">Transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">read_version:</span> <span class="pre">'int'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operation:</span> <span class="pre">'LanceOperation.BaseOperation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uuid:</span> <span class="pre">'str'</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blobs_op:</span> <span class="pre">'Optional[LanceOperation.BaseOperation]'</span> <span class="pre">=</span> <span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.Transaction" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Transaction.blobs_op">
<span class="sig-name descname"><span class="pre">blobs_op</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceOperation.BaseOperation" title="lance.dataset.LanceOperation.BaseOperation"><span class="pre">BaseOperation</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lance.dataset.Transaction.blobs_op" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Transaction.operation">
<span class="sig-name descname"><span class="pre">operation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceOperation.BaseOperation" title="lance.dataset.LanceOperation.BaseOperation"><span class="pre">BaseOperation</span></a></em><a class="headerlink" href="#lance.dataset.Transaction.operation" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Transaction.read_version">
<span class="sig-name descname"><span class="pre">read_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.Transaction.read_version" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Transaction.uuid">
<span class="sig-name descname"><span class="pre">uuid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#lance.dataset.Transaction.uuid" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.UpdateResult">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">UpdateResult</span></span><a class="headerlink" href="#lance.dataset.UpdateResult" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.UpdateResult.num_rows_updated">
<span class="sig-name descname"><span class="pre">num_rows_updated</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.UpdateResult.num_rows_updated" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.VectorIndexReader">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">VectorIndexReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.dataset.VectorIndexReader" title="Link to this definition"></a></dt>
<dd><p>This class allows you to initialize a reader for a specific vector index,
retrieve the number of partitions,
access the centroids of the index,
and read specific partitions of the index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><em>LanceDataset</em></a>)  The dataset containing the index.</p></li>
<li><p><strong>index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the vector index to read.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">lance.dataset</span><span class="w"> </span><span class="kn">import</span> <span class="n">VectorIndexReader</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="n">vectors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;vector&quot;</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vectors</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
    <span class="nb">type</span><span class="o">=</span><span class="n">pa</span><span class="o">.</span><span class="n">list_</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">float32</span><span class="p">(),</span> <span class="mi">2</span><span class="p">))})</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;/tmp/index_reader_demo&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span><span class="s2">&quot;vector&quot;</span><span class="p">,</span> <span class="n">index_type</span><span class="o">=</span><span class="s2">&quot;IVF_PQ&quot;</span><span class="p">,</span>
    <span class="n">num_partitions</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">num_sub_vectors</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">VectorIndexReader</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="s2">&quot;vector_idx&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">reader</span><span class="o">.</span><span class="n">num_partitions</span><span class="p">()</span> <span class="o">==</span> <span class="mi">4</span>
<span class="n">partition</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read_partition</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">assert</span> <span class="s2">&quot;_rowid&quot;</span> <span class="ow">in</span> <span class="n">partition</span><span class="o">.</span><span class="n">column_names</span>
</pre></div>
</div>
<section id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>ValueError</dt><dd><p>If the specified index is not a vector index.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.VectorIndexReader.centroids">
<span class="sig-name descname"><span class="pre">centroids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.3)"><span class="pre">ndarray</span></a></span></span><a class="headerlink" href="#lance.dataset.VectorIndexReader.centroids" title="Link to this definition"></a></dt>
<dd><p>Returns the centroids of the index</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The centroids of IVF
with shape (num_partitions, dim)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.VectorIndexReader.num_partitions">
<span class="sig-name descname"><span class="pre">num_partitions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#lance.dataset.VectorIndexReader.num_partitions" title="Link to this definition"></a></dt>
<dd><p>Returns the number of partitions in the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The number of partitions.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.dataset.VectorIndexReader.read_partition">
<span class="sig-name descname"><span class="pre">read_partition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table" title="(in Apache Arrow v20.0.0)"><span class="pre">Table</span></a></span></span><a class="headerlink" href="#lance.dataset.VectorIndexReader.read_partition" title="Link to this definition"></a></dt>
<dd><p>Returns a pyarrow table for the given IVF partition</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partition_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The id of the partition to read</p></li>
<li><p><strong>with_vector</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  Whether to include the vector column in the reader,
for IVF_PQ, the vector column is PQ codes</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pyarrow table for the given partition,
containing the row IDs, and quantized vectors (if with_vector is True).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pa.Table</p>
</dd>
</dl>
</dd></dl>

</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.dataset.Version">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">Version</span></span><a class="headerlink" href="#lance.dataset.Version" title="Link to this definition"></a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Version.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lance.dataset.Version.metadata" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Version.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.13)"><span class="pre">datetime</span></a></em><a class="headerlink" href="#lance.dataset.Version.timestamp" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.dataset.Version.version">
<span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.dataset.Version.version" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.dataset.write_dataset">
<span class="sig-prename descclassname"><span class="pre">lance.dataset.</span></span><span class="sig-name descname"><span class="pre">write_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'create'</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1048576</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bytes_per_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">96636764160</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_lock</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommitLock</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FragmentWriteProgress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_storage_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_legacy_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_v2_manifest_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_move_stable_row_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_cleanup_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.dataset.AutoCleanupConfig" title="lance.dataset.AutoCleanupConfig"><span class="pre">AutoCleanupConfig</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><span class="pre">LanceDataset</span></a></span></span><a class="headerlink" href="#lance.dataset.write_dataset" title="Link to this definition"></a></dt>
<dd><p>Write a given data_obj to the given uri</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>Reader-like</em>)  The data to be written. Acceptable types are:
- Pandas DataFrame, Pyarrow Table, Dataset, Scanner, or RecordBatchReader
- Huggingface dataset</p></li>
<li><p><strong>uri</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Path</em><em>, or </em><a class="reference internal" href="#lance.dataset.LanceDataset" title="lance.dataset.LanceDataset"><em>LanceDataset</em></a>)  Where to write the dataset to (directory). If a LanceDataset is passed,
the session will be reused.</p></li>
<li><p><strong>schema</strong> (<em>Schema</em><em>, </em><em>optional</em>)  If specified and the input is a pandas DataFrame, use this schema
instead of the default pandas to arrow table conversion.</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  <strong>create</strong> - create a new dataset (raises if uri already exists).
<strong>overwrite</strong> - create a new snapshot version
<strong>append</strong> - create a new version that is the concat of the input and the
latest version, or a new dataset if uri doesnt exist.</p></li>
<li><p><strong>max_rows_per_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024 * 1024</em>)  The max number of rows to write before starting a new file</p></li>
<li><p><strong>max_rows_per_group</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024</em>)  The max number of rows before starting a new group (in the same file)</p></li>
<li><p><strong>max_bytes_per_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 90 * 1024 * 1024 * 1024</em>)  The max number of bytes to write before starting a new file. This is a
soft limit. This limit is checked after each group is written, which
means larger groups may cause this to be overshot meaningfully. This
defaults to 90 GB, since we have a hard limit of 100 GB per file on
object stores.</p></li>
<li><p><strong>commit_lock</strong> (<em>CommitLock</em><em>, </em><em>optional</em>)  A custom commit lock.  Only needed if your object store does not support
atomic commits.  See the user guide for more details.</p></li>
<li><p><strong>progress</strong> (<em>FragmentWriteProgress</em><em>, </em><em>optional</em>)  <em>Experimental API</em>. Progress tracking for writing the fragment. Pass
a custom class that defines hooks to be called when each fragment is
starting to write and finishing writing.</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>data_storage_version</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  The version of the data storage format to use. Newer versions are more
efficient but require newer versions of lance to read.  The default (None)
will use the latest stable version.  See the user guide for more details.</p></li>
<li><p><strong>use_legacy_format</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default None</em>)  Deprecated method for setting the data storage version. Use the
<cite>data_storage_version</cite> parameter instead.</p></li>
<li><p><strong>enable_v2_manifest_paths</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  If True, and this is a new dataset, uses the new V2 manifest paths.
These paths provide more efficient opening of datasets with many
versions on object stores. This parameter has no effect if the dataset
already exists. To migrate an existing dataset, instead use the
<a class="reference internal" href="#lance.dataset.LanceDataset.migrate_manifest_paths_v2" title="lance.dataset.LanceDataset.migrate_manifest_paths_v2"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceDataset.migrate_manifest_paths_v2()</span></code></a> method. Default is False.</p></li>
<li><p><strong>enable_move_stable_row_ids</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>)  Experimental parameter: if set to true, the writer will use move-stable row ids.
These row ids are stable after compaction operations, but not after updates.
This makes compaction more efficient, since with stable row ids no
secondary indices need to be updated to point to new row ids.</p></li>
<li><p><strong>auto_cleanup_options</strong> (<em>optional</em><em>, </em><a class="reference internal" href="#lance.dataset.AutoCleanupConfig" title="lance.dataset.AutoCleanupConfig"><em>AutoCleanupConfig</em></a>)  Config options for automatic cleanup of the dataset.
If set, and this is a new dataset, old dataset versions will be automatically
cleaned up according to this parameter.
To add autocleaning to an existing dataset, use Dataset::update_config to set
lance.auto_cleanup.interval and lance.auto_cleanup.older_than.
Both parameters must be set to invoke autocleaning.
If you do not set this parameter(default behavior),
then no autocleaning will be performed.
Note: this option only takes effect when creating a new dataset,
it has no effect on existing datasets.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p id="module-lance.fragment">Dataset Fragment</p>
<dl class="py class">
<dt class="sig sig-object py" id="lance.fragment.DataFile">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.fragment.</span></span><span class="sig-name descname"><span class="pre">DataFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_major_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_minor_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_size_bytes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.DataFile" title="Link to this definition"></a></dt>
<dd><p>A data file in a fragment.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DataFile.path">
<span class="sig-name descname"><span class="pre">path</span></span><a class="headerlink" href="#lance.fragment.DataFile.path" title="Link to this definition"></a></dt>
<dd><p>The path to the data file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DataFile.fields">
<span class="sig-name descname"><span class="pre">fields</span></span><a class="headerlink" href="#lance.fragment.DataFile.fields" title="Link to this definition"></a></dt>
<dd><p>The field ids of the columns in this file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DataFile.column_indices">
<span class="sig-name descname"><span class="pre">column_indices</span></span><a class="headerlink" href="#lance.fragment.DataFile.column_indices" title="Link to this definition"></a></dt>
<dd><p>The column indices where the fields are stored in the file.  Will  have
the same length as <cite>fields</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DataFile.file_major_version">
<span class="sig-name descname"><span class="pre">file_major_version</span></span><a class="headerlink" href="#lance.fragment.DataFile.file_major_version" title="Link to this definition"></a></dt>
<dd><p>The major version of the data storage format.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DataFile.file_minor_version">
<span class="sig-name descname"><span class="pre">file_minor_version</span></span><a class="headerlink" href="#lance.fragment.DataFile.file_minor_version" title="Link to this definition"></a></dt>
<dd><p>The minor version of the data storage format.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DataFile.file_size_bytes">
<span class="sig-name descname"><span class="pre">file_size_bytes</span></span><a class="headerlink" href="#lance.fragment.DataFile.file_size_bytes" title="Link to this definition"></a></dt>
<dd><p>The size of the data file in bytes, if available.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id49">
<span class="sig-name descname"><span class="pre">column_indices</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id49" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.DataFile.field_ids">
<span class="sig-name descname"><span class="pre">field_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.fragment.DataFile.field_ids" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id50">
<span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id50" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id51">
<span class="sig-name descname"><span class="pre">file_major_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#id51" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id52">
<span class="sig-name descname"><span class="pre">file_minor_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#id52" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id53">
<span class="sig-name descname"><span class="pre">file_size_bytes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id53" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id54">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#id54" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.fragment.DeletionFile">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.fragment.</span></span><span class="sig-name descname"><span class="pre">DeletionFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">read_version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_deleted_rows</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.DeletionFile" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.DeletionFile.asdict">
<span class="sig-name descname"><span class="pre">asdict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.DeletionFile.asdict" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DeletionFile.file_type">
<span class="sig-name descname"><span class="pre">file_type</span></span><a class="headerlink" href="#lance.fragment.DeletionFile.file_type" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.DeletionFile.from_json">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.DeletionFile.from_json" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DeletionFile.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#lance.fragment.DeletionFile.id" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.DeletionFile.json">
<span class="sig-name descname"><span class="pre">json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.DeletionFile.json" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DeletionFile.num_deleted_rows">
<span class="sig-name descname"><span class="pre">num_deleted_rows</span></span><a class="headerlink" href="#lance.fragment.DeletionFile.num_deleted_rows" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.DeletionFile.path">
<span class="sig-name descname"><span class="pre">path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.DeletionFile.path" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.DeletionFile.read_version">
<span class="sig-name descname"><span class="pre">read_version</span></span><a class="headerlink" href="#lance.fragment.DeletionFile.read_version" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.fragment.</span></span><span class="sig-name descname"><span class="pre">FragmentMetadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">physical_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">deletion_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.fragment.DeletionFile" title="lance.fragment.DeletionFile"><span class="pre">DeletionFile</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_id_meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.fragment.RowIdMeta" title="lance.fragment.RowIdMeta"><span class="pre">RowIdMeta</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.FragmentMetadata" title="Link to this definition"></a></dt>
<dd><p>Metadata for a fragment.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#lance.fragment.FragmentMetadata.id" title="Link to this definition"></a></dt>
<dd><p>The ID of the fragment.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.files">
<span class="sig-name descname"><span class="pre">files</span></span><a class="headerlink" href="#lance.fragment.FragmentMetadata.files" title="Link to this definition"></a></dt>
<dd><p>The data files of the fragment. Each data file must have the same number
of rows. Each file stores a different subset of the columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile">DataFile</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.physical_rows">
<span class="sig-name descname"><span class="pre">physical_rows</span></span><a class="headerlink" href="#lance.fragment.FragmentMetadata.physical_rows" title="Link to this definition"></a></dt>
<dd><p>The number of rows originally in this fragment. This is the number of rows
in the data files before deletions.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.deletion_file">
<span class="sig-name descname"><span class="pre">deletion_file</span></span><a class="headerlink" href="#lance.fragment.FragmentMetadata.deletion_file" title="Link to this definition"></a></dt>
<dd><p>The deletion file, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#lance.fragment.DeletionFile" title="lance.fragment.DeletionFile">DeletionFile</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.row_id_meta">
<span class="sig-name descname"><span class="pre">row_id_meta</span></span><a class="headerlink" href="#lance.fragment.FragmentMetadata.row_id_meta" title="Link to this definition"></a></dt>
<dd><p>The row id metadata, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#lance.fragment.RowIdMeta" title="lance.fragment.RowIdMeta">RowIdMeta</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.data_files">
<span class="sig-name descname"><span class="pre">data_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.fragment.FragmentMetadata.data_files" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id55">
<span class="sig-name descname"><span class="pre">deletion_file</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.fragment.DeletionFile" title="lance.fragment.DeletionFile"><span class="pre">DeletionFile</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id55" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id56">
<span class="sig-name descname"><span class="pre">files</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.DataFile" title="lance.fragment.DataFile"><span class="pre">DataFile</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id56" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.from_json">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a></span></span><a class="headerlink" href="#lance.fragment.FragmentMetadata.from_json" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id57">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#id57" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.num_deletions">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_deletions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.fragment.FragmentMetadata.num_deletions" title="Link to this definition"></a></dt>
<dd><p>The number of rows that have been deleted from this fragment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.num_rows">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.fragment.FragmentMetadata.num_rows" title="Link to this definition"></a></dt>
<dd><p>The number of rows in this fragment after deletions.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id58">
<span class="sig-name descname"><span class="pre">physical_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#id58" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id59">
<span class="sig-name descname"><span class="pre">row_id_meta</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.fragment.RowIdMeta" title="lance.fragment.RowIdMeta"><span class="pre">RowIdMeta</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id59" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.FragmentMetadata.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a></span></span><a class="headerlink" href="#lance.fragment.FragmentMetadata.to_json" title="Link to this definition"></a></dt>
<dd><p>Get this as a simple JSON-serializable dictionary.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.fragment.</span></span><span class="sig-name descname"><span class="pre">LanceFragment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_Fragment</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.LanceFragment" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.count_rows">
<span class="sig-name descname"><span class="pre">count_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.LanceFragment.count_rows" title="Link to this definition"></a></dt>
<dd><p>Count rows matching the scanner filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>count</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.create">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FragmentWriteProgress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'append'</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_storage_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_legacy_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a></span></span><a class="headerlink" href="#lance.fragment.LanceFragment.create" title="Link to this definition"></a></dt>
<dd><p>Create a <a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">FragmentMetadata</span></code></a> from the given data.</p>
<p>This can be used if the dataset is not yet created.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Internal API. This method is not intended to be used by end users.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_uri</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The URI of the dataset.</p></li>
<li><p><strong>fragment_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The ID of the fragment.</p></li>
<li><p><strong>data</strong> (<em>pa.Table</em><em> or </em><em>pa.RecordBatchReader</em>)  The data to be written to the fragment.</p></li>
<li><p><strong>schema</strong> (<em>pa.Schema</em><em>, </em><em>optional</em>)  The schema of the data. If not specified, the schema will be inferred
from the data.</p></li>
<li><p><strong>max_rows_per_group</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024</em>)  The maximum number of rows per group in the data file.</p></li>
<li><p><strong>progress</strong> (<em>FragmentWriteProgress</em><em>, </em><em>optional</em>)  <em>Experimental API</em>. Progress tracking for writing the fragment. Pass
a custom class that defines hooks to be called when each fragment is
starting to write and finishing writing.</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default &quot;append&quot;</em>)  The write mode. If append is specified, the data will be checked
against the existing datasets schema. Otherwise, pass create or
overwrite to assign new field ids to the schema.</p></li>
<li><p><strong>data_storage_version</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  The version of the data storage format to use. Newer versions are more
efficient but require newer versions of lance to read.  The default (None)
will use the latest stable version.  See the user guide for more details.</p></li>
<li><p><strong>use_legacy_format</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default None</em>)  Deprecated parameter.  Use data_storage_version instead.</p></li>
<li><p><strong>storage_options</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.dataset.LanceOperation.Overwrite" title="lance.dataset.LanceOperation.Overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lance.dataset.LanceOperation.Overwrite</span></code></a></dt><dd><p>The operation used to create a new dataset or overwrite one using fragments created with this API. See the doc page for an example of using this API.</p>
</dd>
<dt><a class="reference internal" href="#lance.dataset.LanceOperation.Append" title="lance.dataset.LanceOperation.Append"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lance.dataset.LanceOperation.Append</span></code></a></dt><dd><p>The operation used to append fragments created with this API to an existing dataset. See the doc page for an example of using this API.</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata">FragmentMetadata</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.create_from_file">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a></span></span><a class="headerlink" href="#lance.fragment.LanceFragment.create_from_file" title="Link to this definition"></a></dt>
<dd><p>Create a fragment from the given datafile uri.</p>
<p>This can be used if the datafile is loss from dataset.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Internal API. This method is not intended to be used by end users.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The filename of the datafile.</p></li>
<li><p><strong>dataset</strong> (<a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><em>LanceDataset</em></a>)  The dataset that the fragment belongs to.</p></li>
<li><p><strong>fragment_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The ID of the fragment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.data_files">
<span class="sig-name descname"><span class="pre">data_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.LanceFragment.data_files" title="Link to this definition"></a></dt>
<dd><p>Return the data files of this fragment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#lance.fragment.LanceFragment.delete" title="Link to this definition"></a></dt>
<dd><p>Delete rows from this Fragment.</p>
<p>This will add or update the deletion file of this fragment. It does not
modify or delete the data files of this fragment. If no rows are left after
the deletion, this method will return None.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Internal API. This method is not intended to be used by end users.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>predicate</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  A SQL predicate that specifies the rows to delete.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new fragment containing the new deletion file, or None if no rows left.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata">FragmentMetadata</a> or None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tab</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="s2">&quot;dataset&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frag</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_fragment</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frag</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;a &gt; 1&quot;</span><span class="p">)</span>
<span class="go">FragmentMetadata(id=0, files=[DataFile(path=&#39;...&#39;, fields=[0, 1], ...), ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frag</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;a &gt; 0&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.dataset.LanceOperation.Delete" title="lance.dataset.LanceOperation.Delete"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lance.dataset.LanceOperation.Delete</span></code></a></dt><dd><p>The operation used to commit these changes to a dataset. See the doc page for an example of using this API.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.deletion_file">
<span class="sig-name descname"><span class="pre">deletion_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.LanceFragment.deletion_file" title="Link to this definition"></a></dt>
<dd><p>Return the deletion file, if any</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.fragment_id">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fragment_id</span></span><a class="headerlink" href="#lance.fragment.LanceFragment.fragment_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.head">
<span class="sig-name descname"><span class="pre">head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">num_rows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.LanceFragment.head" title="Link to this definition"></a></dt>
<dd><p>Load the first N rows of the fragment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_rows</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>)  The number of rows to load.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  <p>The columns to project. This can be a list of column names to
include (order and duplicates will be preserved), or a dictionary
with {new_column_name: expression} values for more advanced
projections.</p>
<p>The list of columns or expressions may use the special fields
<cite>__batch_index</cite> (the index of the batch within the fragment),
<cite>__fragment_index</cite> (the index of the fragment within the dataset),
<cite>__last_in_fragment</cite> (whether the batch is last in fragment), and
<cite>__filename</cite> (the name of the source file or a description of the
source fragment).</p>
<p>The columns will be passed down to Datasets and corresponding data
fragments to avoid loading, copying, and deserializing columns
that will not be required further down the compute chain.
By default all of the available columns are projected. Raises
an exception if any of the referenced column names does not exist
in the datasets Schema.</p>
</p></li>
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.merge">
<span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LanceSchema</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.fragment.LanceFragment.merge" title="Link to this definition"></a></dt>
<dd><p>Merge another dataset into this fragment.</p>
<p>Performs a left join, where the fragment is the left side and data_obj
is the right side. Rows existing in the dataset but not on the left will
be filled with null values, unless Lance doesnt support null values for
some types, in which case an error will be raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>Reader-like</em>)  The data to be merged. Acceptable types are:
- Pandas DataFrame, Pyarrow Table, Dataset, Scanner,
Iterator[RecordBatch], or RecordBatchReader</p></li>
<li><p><strong>left_on</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)  The name of the column in the dataset to join on.</p></li>
<li><p><strong>right_on</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>None</em>)  The name of the column in data_obj to join on. If None, defaults to
left_on.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">lance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">write_dataset</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;dataset&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  y</span>
<span class="go">0  1  a</span>
<span class="go">1  2  b</span>
<span class="go">2  3  c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragments</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_fragments</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_df</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merged</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fragments</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="p">,</span> <span class="n">schema</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_df</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">merged</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">merge</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceOperation</span><span class="o">.</span><span class="n">Merge</span><span class="p">(</span><span class="n">merged</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">lance</span><span class="o">.</span><span class="n">LanceDataset</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;dataset&quot;</span><span class="p">,</span> <span class="n">merge</span><span class="p">,</span> <span class="n">read_version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="go">   x  y  z</span>
<span class="go">0  1  a  d</span>
<span class="go">1  2  b  e</span>
<span class="go">2  3  c  f</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">LanceDataset.merge_columns</span></code></dt><dd><p>Add columns to this Fragment.</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A new fragment with the merged column(s) and the final schema.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata">FragmentMetadata</a>, LanceSchema]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.merge_columns">
<span class="sig-name descname"><span class="pre">merge_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value_func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BatchUDF</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ReaderLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">pa.RecordBatch</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pa.RecordBatch</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reader_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pa.Schema</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">LanceSchema</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lance.fragment.LanceFragment.merge_columns" title="Link to this definition"></a></dt>
<dd><p>Add columns to this Fragment.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Internal API. This method is not intended to be used by end users.</p>
</div>
<p>The parameters and their interpretation are the same as in the
<a class="reference internal" href="#lance.dataset.LanceDataset.add_columns" title="lance.dataset.LanceDataset.add_columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lance.dataset.LanceDataset.add_columns()</span></code></a> operation.</p>
<p>The only difference is that, instead of modifying the dataset, a new
fragment is created.  The new schema of the fragment is returned as well.
These can be used in a later operation to commit the changes to the dataset.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#lance.dataset.LanceOperation.Merge" title="lance.dataset.LanceOperation.Merge"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lance.dataset.LanceOperation.Merge</span></code></a></dt><dd><p>The operation used to commit these changes to the dataset. See the doc page for an example of using this API.</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A new fragment with the added column(s) and the final schema.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata">FragmentMetadata</a>, LanceSchema]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.metadata">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a></em><a class="headerlink" href="#lance.fragment.LanceFragment.metadata" title="Link to this definition"></a></dt>
<dd><p>Return the metadata of this fragment.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata">FragmentMetadata</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.num_deletions">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_deletions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.fragment.LanceFragment.num_deletions" title="Link to this definition"></a></dt>
<dd><p>Return the number of deleted rows in this fragment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.partition_expression">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partition_expression</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.fragment.LanceFragment.partition_expression" title="Link to this definition"></a></dt>
<dd><p>An Expression which evaluates to true for all data viewed by this
Fragment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.physical_rows">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">physical_rows</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></em><a class="headerlink" href="#lance.fragment.LanceFragment.physical_rows" title="Link to this definition"></a></dt>
<dd><p>Return the number of rows originally in this fragment.</p>
<p>To get the number of rows after deletions, use
<a class="reference internal" href="#lance.fragment.LanceFragment.count_rows" title="lance.fragment.LanceFragment.count_rows"><code class="xref py py-meth docutils literal notranslate"><span class="pre">count_rows()</span></code></a> instead.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.physical_schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">physical_schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.fragment.LanceFragment.physical_schema" title="Link to this definition"></a></dt>
<dd><p>Return the physical schema of this Fragment. This schema can be
different from the dataset read schema.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.scanner">
<span class="sig-name descname"><span class="pre">scanner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">pa.compute.Expression</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_row_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_readahead</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">16</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.LanceScanner" title="lance.LanceScanner"><span class="pre">LanceScanner</span></a></span></span><a class="headerlink" href="#lance.fragment.LanceFragment.scanner" title="Link to this definition"></a></dt>
<dd><p>See Dataset::scanner for details</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.schema">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a></em><a class="headerlink" href="#lance.fragment.LanceFragment.schema" title="Link to this definition"></a></dt>
<dd><p>Return the schema of this fragment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.take">
<span class="sig-name descname"><span class="pre">take</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.LanceFragment.take" title="Link to this definition"></a></dt>
<dd><p>Select rows of data by index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indices</strong> (<em>Array</em><em> or </em><em>array-like</em>)  The indices of row to select in the dataset.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  <p>The columns to project. This can be a list of column names to
include (order and duplicates will be preserved), or a dictionary
with {new_column_name: expression} values for more advanced
projections.</p>
<p>The list of columns or expressions may use the special fields
<cite>__batch_index</cite> (the index of the batch within the fragment),
<cite>__fragment_index</cite> (the index of the fragment within the dataset),
<cite>__last_in_fragment</cite> (whether the batch is last in fragment), and
<cite>__filename</cite> (the name of the source file or a description of the
source fragment).</p>
<p>The columns will be passed down to Datasets and corresponding data
fragments to avoid loading, copying, and deserializing columns
that will not be required further down the compute chain.
By default all of the available columns are projected. Raises
an exception if any of the referenced column names does not exist
in the datasets Schema.</p>
</p></li>
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.to_batches">
<span class="sig-name descname"><span class="pre">to_batches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Schema</span> <span class="pre">schema=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.LanceFragment.to_batches" title="Link to this definition"></a></dt>
<dd><p>Read the fragment as materialized record batches.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema</strong> (<em>Schema</em><em>, </em><em>optional</em>)  Concrete schema to use for scanning.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  <p>The columns to project. This can be a list of column names to
include (order and duplicates will be preserved), or a dictionary
with {new_column_name: expression} values for more advanced
projections.</p>
<p>The list of columns or expressions may use the special fields
<cite>__batch_index</cite> (the index of the batch within the fragment),
<cite>__fragment_index</cite> (the index of the fragment within the dataset),
<cite>__last_in_fragment</cite> (whether the batch is last in fragment), and
<cite>__filename</cite> (the name of the source file or a description of the
source fragment).</p>
<p>The columns will be passed down to Datasets and corresponding data
fragments to avoid loading, copying, and deserializing columns
that will not be required further down the compute chain.
By default all of the available columns are projected. Raises
an exception if any of the referenced column names does not exist
in the datasets Schema.</p>
</p></li>
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>record_batches</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>iterator of RecordBatch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.LanceFragment.to_table">
<span class="sig-name descname"><span class="pre">to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Schema</span> <span class="pre">schema=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Expression</span> <span class="pre">filter=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_size=_DEFAULT_BATCH_SIZE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">batch_readahead=_DEFAULT_BATCH_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">fragment_readahead=_DEFAULT_FRAGMENT_READAHEAD</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FragmentScanOptions</span> <span class="pre">fragment_scan_options=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">use_threads=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool</span> <span class="pre">cache_metadata=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MemoryPool</span> <span class="pre">memory_pool=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.LanceFragment.to_table" title="Link to this definition"></a></dt>
<dd><p>Convert this Fragment into a Table.</p>
<p>Use this convenience utility with care. This will serially materialize
the Scan result in memory before creating the Table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema</strong> (<em>Schema</em><em>, </em><em>optional</em>)  Concrete schema to use for scanning.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  <p>The columns to project. This can be a list of column names to
include (order and duplicates will be preserved), or a dictionary
with {new_column_name: expression} values for more advanced
projections.</p>
<p>The list of columns or expressions may use the special fields
<cite>__batch_index</cite> (the index of the batch within the fragment),
<cite>__fragment_index</cite> (the index of the fragment within the dataset),
<cite>__last_in_fragment</cite> (whether the batch is last in fragment), and
<cite>__filename</cite> (the name of the source file or a description of the
source fragment).</p>
<p>The columns will be passed down to Datasets and corresponding data
fragments to avoid loading, copying, and deserializing columns
that will not be required further down the compute chain.
By default all of the available columns are projected. Raises
an exception if any of the referenced column names does not exist
in the datasets Schema.</p>
</p></li>
<li><p><strong>filter</strong> (<em>Expression</em><em>, </em><em>default None</em>)  Scan will return only the rows matching the filter.
If possible the predicate will be pushed down to exploit the
partition information or internal metadata found in the data
source, e.g. Parquet statistics. Otherwise filters the loaded
RecordBatches before yielding them.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 131_072</em>)  The maximum row count for scanned record batches. If scanned
record batches are overflowing memory then this method can be
called to reduce their size.</p></li>
<li><p><strong>batch_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 16</em>)  The number of batches to read ahead in a file. This might not work
for all file formats. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_readahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 4</em>)  The number of files to read ahead. Increasing this number will increase
RAM usage but could also improve IO utilization.</p></li>
<li><p><strong>fragment_scan_options</strong> (<em>FragmentScanOptions</em><em>, </em><em>default None</em>)  Options specific to a particular scan and fragment type, which
can change between different scans of the same dataset.</p></li>
<li><p><strong>use_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, then maximum parallelism will be used determined by
the number of available CPU cores.</p></li>
<li><p><strong>cache_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default True</em>)  If enabled, metadata may be cached when scanning to speed up
repeated scans.</p></li>
<li><p><strong>memory_pool</strong> (<em>MemoryPool</em><em>, </em><em>default None</em>)  For memory allocations, if required. If not specified, uses the
default pool.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>table</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Table</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lance.fragment.RowIdMeta">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lance.fragment.</span></span><span class="sig-name descname"><span class="pre">RowIdMeta</span></span><a class="headerlink" href="#lance.fragment.RowIdMeta" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.RowIdMeta.asdict">
<span class="sig-name descname"><span class="pre">asdict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.RowIdMeta.asdict" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.RowIdMeta.from_json">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.RowIdMeta.from_json" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lance.fragment.RowIdMeta.json">
<span class="sig-name descname"><span class="pre">json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lance.fragment.RowIdMeta.json" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lance.fragment.write_fragments">
<span class="sig-prename descclassname"><span class="pre">lance.fragment.</span></span><span class="sig-name descname"><span class="pre">write_fragments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_transaction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'append'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span> <span class="pre">*</span> <span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bytes_per_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">DEFAULT_MAX_BYTES_PER_FILE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FragmentWriteProgress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_storage_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_legacy_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_move_stable_row_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lance.Transaction" title="lance.Transaction"><span class="pre">Transaction</span></a></span></span><a class="headerlink" href="#lance.fragment.write_fragments" title="Link to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">lance.fragment.</span></span><span class="sig-name descname"><span class="pre">write_fragments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReaderLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><span class="pre">LanceDataset</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Schema.html#pyarrow.Schema" title="(in Apache Arrow v20.0.0)"><span class="pre">Schema</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_transaction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'append'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span> <span class="pre">*</span> <span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows_per_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_bytes_per_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">DEFAULT_MAX_BYTES_PER_FILE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FragmentWriteProgress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_storage_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_legacy_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_move_stable_row_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><span class="pre">FragmentMetadata</span></a><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Write data into one or more fragments.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is a low-level API intended for manually implementing distributed
writes. For most users, <a class="reference internal" href="#lance.write_dataset" title="lance.write_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">lance.write_dataset()</span></code></a> is the recommended API.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pa.Table</em><em> or </em><em>pa.RecordBatchReader</em>)  The data to be written to the fragment.</p></li>
<li><p><strong>dataset_uri</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Path</em><em>, or </em><a class="reference internal" href="#lance.LanceDataset" title="lance.LanceDataset"><em>LanceDataset</em></a>)  The URI of the dataset or the dataset object.</p></li>
<li><p><strong>schema</strong> (<em>pa.Schema</em><em>, </em><em>optional</em>)  The schema of the data. If not specified, the schema will be inferred
from the data.</p></li>
<li><p><strong>return_transaction</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default False</em>)  If its true, the transaction will be returned.</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default &quot;append&quot;</em>)  The write mode. If append is specified, the data will be checked
against the existing datasets schema. Otherwise, pass create or
overwrite to assign new field ids to the schema.</p></li>
<li><p><strong>max_rows_per_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024 * 1024</em>)  The maximum number of rows per data file.</p></li>
<li><p><strong>max_rows_per_group</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 1024</em>)  The maximum number of rows per group in the data file.</p></li>
<li><p><strong>max_bytes_per_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><em>default 90 * 1024 * 1024 * 1024</em>)  The max number of bytes to write before starting a new file. This is a
soft limit. This limit is checked after each group is written, which
means larger groups may cause this to be overshot meaningfully. This
defaults to 90 GB, since we have a hard limit of 100 GB per file on
object stores.</p></li>
<li><p><strong>progress</strong> (<em>FragmentWriteProgress</em><em>, </em><em>optional</em>)  <em>Experimental API</em>. Progress tracking for writing the fragment. Pass
a custom class that defines hooks to be called when each fragment is
starting to write and finishing writing.</p></li>
<li><p><strong>data_storage_version</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default None</em>)  The version of the data storage format to use. Newer versions are more
efficient but require newer versions of lance to read.  The default (None)
will use the 2.0 version.  See the user guide for more details.</p></li>
<li><p><strong>use_legacy_format</strong> (<em>optional</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>default None</em>)  Deprecated method for setting the data storage version. Use the
<cite>data_storage_version</cite> parameter instead.</p></li>
<li><p><strong>storage_options</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em><em>]</em>)  Extra options that make sense for a particular storage connection. This is
used to store connection parameters like credentials, endpoint, etc.</p></li>
<li><p><strong>enable_move_stable_row_ids</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>)  Experimental: if set to true, the writer will use move-stable row ids.
These row ids are stable after compaction operations, but not after updates.
This makes compaction more efficient, since with stable row ids no
secondary indices need to be updated to point to new row ids.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>If return_transaction is False:</dt><dd><p>a list of <a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">FragmentMetadata</span></code></a> for the fragments written. The
fragment ids are left as zero meaning they are not yet specified. They
will be assigned when the fragments are committed to a dataset.</p>
</dd>
<dt>If return_transaction is True:</dt><dd><p>The write transaction. The type of transaction will correspond to
the mode parameter specified. This transaction can be passed to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">LanceDataset.commit()</span></code>.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#lance.fragment.FragmentMetadata" title="lance.fragment.FragmentMetadata">FragmentMetadata</a>] | <a class="reference internal" href="#lance.Transaction" title="lance.Transaction">Transaction</a></p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index-and-search.html" class="btn btn-neutral float-left" title="Indexing and Searching" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Lance Developer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>